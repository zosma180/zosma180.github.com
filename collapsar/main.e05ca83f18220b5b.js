"use strict";(self.webpackChunkcollapsar=self.webpackChunkcollapsar||[]).push([[179],{276:()=>{function uo(i){return"function"==typeof i}let _u=!1;const pr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(i){if(i){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else _u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_u=i},get useDeprecatedSynchronousErrorHandling(){return _u}};function ho(i){setTimeout(()=>{throw i},0)}const jh={closed:!0,next(i){},error(i){if(pr.useDeprecatedSynchronousErrorHandling)throw i;ho(i)},complete(){}},fl=Array.isArray||(i=>i&&"number"==typeof i.length);function Wg(i){return null!==i&&"object"==typeof i}const Wh=(()=>{function i(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,n)=>`${n+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return i.prototype=Object.create(Error.prototype),i})();class gt{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_unsubscribe:n,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof gt)t.remove(this);else if(null!==t)for(let s=0;s<t.length;++s)t[s].remove(this);if(uo(n))try{n.call(this)}catch(s){e=s instanceof Wh?yx(s.errors):[s]}if(fl(r)){let s=-1,o=r.length;for(;++s<o;){const a=r[s];if(Wg(a))try{a.unsubscribe()}catch(l){e=e||[],l instanceof Wh?e=e.concat(yx(l.errors)):e.push(l)}}}if(e)throw new Wh(e)}add(e){let t=e;if(!e)return gt.EMPTY;switch(typeof e){case"function":t=new gt(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof gt)){const s=t;t=new gt,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof gt){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var i;function yx(i){return i.reduce((e,t)=>e.concat(t instanceof Wh?t.errors:t),[])}gt.EMPTY=((i=new gt).closed=!0,i);const $h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class En extends gt{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=jh;break;case 1:if(!e){this.destination=jh;break}if("object"==typeof e){e instanceof En?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new vx(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new vx(this,e,t,n)}}[$h](){return this}static create(e,t,n){const r=new En(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class vx extends En{constructor(e,t,n,r){super(),this._parentSubscriber=e;let s,o=this;uo(t)?s=t:t&&(s=t.next,n=t.error,r=t.complete,t!==jh&&(o=Object.create(t),uo(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;pr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=pr;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):ho(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;ho(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);pr.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),pr.useDeprecatedSynchronousErrorHandling)throw n;ho(n)}}__tryOrSetError(e,t,n){if(!pr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return pr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(ho(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const yu="function"==typeof Symbol&&Symbol.observable||"@@observable";function bx(i){return i}let cn=(()=>{class i{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const{operator:s}=this,o=function vF(i,e,t){if(i){if(i instanceof En)return i;if(i[$h])return i[$h]()}return i||e||t?new En(i,e,t):new En(jh)}(t,n,r);if(o.add(s?s.call(o,this.source):this.source||pr.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),pr.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(n){pr.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),function yF(i){for(;i;){const{closed:e,destination:t,isStopped:n}=i;if(e||n)return!1;i=t&&t instanceof En?t:null}return!0}(t)?t.error(n):console.warn(n)}}forEach(t,n){return new(n=xx(n))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:n}=this;return n&&n.subscribe(t)}[yu](){return this}pipe(...t){return 0===t.length?this:function wx(i){return 0===i.length?bx:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}(t)(this)}toPromise(t){return new(t=xx(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function xx(i){if(i||(i=pr.Promise||Promise),!i)throw new Error("no Promise impl found");return i}const ml=(()=>{function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return i.prototype=Object.create(Error.prototype),i})();class bF extends gt{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class Mx extends En{constructor(e){super(e),this.destination=e}}let Je=(()=>{class i extends cn{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[$h](){return new Mx(this)}lift(t){const n=new Cx(this,this);return n.operator=t,n}next(t){if(this.closed)throw new ml;if(!this.isStopped){const{observers:n}=this,r=n.length,s=n.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new ml;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:n}=this,r=n.length,s=n.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new ml;this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ml;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ml;return this.hasError?(t.error(this.thrownError),gt.EMPTY):this.isStopped?(t.complete(),gt.EMPTY):(this.observers.push(t),new bF(this,t))}asObservable(){const t=new cn;return t.source=this,t}}return i.create=(e,t)=>new Cx(e,t),i})();class Cx extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):gt.EMPTY}}function gl(i){return i&&"function"==typeof i.schedule}class qh extends En{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const Sx=i=>e=>{for(let t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()},Yh=function xF(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Ex=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Dx(i){return!!i&&"function"!=typeof i.subscribe&&"function"==typeof i.then}const Tx=i=>{if(i&&"function"==typeof i[yu])return(i=>e=>{const t=i[yu]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(i);if(Ex(i))return Sx(i);if(Dx(i))return(i=>e=>(i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ho),e))(i);if(i&&"function"==typeof i[Yh])return(i=>e=>{const t=i[Yh]();for(;;){const n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(i);{const t=`You provided ${Wg(i)?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function _l(i,e,t,n,r=new qh(i,t,n)){if(!r.closed)return e instanceof cn?e.subscribe(r):Tx(e)(r)}class yl extends En{notifyNext(e,t,n,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function Wn(i,e){return function(n){if("function"!=typeof i)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new SF(i,e))}}class SF{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new EF(e,this.project,this.thisArg))}}class EF extends En{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function $g(i,e){return new cn(t=>{const n=new gt;let r=0;return n.add(e.schedule(function(){r!==i.length?(t.next(i[r++]),t.closed||n.add(this.schedule())):t.complete()})),n})}function vu(i,e){return e?function RF(i,e){if(null!=i){if(function IF(i){return i&&"function"==typeof i[yu]}(i))return function DF(i,e){return new cn(t=>{const n=new gt;return n.add(e.schedule(()=>{const r=i[yu]();n.add(r.subscribe({next(s){n.add(e.schedule(()=>t.next(s)))},error(s){n.add(e.schedule(()=>t.error(s)))},complete(){n.add(e.schedule(()=>t.complete()))}}))})),n})}(i,e);if(Dx(i))return function TF(i,e){return new cn(t=>{const n=new gt;return n.add(e.schedule(()=>i.then(r=>{n.add(e.schedule(()=>{t.next(r),n.add(e.schedule(()=>t.complete()))}))},r=>{n.add(e.schedule(()=>t.error(r)))}))),n})}(i,e);if(Ex(i))return $g(i,e);if(function kF(i){return i&&"function"==typeof i[Yh]}(i)||"string"==typeof i)return function AF(i,e){if(!i)throw new Error("Iterable cannot be null");return new cn(t=>{const n=new gt;let r;return n.add(()=>{r&&"function"==typeof r.return&&r.return()}),n.add(e.schedule(()=>{r=i[Yh](),n.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),n})}(i,e)}throw new TypeError((null!==i&&typeof i||i)+" is not observable")}(i,e):i instanceof cn?i:new cn(Tx(i))}function qg(i,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?n=>n.pipe(qg((r,s)=>vu(i(r,s)).pipe(Wn((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),n=>n.lift(new PF(i,t)))}class PF{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new FF(e,this.project,this.concurrent))}}class FF extends yl{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new qh(this,t,n),s=this.destination;s.add(r);const o=_l(this,e,void 0,void 0,r);o!==r&&s.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,s){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ax(i=Number.POSITIVE_INFINITY){return qg(bx,i)}function Yg(i,e){return e?$g(i,e):new cn(Sx(i))}function kr(...i){let e=Number.POSITIVE_INFINITY,t=null,n=i[i.length-1];return gl(n)?(t=i.pop(),i.length>1&&"number"==typeof i[i.length-1]&&(e=i.pop())):"number"==typeof n&&(e=i.pop()),null===t&&1===i.length&&i[0]instanceof cn?i[0]:Ax(e)(Yg(i,t))}function Ix(){return function(e){return e.lift(new LF(e))}}class LF{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new OF(e,n),s=t.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class OF extends En{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}class NF extends cn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new gt,e.add(this.source.subscribe(new VF(this.getSubject(),this))),e.closed&&(this._connection=null,e=gt.EMPTY)),e}refCount(){return Ix()(this)}}const BF=(()=>{const i=NF.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:i._subscribe},_isComplete:{value:i._isComplete,writable:!0},getSubject:{value:i.getSubject},connect:{value:i.connect},refCount:{value:i.refCount}}})();class VF extends Mx{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class UF{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:n}=this,r=this.subjectFactory(),s=n(r).subscribe(e);return s.add(t.subscribe(r)),s}}function GF(){return new Je}function kx(){return i=>Ix()(function zF(i,e){return function(n){let r;if(r="function"==typeof i?i:function(){return i},"function"==typeof e)return n.lift(new UF(r,e));const s=Object.create(n,BF);return s.source=n,s.subjectFactory=r,s}}(GF)(i))}function Qt(i){for(let e in i)if(i[e]===Qt)return e;throw Error("Could not find renamed property on target object.")}function Xg(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function Jt(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Jt).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Zg(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const jF=Qt({__forward_ref__:Qt});function Rt(i){return i.__forward_ref__=Rt,i.toString=function(){return Jt(this())},i}function Ze(i){return Kg(i)?i():i}function Kg(i){return"function"==typeof i&&i.hasOwnProperty(jF)&&i.__forward_ref__===Rt}class ce extends Error{constructor(e,t){super(function Xh(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function nt(i){return"string"==typeof i?i:null==i?"":String(i)}function Zh(i,e){throw new ce(-201,!1)}function $i(i,e){null==i&&function Wt(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Se(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function it(i){return{providers:i.providers||[],imports:i.imports||[]}}function Kh(i){return Rx(i,Qh)||Rx(i,Fx)}function Rx(i,e){return i.hasOwnProperty(e)?i[e]:null}function Px(i){return i&&(i.hasOwnProperty(Qg)||i.hasOwnProperty(QF))?i[Qg]:null}const Qh=Qt({\u0275prov:Qt}),Qg=Qt({\u0275inj:Qt}),Fx=Qt({ngInjectableDef:Qt}),QF=Qt({ngInjectorDef:Qt});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Jg;function fr(i){const e=Jg;return Jg=i,e}function Lx(i,e,t){const n=Kh(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&Ke.Optional?null:void 0!==e?e:void Zh(Jt(i))}function po(i){return{toString:i}.toString()}var Rr=(()=>((Rr=Rr||{})[Rr.OnPush=0]="OnPush",Rr[Rr.Default=1]="Default",Rr))(),Pr=(()=>(function(i){i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom"}(Pr||(Pr={})),Pr))();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vl={},zt=[],Jh=Qt({\u0275cmp:Qt}),e_=Qt({\u0275dir:Qt}),t_=Qt({\u0275pipe:Qt}),Ox=Qt({\u0275mod:Qt}),Ds=Qt({\u0275fac:Qt}),bu=Qt({__NG_ELEMENT_ID__:Qt});let eL=0;function Ct(i){return po(()=>{const t=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Rr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||zt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Pr.Emulated,id:"c"+eL++,styles:i.styles||zt,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=Vx(i.inputs,n),r.outputs=Vx(i.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Nx).filter(Bx):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Si).filter(Bx):null,r})}function Nx(i){return Yt(i)||Ci(i)}function Bx(i){return null!==i}function dt(i){return po(()=>({type:i.type,bootstrap:i.bootstrap||zt,declarations:i.declarations||zt,imports:i.imports||zt,exports:i.exports||zt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Vx(i,e){if(null==i)return vl;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}const Ee=Ct;function hi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Yt(i){return i[Jh]||null}function Ci(i){return i[e_]||null}function Si(i){return i[t_]||null}function Ni(i){return Array.isArray(i)&&"object"==typeof i[1]}function Lr(i){return Array.isArray(i)&&!0===i[1]}function r_(i){return 0!=(8&i.flags)}function ip(i){return 2==(2&i.flags)}function rp(i){return 1==(1&i.flags)}function Or(i){return null!==i.template}function oL(i){return 0!=(256&i[2])}function la(i,e){return i.hasOwnProperty(Ds)?i[Ds]:null}class cL{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function yn(){return Ux}function Ux(i){return i.type.prototype.ngOnChanges&&(i.setInput=dL),uL}function uL(){const i=jx(this),e=i?.current;if(e){const t=i.previous;if(t===vl)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function dL(i,e,t,n){const r=jx(i)||function hL(i,e){return i[Gx]=e}(i,{previous:vl,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new cL(l&&l.currentValue,e,o===vl),i[n]=e}yn.ngInherit=!0;const Gx="__ngSimpleChanges__";function jx(i){return i[Gx]||null}function Rn(i){for(;Array.isArray(i);)i=i[0];return i}function sp(i,e){return Rn(e[i])}function _r(i,e){return Rn(e[i.index])}function c_(i,e){return i.data[e]}function Ml(i,e){return i[e]}function Xi(i,e){const t=e[i];return Ni(t)?t:t[0]}function op(i){return 64==(64&i[2])}function fo(i,e){return null==e?null:i[e]}function Wx(i){i[18]=0}function u_(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const et={lFrame:tM(null),bindingsEnabled:!0};function qx(){return et.bindingsEnabled}function ne(){return et.lFrame.lView}function Ft(){return et.lFrame.tView}function vt(i){return et.lFrame.contextLView=i,i[8]}function bt(i){return et.lFrame.contextLView=null,i}function $n(){let i=Yx();for(;null!==i&&64===i.type;)i=i.parent;return i}function Yx(){return et.lFrame.currentTNode}function Kr(i,e){const t=et.lFrame;t.currentTNode=i,t.isParent=e}function d_(){return et.lFrame.isParent}function h_(){et.lFrame.isParent=!1}function Ei(){const i=et.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Cl(){return et.lFrame.bindingIndex++}function As(i){const e=et.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function DL(i,e){const t=et.lFrame;t.bindingIndex=t.bindingRootIndex=i,p_(e)}function p_(i){et.lFrame.currentDirectiveIndex=i}function f_(i){const e=et.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}function Qx(){return et.lFrame.currentQueryIndex}function m_(i){et.lFrame.currentQueryIndex=i}function AL(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function Jx(i,e,t){if(t&Ke.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&Ke.Host||(r=AL(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,i=s}const n=et.lFrame=eM();return n.currentTNode=e,n.lView=i,!0}function g_(i){const e=eM(),t=i[1];et.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function eM(){const i=et.lFrame,e=null===i?null:i.child;return null===e?tM(i):e}function tM(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function nM(){const i=et.lFrame;return et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const iM=nM;function __(){const i=nM();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Di(){return et.lFrame.selectedIndex}function mo(i){et.lFrame.selectedIndex=i}function vn(){const i=et.lFrame;return c_(i.tView,i.selectedIndex)}function y_(){et.lFrame.currentNamespace="svg"}function ap(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=u&&(i.destroyHooks||(i.destroyHooks=[])).push(t,u)}}function lp(i,e,t){sM(i,e,3,t)}function cp(i,e,t,n){(3&i[2])===t&&sM(i,e,t,n)}function v_(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function sM(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(OL(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function OL(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Du{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function up(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];aM(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function oM(i){return 3===i||4===i||6===i}function aM(i){return 64===i.charCodeAt(0)}function dp(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||lM(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function lM(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function cM(i){return-1!==i}function Sl(i){return 32767&i}function El(i,e){let t=function zL(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let w_=!0;function hp(i){const e=w_;return w_=i,e}let UL=0;const Qr={};function Au(i,e){const t=M_(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,x_(n.data,i),x_(e,null),x_(n.blueprint,null));const r=pp(i,e),s=i.injectorIndex;if(cM(r)){const o=Sl(r),a=El(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function x_(i,e){i.push(0,0,0,0,0,0,0,0,e)}function M_(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function pp(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=yM(r),null===n)return-1;if(t++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function fp(i,e,t){!function GL(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(bu)&&(n=t[bu]),null==n&&(n=t[bu]=UL++);const r=255&n;e.data[i+(r>>5)]|=1<<r}(i,e,t)}function hM(i,e,t){if(t&Ke.Optional||void 0!==i)return i;Zh()}function pM(i,e,t,n){if(t&Ke.Optional&&void 0===n&&(n=null),0==(t&(Ke.Self|Ke.Host))){const r=i[9],s=fr(void 0);try{return r?r.get(e,n,t&Ke.Optional):Lx(e,n,t&Ke.Optional)}finally{fr(s)}}return hM(n,0,t)}function fM(i,e,t,n=Ke.Default,r){if(null!==i){if(1024&e[2]){const o=function YL(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=mM(s,o,t,n|Ke.Self,Qr);if(a!==Qr)return a;let l=s.parent;if(!l){const c=o[21];if(c){const u=c.get(t,Qr,n);if(u!==Qr)return u}l=yM(o),o=o[15]}s=l}return r}(i,e,t,n,Qr);if(o!==Qr)return o}const s=mM(i,e,t,n,Qr);if(s!==Qr)return s}return pM(e,t,n,r)}function mM(i,e,t,n,r){const s=function $L(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(bu)?i[bu]:void 0;return"number"==typeof e?e>=0?255&e:qL:e}(t);if("function"==typeof s){if(!Jx(e,i,n))return n&Ke.Host?hM(r,0,n):pM(e,t,n,r);try{const o=s(n);if(null!=o||n&Ke.Optional)return o;Zh()}finally{iM()}}else if("number"==typeof s){let o=null,a=M_(i,e),l=-1,c=n&Ke.Host?e[16][6]:null;for((-1===a||n&Ke.SkipSelf)&&(l=-1===a?pp(i,e):e[a+8],-1!==l&&_M(n,!1)?(o=e[1],a=Sl(l),e=El(l,e)):a=-1);-1!==a;){const u=e[1];if(gM(s,a,u.data)){const d=WL(a,e,t,o,n,c);if(d!==Qr)return d}l=e[a+8],-1!==l&&_M(n,e[1].data[a+8]===c)&&gM(s,a,e)?(o=u,a=Sl(l),e=El(l,e)):a=-1}}return r}function WL(i,e,t,n,r,s){const o=e[1],a=o.data[i+8],u=mp(a,o,t,null==n?ip(a)&&w_:n!=o&&0!=(3&a.type),r&Ke.Host&&s===a);return null!==u?Iu(e,o,u,a):Qr}function mp(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,u=s>>20,h=r?a+u:i.directiveEnd;for(let p=n?a:a+u;p<h;p++){const f=o[p];if(p<l&&t===f||p>=l&&f.type===t)return p}if(r){const p=o[l];if(p&&Or(p)&&p.type===t)return l}return null}function Iu(i,e,t,n){let r=i[t];const s=e.data;if(function NL(i){return i instanceof Du}(r)){const o=r;o.resolving&&function WF(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new ce(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Ht(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():nt(i)}(s[t]));const a=hp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?fr(o.injectImpl):null;Jx(i,n,Ke.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function LL(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=Ux(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&fr(l),hp(a),o.resolving=!1,iM()}}return r}function gM(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function _M(i,e){return!(i&Ke.Self||i&Ke.Host&&e)}class Dl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return fM(this._tNode,this._lView,e,n,t)}}function qL(){return new Dl($n(),ne())}function Pn(i){return po(()=>{const e=i.prototype.constructor,t=e[Ds]||C_(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[Ds]||C_(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function C_(i){return Kg(i)?()=>{const e=C_(Ze(i));return e&&e()}:la(i)}function yM(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}function Is(i){return function jL(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(oM(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}($n(),i)}const Al="__parameters__";function kl(i,e,t){return po(()=>{const n=function S_(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Al)?l[Al]:Object.defineProperty(l,Al,{value:[]})[Al];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class ue{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zi(i,e){void 0===e&&(e=i);for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)?(e===i&&(e=i.slice(0,t)),Zi(n,e)):e!==i&&e.push(n)}return e}function ks(i,e){i.forEach(t=>Array.isArray(t)?ks(t,e):e(t))}function bM(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function gp(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function Pu(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function Ki(i,e,t){let n=Rl(i,e);return n>=0?i[1|n]=t:(n=~n,function QL(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function D_(i,e){const t=Rl(i,e);if(t>=0)return i[1|t]}function Rl(i,e){return function MM(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const Fu={},A_="__NG_DI_FLAG__",yp="ngTempTokenPath",oO=/\n/gm,CM="__source";let Lu;function Pl(i){const e=Lu;return Lu=i,e}function lO(i,e=Ke.Default){if(void 0===Lu)throw new ce(-203,!1);return null===Lu?Lx(i,void 0,e):Lu.get(i,e&Ke.Optional?null:void 0,e)}function $(i,e=Ke.Default){return(function JF(){return Jg}()||lO)(Ze(i),e)}function Rs(i,e=Ke.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),$(i,e)}function I_(i){const e=[];for(let t=0;t<i.length;t++){const n=Ze(i[t]);if(Array.isArray(n)){if(0===n.length)throw new ce(900,!1);let r,s=Ke.Default;for(let o=0;o<n.length;o++){const a=n[o],l=cO(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push($(r,s))}else e.push($(n))}return e}function Ou(i,e){return i[A_]=e,i.prototype[A_]=e,i}function cO(i){return i[A_]}const Jr=Ou(kl("Optional"),8),_o=Ou(kl("SkipSelf"),4);let R_,wp,xp;function Ll(i){var e;return(null===(e=function P_(){if(void 0===wp&&(wp=null,tn.trustedTypes))try{wp=tn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return wp}())||void 0===e?void 0:e.createHTML(i))||i}function FM(i){var e;return(null===(e=function F_(){if(void 0===xp&&(xp=null,tn.trustedTypes))try{xp=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return xp}())||void 0===e?void 0:e.createHTML(i))||i}class ca{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class CO extends ca{getTypeName(){return"HTML"}}class SO extends ca{getTypeName(){return"Style"}}class EO extends ca{getTypeName(){return"Script"}}class DO extends ca{getTypeName(){return"URL"}}class TO extends ca{getTypeName(){return"ResourceURL"}}function Qi(i){return i instanceof ca?i.changingThisBreaksApplicationSecurity:i}function es(i,e){const t=function AO(i){return i instanceof ca&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class LO{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ll(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class OO{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const n=this.inertDocument.createElement("body");t.appendChild(n)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ll(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Ll(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const BO=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Mp(i){return(i=String(i)).match(BO)?i:"unsafe:"+i}function Ps(i){const e={};for(const t of i.split(","))e[t]=!0;return e}function Vu(...i){const e={};for(const t of i)for(const n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}const BM=Ps("area,br,col,hr,img,wbr"),VM=Ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),HM=Ps("rp,rt"),L_=Vu(BM,Vu(VM,Ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vu(HM,Ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vu(HM,VM)),O_=Ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zM=Vu(O_,Ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),VO=Ps("script,style,template");class HO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!L_.hasOwnProperty(t))return this.sanitizedSomething=!0,!VO.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!zM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;O_[a]&&(l=Mp(l)),this.buf.push(" ",o,'="',UM(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();L_.hasOwnProperty(t)&&!BM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(UM(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const zO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,UO=/([^\#-~ |!])/g;function UM(i){return i.replace(/&/g,"&amp;").replace(zO,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(UO,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cp;function GM(i,e){let t=null;try{Cp=Cp||function NM(i){const e=new OO(i);return function NO(){try{return!!(new window.DOMParser).parseFromString(Ll(""),"text/html")}catch{return!1}}()?new LO(e):e}(i);let n=e?String(e):"";t=Cp.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=t.innerHTML,t=Cp.getInertBodyElement(n)}while(n!==s);return Ll((new HO).sanitizeChildren(N_(t)||t))}finally{if(t){const n=N_(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function N_(i){return"content"in i&&function GO(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ut=(()=>((Ut=Ut||{})[Ut.NONE=0]="NONE",Ut[Ut.HTML=1]="HTML",Ut[Ut.STYLE=2]="STYLE",Ut[Ut.SCRIPT=3]="SCRIPT",Ut[Ut.URL=4]="URL",Ut[Ut.RESOURCE_URL=5]="RESOURCE_URL",Ut))();function jM(i){const e=Hu();return e?FM(e.sanitize(Ut.HTML,i)||""):es(i,"HTML")?FM(Qi(i)):GM(function PM(){return void 0!==R_?R_:typeof document<"u"?document:void 0}(),nt(i))}function Ol(i){const e=Hu();return e?e.sanitize(Ut.URL,i)||"":es(i,"URL")?Qi(i):Mp(nt(i))}function Hu(){const i=ne();return i&&i[12]}const $M=new ue("ENVIRONMENT_INITIALIZER"),qM=new ue("INJECTOR",-1),YM=new ue("INJECTOR_DEF_TYPES");class XM{get(e,t=Fu){if(t===Fu){const n=new Error(`NullInjectorError: No provider for ${Jt(e)}!`);throw n.name="NullInjectorError",n}return t}}function ZO(...i){return{\u0275providers:ZM(0,i)}}function ZM(i,...e){const t=[],n=new Set;let r;return ks(e,s=>{const o=s;B_(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&KM(r,t),t}function KM(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];ks(r,s=>{e.push(s)})}}function B_(i,e,t,n){if(!(i=Ze(i)))return!1;let r=null,s=Px(i);const o=!s&&Yt(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=Px(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)B_(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{ks(s.imports,u=>{B_(u,e,t,n)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&KM(c,e)}if(!a){const c=la(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:zt},{provide:YM,useValue:r,multi:!0},{provide:$M,useValue:()=>$(r),multi:!0})}const l=s.providers;null==l||a||ks(l,u=>{e.push(u)})}}return r!==i&&void 0!==i.providers}const KO=Qt({provide:String,useValue:Qt});function V_(i){return null!==i&&"object"==typeof i&&KO in i}function ua(i){return"function"==typeof i}const H_=new ue("Set Injector scope."),Sp={},JO={};let z_;function Ep(){return void 0===z_&&(z_=new XM),z_}class Nl{}class eC extends Nl{constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,G_(e,o=>this.processProvider(o)),this.records.set(qM,Bl(void 0,this)),r.has("environment")&&this.records.set(Nl,Bl(void 0,this));const s=this.records.get(H_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(YM.multi,zt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Pl(this),n=fr(void 0);try{return e()}finally{Pl(t),fr(n)}}get(e,t=Fu,n=Ke.Default){this.assertNotDestroyed();const r=Pl(this),s=fr(void 0);try{if(!(n&Ke.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function s3(i){return"function"==typeof i||"object"==typeof i&&i instanceof ue}(e)&&Kh(e);a=l&&this.injectableDefInScope(l)?Bl(U_(e),Sp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&Ke.Self?Ep():this.parent).get(e,t=n&Ke.Optional&&t===Fu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[yp]=o[yp]||[]).unshift(Jt(e)),r)throw o;return function uO(i,e,t,n){const r=i[yp];throw e[CM]&&r.unshift(e[CM]),i.message=function dO(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=Jt(e);if(Array.isArray(e))r=e.map(Jt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Jt(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(oO,"\n  ")}`}("\n"+i.message,r,t,n),i.ngTokenPath=r,i[yp]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{fr(s),Pl(r)}}resolveInjectorInitializers(){const e=Pl(this),t=fr(void 0);try{const n=this.get($M.multi,zt,Ke.Self);for(const r of n)r()}finally{Pl(e),fr(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(Jt(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(e){let t=ua(e=Ze(e))?e:Ze(e&&e.provide);const n=function t3(i){return V_(i)?Bl(void 0,i.useValue):Bl(tC(i),Sp)}(e);if(ua(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Bl(void 0,Sp,!0),r.factory=()=>I_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Sp&&(t.value=JO,t.value=t.factory()),"object"==typeof t.value&&t.value&&function r3(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function U_(i){const e=Kh(i),t=null!==e?e.factory:la(i);if(null!==t)return t;if(i instanceof ue)throw new ce(204,!1);if(i instanceof Function)return function e3(i){const e=i.length;if(e>0)throw Pu(e,"?"),new ce(204,!1);const t=function ZF(i){const e=i&&(i[Qh]||i[Fx]);if(e){const t=function KF(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new ce(204,!1)}function tC(i,e,t){let n;if(ua(i)){const r=Ze(i);return la(r)||U_(r)}if(V_(i))n=()=>Ze(i.useValue);else if(function JM(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...I_(i.deps||[]));else if(function QM(i){return!(!i||!i.useExisting)}(i))n=()=>$(Ze(i.useExisting));else{const r=Ze(i&&(i.useClass||i.provide));if(!function n3(i){return!!i.deps}(i))return la(r)||U_(r);n=()=>new r(...I_(i.deps))}return n}function Bl(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function o3(i){return!!i.\u0275providers}function G_(i,e){for(const t of i)Array.isArray(t)?G_(t,e):o3(t)?G_(t.\u0275providers,e):e(t)}class nC{}class c3{resolveComponentFactory(e){throw function l3(i){const e=Error(`No component factory found for ${Jt(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let Vl=(()=>{class i{}return i.NULL=new c3,i})();function u3(){return Hl($n(),ne())}function Hl(i,e){return new mt(_r(i,e))}let mt=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=u3,i})();function d3(i){return i instanceof mt?i.nativeElement:i}class zu{}let da=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function h3(){const i=ne(),t=Xi($n().index,i);return(Ni(t)?t:i)[11]}(),i})(),p3=(()=>{class i{}return i.\u0275prov=Se({token:i,providedIn:"root",factory:()=>null}),i})();class zl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const f3=new zl("14.2.8"),j_={};function X_(i){return i.ngOriginalError}class Fs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&X_(e);for(;t&&X_(t);)t=X_(t);return t||null}}const Z_=new Map;let E3=0;const Q_="__ngContext__";function mi(i,e){Ni(e)?(i[Q_]=e[20],function T3(i){Z_.set(i[20],i)}(e)):i[Q_]=e}var Bi=(()=>((Bi=Bi||{})[Bi.Important=1]="Important",Bi[Bi.DashCase=2]="DashCase",Bi))();function ey(i,e){return undefined(i,e)}function Gu(i){const e=i[3];return Lr(e)?e[3]:e}function ty(i){return _C(i[13])}function ny(i){return _C(i[4])}function _C(i){for(;null!==i&&!Lr(i);)i=i[4];return i}function Gl(i,e,t,n,r){if(null!=n){let s,o=!1;Lr(n)?s=n:Ni(n)&&(o=!0,n=n[0]);const a=Rn(n);0===i&&null!==t?null==r?MC(e,t,a):ha(e,t,a,r||null,!0):1===i&&null!==t?ha(e,t,a,r||null,!0):2===i?function IC(i,e,t){const n=Dp(i,e);n&&function tN(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function rN(i,e,t,n,r){const s=t[7];s!==Rn(t)&&Gl(e,i,n,s,r);for(let a=10;a<t.length;a++){const l=t[a];ju(l[1],l,i,e,n,s)}}(e,i,s,t,r)}}function ry(i,e,t){return i.createElement(e,t)}function vC(i,e){const t=i[9],n=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,u_(r,-1)),t.splice(n,1)}function sy(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const r=n[17];null!==r&&r!==i&&vC(r,n),e>0&&(i[t-1][4]=n[4]);const s=gp(i,10+e);!function q3(i,e){ju(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function bC(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&ju(i,e,t,3,null,null),function Z3(i){let e=i[13];if(!e)return oy(i[1],i);for(;e;){let t=null;if(Ni(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)Ni(e)&&oy(e[1],e),e=e[3];null===e&&(e=i),Ni(e)&&oy(e[1],e),t=e&&e[4]}e=t}}(e)}}function oy(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function eN(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof Du)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,e),function J3(i,e){const t=i.cleanup,n=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Rn(e[o]),l=n[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Lr(e[3])){t!==e[3]&&vC(t,e);const n=e[19];null!==n&&n.detachView(i)}!function A3(i){Z_.delete(i[20])}(e)}}function wC(i,e,t){return function xC(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Pr.None||r===Pr.Emulated)return null}return _r(n,t)}(i,e.parent,t)}function ha(i,e,t,n,r){i.insertBefore(e,t,n,r)}function MC(i,e,t){i.appendChild(e,t)}function CC(i,e,t,n,r){null!==n?ha(i,e,t,n,r):MC(i,e,t)}function Dp(i,e){return i.parentNode(e)}function SC(i,e,t){return DC(i,e,t)}let DC=function EC(i,e,t){return 40&i.type?_r(i,t):null};function Tp(i,e,t,n){const r=wC(i,n,e),s=e[11],a=SC(n.parent||e[6],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)CC(s,r,t[l],a,!1);else CC(s,r,t,a,!1)}function Ap(i,e){if(null!==e){const t=e.type;if(3&t)return _r(e,i);if(4&t)return ly(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return Ap(i,n);{const r=i[e.index];return Lr(r)?ly(-1,r):Rn(r)}}if(32&t)return ey(e,i)()||Rn(i[e.index]);{const n=AC(i,e);return null!==n?Array.isArray(n)?n[0]:Ap(Gu(i[16]),n):Ap(i,e.next)}}return null}function AC(i,e){return null!==e?i[16][6].projection[e.projection]:null}function ly(i,e){const t=10+i+1;if(t<e.length){const n=e[t],r=n[1].firstChild;if(null!==r)return Ap(n,r)}return e[7]}function cy(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&mi(Rn(a),n),t.flags|=4),64!=(64&t.flags))if(8&l)cy(i,e,t.child,n,r,s,!1),Gl(e,i,r,a,s);else if(32&l){const c=ey(t,n);let u;for(;u=c();)Gl(e,i,r,u,s);Gl(e,i,r,a,s)}else 16&l?kC(i,e,n,t,r,s):Gl(e,i,r,a,s);t=o?t.projectionNext:t.next}}function ju(i,e,t,n,r,s){cy(t,n,i.firstChild,e,r,s,!1)}function kC(i,e,t,n,r,s){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Gl(e,i,r,l[c],s);else cy(i,e,l,o[3],r,s,!0)}function RC(i,e,t){i.setAttribute(e,"style",t)}function uy(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function PC(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const FC="ng-template";function oN(i,e,t){let n=0;for(;n<i.length;){let r=i[n++];if(t&&"class"===r){if(r=i[n],-1!==PC(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function LC(i){return 4===i.type&&i.value!==FC}function aN(i,e,t){return e===(4!==i.type||t?i.value:FC)}function lN(i,e,t){let n=4;const r=i.attrs||[],s=function dN(i){for(let e=0;e<i.length;e++)if(oM(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!aN(i,l,t)||""===l&&1===e.length){if(Nr(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!oN(i.attrs,c,t)){if(Nr(n))return!1;o=!0}continue}const d=cN(8&n?"class":l,r,LC(i),t);if(-1===d){if(Nr(n))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const p=8&n?h:null;if(p&&-1!==PC(p,c,0)||2&n&&c!==h){if(Nr(n))return!1;o=!0}}}}else{if(!o&&!Nr(n)&&!Nr(l))return!1;if(o&&Nr(l))continue;o=!1,n=l|1&n}}return Nr(n)||o}function Nr(i){return 0==(1&i)}function cN(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function hN(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function OC(i,e,t=!1){for(let n=0;n<e.length;n++)if(lN(i,e[n],t))return!0;return!1}function pN(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function NC(i,e){return i?":not("+e.trim()+")":e}function fN(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Nr(o)&&(e+=NC(s,r),r=""),n=o,s=s||!Nr(n);t++}return""!==r&&(e+=NC(s,r)),e}const rt={};function O(i){BC(Ft(),ne(),Di()+i,!1)}function BC(i,e,t,n){if(!n)if(3==(3&e[2])){const s=i.preOrderCheckHooks;null!==s&&lp(e,s,t)}else{const s=i.preOrderHooks;null!==s&&cp(e,s,0,t)}mo(t)}function UC(i,e=null,t=null,n){const r=GC(i,e,t,n);return r.resolveInjectorInitializers(),r}function GC(i,e=null,t=null,n,r=new Set){const s=[t||zt,ZO(i)];return n=n||("object"==typeof i?void 0:Jt(i)),new eC(s,e||Ep(),n||null,r)}let gi=(()=>{class i{static create(t,n){if(Array.isArray(t))return UC({name:""},n,t,"");{var r;const s=null!==(r=t.name)&&void 0!==r?r:"";return UC({name:s},t.parent,t.providers,s)}}}return i.THROW_IF_NOT_FOUND=Fu,i.NULL=new XM,i.\u0275prov=Se({token:i,providedIn:"any",factory:()=>$(qM)}),i.__NG_ELEMENT_ID__=-1,i})();function C(i,e=Ke.Default){const t=ne();return null===t?$(i,e):fM($n(),t,Ze(i),e)}function Wl(){throw new Error("invalid")}function kp(i,e){return i<<17|e<<2}function Br(i){return i>>17&32767}function my(i){return 2|i}function Os(i){return(131068&i)>>2}function gy(i,e){return-131069&i|e<<2}function _y(i){return 1|i}function oS(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const r=t[n],s=t[n+1];if(-1!==s){const o=i.data[s];m_(r),o.contentQueries(2,e[s],s)}}}function Fp(i,e,t,n,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=r,d[2]=76|n,(null!==u||i&&1024&i[2])&&(d[2]|=1024),Wx(d),d[3]=d[15]=i,d[8]=t,d[10]=o||i&&i[10],d[11]=a||i&&i[11],d[12]=l||i&&i[12]||null,d[9]=c||i&&i[9]||null,d[6]=s,d[20]=function D3(){return E3++}(),d[21]=u,d[16]=2==e.type?i[16]:d,d}function $l(i,e,t,n,r){let s=i.data[e];if(null===s)s=function Sy(i,e,t,n,r){const s=Yx(),o=d_(),l=i.data[e]=function ZN(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,e,t,n,r),function EL(){return et.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function Eu(){const i=et.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Kr(s,!0),s}function ql(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function Ey(i,e,t){g_(e);try{const n=i.viewQuery;null!==n&&Fy(1,n,t);const r=i.template;null!==r&&aS(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&oS(i,e),i.staticViewQueries&&Fy(2,i.viewQuery,t);const s=i.components;null!==s&&function qN(i,e){for(let t=0;t<e.length;t++)hB(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,__()}}function Lp(i,e,t,n){const r=e[2];if(128!=(128&r)){g_(e);try{Wx(e),function Zx(i){return et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&aS(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&lp(e,c,null)}else{const c=i.preOrderHooks;null!==c&&cp(e,c,0,null),v_(e,0)}if(function uB(i){for(let e=ty(i);null!==e;e=ny(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const r=t[n],s=r[3];0==(512&r[2])&&u_(s,1),r[2]|=512}}}(e),function cB(i){for(let e=ty(i);null!==e;e=ny(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];op(n)&&Lp(r,n,r.template,n[8])}}(e),null!==i.contentQueries&&oS(i,e),o){const c=i.contentCheckHooks;null!==c&&lp(e,c)}else{const c=i.contentHooks;null!==c&&cp(e,c,1),v_(e,1)}!function WN(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)mo(~r);else{const s=r,o=t[++n],a=t[++n];DL(o,s),a(2,e[s])}}}finally{mo(-1)}}(i,e);const a=i.components;null!==a&&function $N(i,e){for(let t=0;t<e.length;t++)dB(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&Fy(2,l,n),o){const c=i.viewCheckHooks;null!==c&&lp(e,c)}else{const c=i.viewHooks;null!==c&&cp(e,c,2),v_(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,u_(e[3],-1))}finally{__()}}}function aS(i,e,t,n,r){const s=Di(),o=2&n;try{mo(-1),o&&e.length>22&&BC(i,e,22,!1),t(n,r)}finally{mo(s)}}function lS(i,e,t){if(r_(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Dy(i,e,t){!qx()||(function tB(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;i.firstCreatePass||Au(t,e),mi(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=Or(l);c&&oB(e,t,l);const u=Iu(e,i,a,t);mi(u,e),null!==o&&aB(0,a-r,u,l,0,o),c&&(Xi(t.index,e)[8]=u)}}(i,e,t,_r(t,e)),128==(128&t.flags)&&function nB(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function TL(){return et.lFrame.currentDirectiveIndex}();try{mo(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];p_(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&mS(l,c)}}finally{mo(-1),p_(o)}}(i,e,t))}function Ty(i,e,t=_r){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function cS(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=Ay(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function Ay(i,e,t,n,r,s,o,a,l,c){const u=22+n,d=u+r,h=function YN(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:rt);return t}(u,d),p="function"==typeof c?c():c;return h[1]={type:i,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function uS(i,e,t,n){const r=bS(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&wS(i).push(n,r.length-1))}function dS(i,e,t){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}return t}function hS(i,e){const n=e.directiveEnd,r=i.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<n;c++){const u=r[c],d=u.inputs,h=null===s||LC(e)?null:lB(d,s);o.push(h),a=dS(d,c,a),l=dS(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function Ji(i,e,t,n,r,s,o,a){const l=_r(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[n])?(Ly(i,t,u,n,r),ip(e)&&pS(t,e.index)):3&e.type&&(n=function KN(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function pS(i,e){const t=Xi(e,i);16&t[2]||(t[2]|=32)}function Iy(i,e,t,n){let r=!1;if(qx()){const s=function iB(i,e,t){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];OC(t,o.selectors,!1)&&(r||(r=[]),fp(Au(t,e),i,o.type),Or(o)?(gS(i,t),r.unshift(o)):r.push(o))}return r}(i,e,t),o=null===n?null:{"":-1};if(null!==s){r=!0,_S(t,i.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=ql(i,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=dp(t.mergedAttrs,d.hostAttrs),yS(i,t,e,c,d),sB(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),l=!0),c++}hS(i,t)}o&&function rB(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ce(-301,!1);n.push(e[r],s)}}}(t,n,o)}return t.mergedAttrs=dp(t.mergedAttrs,t.attrs),r}function fS(i,e,t,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function eB(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function mS(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function gS(i,e){e.flags|=2,(i.components||(i.components=[])).push(e.index)}function sB(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;Or(e)&&(t[""]=i)}}function _S(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function yS(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=la(r.type)),o=new Du(s,Or(r),C);i.blueprint[n]=o,t[n]=o,fS(i,e,0,n,ql(i,t,r.hostVars,rt),r)}function oB(i,e,t){const n=_r(e,i),r=cS(t),s=i[10],o=Op(i,Fp(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}function ts(i,e,t,n,r,s){const o=_r(i,e);!function ky(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?nt(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[11],o,s,i.value,t,n,r)}function aB(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?n.setInput(t,d,c,u):t[u]=d}}}function lB(i,e){let t=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,i[r],e[n+1])),n+=2}else n+=2;else n+=4}return t}function vS(i,e,t,n){return new Array(i,!0,!1,e,null,0,n,t,null,null)}function dB(i,e){const t=Xi(e,i);if(op(t)){const n=t[1];48&t[2]?Lp(n,t,n.template,t[8]):t[5]>0&&Ry(t)}}function Ry(i){for(let n=ty(i);null!==n;n=ny(n))for(let r=10;r<n.length;r++){const s=n[r];if(op(s))if(512&s[2]){const o=s[1];Lp(o,s,o.template,s[8])}else s[5]>0&&Ry(s)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Xi(t[n],i);op(r)&&r[5]>0&&Ry(r)}}function hB(i,e){const t=Xi(e,i),n=t[1];(function pB(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),Ey(n,t,t[8])}function Op(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function Py(i){for(;i;){i[2]|=32;const e=Gu(i);if(oL(i)&&!e)return i;i=e}return null}function Np(i,e,t,n=!0){const r=e[10];r.begin&&r.begin();try{Lp(i,e,i.template,t)}catch(o){throw n&&MS(e,o),o}finally{r.end&&r.end()}}function Fy(i,e,t){m_(0),e(i,t)}function bS(i){return i[7]||(i[7]=[])}function wS(i){return i.cleanup||(i.cleanup=[])}function xS(i,e,t){return(null===i||Or(i))&&(t=function gL(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(t[e.index])),t[11]}function MS(i,e){const t=i[9],n=t?t.get(Fs,null):null;n&&n.handleError(e)}function Ly(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function Bp(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Zg(r,a):2==s&&(n=Zg(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function Vp(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(Rn(s)),Lr(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Vp(l[1],l,c,n)}const o=t.type;if(8&o)Vp(i,e,t.child,n);else if(32&o){const a=ey(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=AC(e,t);if(Array.isArray(a))n.push(...a);else{const l=Gu(e[16]);Vp(l[1],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class Wu{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Vp(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Lr(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(sy(e,n),gp(t,n))}this._attachedToViewContainer=!1}bC(this._lView[1],this._lView)}onDestroy(e){uS(this._lView[1],this._lView,null,e)}markForCheck(){Py(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Np(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function X3(i,e){ju(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e}}class fB extends Wu{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Np(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Oy extends Vl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Yt(e);return new $u(t,this.ngModule)}}function CS(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class gB{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const r=this.injector.get(e,j_,n);return r!==j_||t===j_?r:this.parentInjector.get(e,t,n)}}class $u extends nC{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function mN(i){return i.map(fN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return CS(this.componentDef.inputs)}get outputs(){return CS(this.componentDef.outputs)}create(e,t,n,r){var s;let o=(r=r||this.ngModule)instanceof Nl?r:null===(s=r)||void 0===s?void 0:s.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new gB(e,o):e,l=a.get(zu,null);if(null===l)throw new ce(407,!1);const c=a.get(p3,null),u=l.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",h=n?function XN(i,e,t){return i.selectRootElement(e,t===Pr.ShadowDom)}(u,n,this.componentDef.encapsulation):ry(l.createRenderer(null,this.componentDef),d,function mB(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),p=this.componentDef.onPush?288:272,f=Ay(0,null,null,1,0,null,null,null,null,null),m=Fp(null,f,null,p,null,null,l,u,c,a,null);let y,g;g_(m);try{const _=function vB(i,e,t,n,r,s){const o=t[1];t[22]=i;const l=$l(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Bp(l,c,!0),null!==i&&(up(r,i,c),null!==l.classes&&uy(r,i,l.classes),null!==l.styles&&RC(r,i,l.styles)));const u=n.createRenderer(i,e),d=Fp(t,cS(e),null,e.onPush?32:16,t[22],l,n,u,s||null,null,null);return o.firstCreatePass&&(fp(Au(l,t),o,e.type),gS(o,l),_S(l,t.length,1)),Op(t,d),t[22]=d}(h,this.componentDef,m,l,u);if(h)if(n)up(u,h,["ng-version",f3.full]);else{const{attrs:v,classes:b}=function gN(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!Nr(r))break;r=s}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&up(u,h,v),b&&b.length>0&&uy(u,h,b.join(" "))}if(g=c_(f,22),void 0!==t){const v=g.projection=[];for(let b=0;b<this.ngContentSelectors.length;b++){const x=t[b];v.push(null!=x?Array.from(x):null)}}y=function bB(i,e,t,n){const r=t[1],s=function JN(i,e,t){const n=$n();i.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),yS(i,n,e,ql(i,e,1,null),t),hS(i,n));const r=Iu(e,i,n.directiveStart,n);mi(r,e);const s=_r(n,e);return s&&mi(s,e),r}(r,t,e);if(i[8]=t[8]=s,null!==n)for(const a of n)a(s,e);if(e.contentQueries){const a=$n();e.contentQueries(1,s,a.directiveStart)}const o=$n();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(mo(o.index),fS(t[1],o,0,o.directiveStart,o.directiveEnd,e),mS(e,s)),s}(_,this.componentDef,m,[wB]),Ey(f,m,null)}finally{__()}return new yB(this.componentType,y,Hl(g,m),m,g)}}class yB extends class a3{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new fB(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;Ly(s[1],s,r,e,t),pS(s,this._tNode.index)}}get injector(){return new Dl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function wB(){const i=$n();ap(ne()[1],i)}function We(i){let e=function SS(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(Or(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=Ny(i.inputs),o.declaredInputs=Ny(i.declaredInputs),o.outputs=Ny(i.outputs);const a=r.hostBindings;a&&SB(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&MB(i,l),c&&CB(i,c),Xg(i.inputs,r.inputs),Xg(i.declaredInputs,r.declaredInputs),Xg(i.outputs,r.outputs),Or(r)&&r.data.animation){const u=i.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===We&&(t=!1)}}e=Object.getPrototypeOf(e)}!function xB(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=dp(r.hostAttrs,t=dp(t,r.hostAttrs))}}(n)}function Ny(i){return i===vl?{}:i===zt?[]:i}function MB(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function CB(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function SB(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}let Hp=null;function pa(){if(!Hp){const i=tn.Symbol;if(i&&i.iterator)Hp=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Hp=n)}}}return Hp}function qu(i){return!!By(i)&&(Array.isArray(i)||!(i instanceof Map)&&pa()in i)}function By(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ns(i,e,t){return i[e]=t}function _i(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function st(i,e,t,n){const r=ne();return _i(r,Cl(),e)&&(Ft(),ts(vn(),r,i,e,t,n)),st}function Xl(i,e,t,n){return _i(i,Cl(),t)?e+nt(t)+n:rt}function be(i,e,t,n,r,s,o,a){const l=ne(),c=Ft(),u=i+22,d=c.firstCreatePass?function PB(i,e,t,n,r,s,o,a,l){const c=e.consts,u=$l(e,i,4,o||null,fo(c,a));Iy(e,t,u,fo(c,l)),ap(e,u);const d=u.tViews=Ay(2,u,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,n,r,s,o):c.data[u];Kr(d,!1);const h=l[11].createComment("");Tp(c,l,h,d),mi(h,l),Op(l,l[u]=vS(h,l,h,d)),rp(d)&&Dy(c,l,d),null!=o&&Ty(l,d,a)}function is(i){return Ml(function SL(){return et.lFrame.contextLView}(),22+i)}function G(i,e,t){const n=ne();return _i(n,Cl(),e)&&Ji(Ft(),vn(),n,i,e,n[11],t,!1),G}function Vy(i,e,t,n,r){const o=r?"class":"style";Ly(i,t,e.inputs[o],o,n)}function T(i,e,t,n){const r=ne(),s=Ft(),o=22+i,a=r[11],l=r[o]=ry(a,e,function FL(){return et.lFrame.currentNamespace}()),c=s.firstCreatePass?function LB(i,e,t,n,r,s,o){const a=e.consts,c=$l(e,i,2,r,fo(a,s));return Iy(e,t,c,fo(a,o)),null!==c.attrs&&Bp(c,c.attrs,!1),null!==c.mergedAttrs&&Bp(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,n):s.data[o];Kr(c,!0);const u=c.mergedAttrs;null!==u&&up(a,l,u);const d=c.classes;null!==d&&uy(a,l,d);const h=c.styles;return null!==h&&RC(a,l,h),64!=(64&c.flags)&&Tp(s,r,l,c),0===function bL(){return et.lFrame.elementDepthCount}()&&mi(l,r),function wL(){et.lFrame.elementDepthCount++}(),rp(c)&&(Dy(s,r,c),lS(s,c,r)),null!==n&&Ty(r,c),T}function A(){let i=$n();d_()?h_():(i=i.parent,Kr(i,!1));const e=i;!function xL(){et.lFrame.elementDepthCount--}();const t=Ft();return t.firstCreatePass&&(ap(t,i),r_(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function VL(i){return 0!=(16&i.flags)}(e)&&Vy(t,e,ne(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function HL(i){return 0!=(32&i.flags)}(e)&&Vy(t,e,ne(),e.stylesWithoutHost,!1),A}function ve(i,e,t,n){return T(i,e,t,n),A(),ve}function Xu(i,e,t){const n=ne(),r=Ft(),s=i+22,o=r.firstCreatePass?function OB(i,e,t,n,r){const s=e.consts,o=fo(s,n),a=$l(e,i,8,"ng-container",o);return null!==o&&Bp(a,o,!0),Iy(e,t,a,fo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,n,e,t):r.data[s];Kr(o,!0);const a=n[s]=n[11].createComment("");return Tp(r,n,a,o),mi(a,n),rp(o)&&(Dy(r,n,o),lS(r,o,n)),null!=t&&Ty(n,o),Xu}function Zu(){let i=$n();const e=Ft();return d_()?h_():(i=i.parent,Kr(i,!1)),e.firstCreatePass&&(ap(e,i),r_(i)&&e.queries.elementEnd(i)),Zu}function ti(){return ne()}function Up(i){return!!i&&"function"==typeof i.then}function OS(i){return!!i&&"function"==typeof i.subscribe}const NS=OS;function we(i,e,t,n){const r=ne(),s=Ft(),o=$n();return BS(s,r,r[11],o,i,e,0,n),we}function Ku(i,e){const t=$n(),n=ne(),r=Ft();return BS(r,n,xS(f_(r.data),t,n),t,i,e),Ku}function BS(i,e,t,n,r,s,o,a){const l=rp(n),u=i.firstCreatePass&&wS(i),d=e[8],h=bS(e);let p=!0;if(3&n.type||a){const y=_r(n,e),g=a?a(y):y,_=h.length,v=a?x=>a(Rn(x[n.index])):n.index;let b=null;if(!a&&l&&(b=function NB(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,p=!1;else{s=HS(n,e,d,s,!1);const x=t.listen(g,r,s);h.push(s,x),u&&u.push(r,v,_,_+1)}}else s=HS(n,e,d,s,!1);const f=n.outputs;let m;if(p&&null!==f&&(m=f[r])){const y=m.length;if(y)for(let g=0;g<y;g+=2){const S=e[m[g]][m[g+1]].subscribe(s),w=h.length;h.push(s,S),u&&u.push(r,n.index,w,-(w+1))}}}function VS(i,e,t,n){try{return!1!==t(n)}catch(r){return MS(i,r),!1}}function HS(i,e,t,n,r){return function s(o){if(o===Function)return n;Py(2&i.flags?Xi(i.index,e):e);let l=VS(e,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=VS(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function de(i=1){return function IL(i){return(et.lFrame.contextLView=function kL(i,e){for(;i>0;)e=e[15],i--;return e}(i,et.lFrame.contextLView))[8]}(i)}function BB(i,e){let t=null;const n=function uN(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?OC(i,s,!0):pN(n,s))return r}else t=r}return t}function er(i){const e=ne()[16][6];if(!e.projection){const n=e.projection=Pu(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const o=i?BB(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function bn(i,e=0,t){const n=ne(),r=Ft(),s=$l(r,22+i,16,null,t||null);null===s.projection&&(s.projection=e),h_(),64!=(64&s.flags)&&function iN(i,e,t){kC(e[11],0,e,t,wC(i,t,e),SC(t.parent||e[6],t,e))}(r,n,s)}function ZS(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?Br(s):Os(s),l=!1;for(;0!==a&&(!1===l||o);){const u=i[a+1];zB(i[a],e)&&(l=!0,i[a+1]=n?_y(u):my(u)),a=n?Br(u):Os(u)}l&&(i[t+1]=n?my(s):_y(s))}function zB(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&Rl(i,e)>=0}const Yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KS(i){return i.substring(Yn.key,Yn.keyEnd)}function QS(i,e){const t=Yn.textEnd;return t===e?-1:(e=Yn.keyEnd=function WB(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}(i,Yn.key=e,t),ic(i,e,t))}function ic(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function ma(i,e,t){return Vr(i,e,t,!1),ma}function Vt(i,e){return Vr(i,e,null,!0),Vt}function ss(i,e){for(let t=function GB(i){return function eE(i){Yn.key=0,Yn.keyEnd=0,Yn.value=0,Yn.valueEnd=0,Yn.textEnd=i.length}(i),QS(i,ic(i,0,Yn.textEnd))}(e);t>=0;t=QS(e,t))Ki(i,KS(e),!0)}function Vr(i,e,t,n){const r=ne(),s=Ft(),o=As(2);s.firstUpdatePass&&rE(s,i,o,n),e!==rt&&_i(r,o,e)&&oE(s,s.data[Di()],r,r[11],i,r[o+1]=function nV(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=Jt(Qi(i)))),i}(e,t),n,o)}function iE(i,e){return e>=i.expandoStartIndex}function rE(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[Di()],o=iE(i,t);lE(s,n)&&null===e&&!o&&(e=!1),e=function ZB(i,e,t,n){const r=f_(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=Qu(t=zy(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=zy(r,i,e,t,n),null===s){let l=function KB(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==Os(n))return i[Br(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=zy(null,i,e,l[1],n),l=Qu(l,e.attrs,n),function QB(i,e,t,n){i[Br(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function JB(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=Qu(n,i[s].hostAttrs,t);return Qu(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function VB(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=Br(o),l=Os(o);i[n]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Rl(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Br(i[a+1]);i[n+1]=kp(h,a),0!==h&&(i[h+1]=gy(i[h+1],n)),i[a+1]=function LN(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=kp(a,0),0!==a&&(i[a+1]=gy(i[a+1],n)),a=n;else i[n+1]=kp(l,0),0===a?a=n:i[l+1]=gy(i[l+1],n),l=n;c&&(i[n+1]=my(i[n+1])),ZS(i,u,n,!0),ZS(i,u,n,!1),function HB(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&Rl(s,e)>=0&&(t[n+1]=_y(t[n+1]))}(e,u,i,n,s),o=kp(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}function zy(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=Qu(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function Qu(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ki(i,o,!!t||e[++s]))}return void 0===i?null:i}function oE(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1];Gp(function QC(i){return 1==(1&i)}(c)?aE(l,e,t,r,Os(c),o):void 0)||(Gp(s)||function KC(i){return 2==(2&i)}(c)&&(s=aE(l,null,t,r,a,o)),function sN(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:Bi.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Bi.Important),i.setStyle(t,n,r,s))}}(n,o,sp(Di(),t),r,s))}function aE(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===rt&&(h=d?zt:void 0);let p=d?D_(h,n):u===n?h:void 0;if(c&&!Gp(p)&&(p=D_(l,n)),Gp(p)&&(a=p,o))return a;const f=i[r+1];r=o?Br(f):Os(f)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=D_(l,n))}return a}function Gp(i){return void 0!==i}function lE(i,e){return 0!=(i.flags&(e?16:32))}function L(i,e=""){const t=ne(),n=Ft(),r=i+22,s=n.firstCreatePass?$l(n,r,1,e,null):n.data[r],o=t[r]=function iy(i,e){return i.createText(e)}(t[11],e);Tp(n,t,o,s),Kr(s,!1)}function en(i){return Nt("",i,""),en}function Nt(i,e,t){const n=ne(),r=Xl(n,i,e,t);return r!==rt&&function Ns(i,e,t){const n=sp(e,i);!function yC(i,e,t){i.setValue(e,t)}(i[11],n,t)}(n,Di(),r),Nt}function _E(i,e,t){!function Hr(i,e,t,n){const r=Ft(),s=As(2);r.firstUpdatePass&&rE(r,null,s,n);const o=ne();if(t!==rt&&_i(o,s,t)){const a=r.data[Di()];if(lE(a,n)&&!iE(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Zg(l,t||"")),Vy(r,a,o,t,n)}else!function tV(i,e,t,n,r,s,o,a){r===rt&&(r=zt);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let m,f=null;u===d?(l+=2,c+=2,h!==p&&(f=d,m=p)):null===d||null!==u&&u<d?(l+=2,f=u):(c+=2,f=d,m=p),null!==f&&oE(i,e,t,n,f,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function eV(i,e,t){if(null==t||""===t)return zt;const n=[],r=Qi(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&e(n,r);return n}(i,e,t),n,s)}}(Ki,ss,Xl(ne(),i,e,t),!0)}function Bs(i,e,t){const n=ne();return _i(n,Cl(),e)&&Ji(Ft(),vn(),n,i,e,n[11],t,!0),Bs}function Ju(i,e,t){const n=ne();if(_i(n,Cl(),e)){const s=Ft(),o=vn();Ji(s,o,n,i,e,xS(f_(s.data),o,n),t,!0)}return Ju}const ga=void 0;var wV=["en",[["a","p"],["AM","PM"],ga],[["AM","PM"],ga,ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ga,"{1} 'at' {0}",ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bV(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let rc={};function Ai(i){const e=function xV(i){return i.toLowerCase().replace(/_/g,"-")}(i);let t=TE(e);if(t)return t;const n=e.split("-")[0];if(t=TE(n),t)return t;if("en"===n)return wV;throw new ce(701,!1)}function TE(i){return i in rc||(rc[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),rc[i]}var Te=(()=>((Te=Te||{})[Te.LocaleId=0]="LocaleId",Te[Te.DayPeriodsFormat=1]="DayPeriodsFormat",Te[Te.DayPeriodsStandalone=2]="DayPeriodsStandalone",Te[Te.DaysFormat=3]="DaysFormat",Te[Te.DaysStandalone=4]="DaysStandalone",Te[Te.MonthsFormat=5]="MonthsFormat",Te[Te.MonthsStandalone=6]="MonthsStandalone",Te[Te.Eras=7]="Eras",Te[Te.FirstDayOfWeek=8]="FirstDayOfWeek",Te[Te.WeekendRange=9]="WeekendRange",Te[Te.DateFormat=10]="DateFormat",Te[Te.TimeFormat=11]="TimeFormat",Te[Te.DateTimeFormat=12]="DateTimeFormat",Te[Te.NumberSymbols=13]="NumberSymbols",Te[Te.NumberFormats=14]="NumberFormats",Te[Te.CurrencyCode=15]="CurrencyCode",Te[Te.CurrencySymbol=16]="CurrencySymbol",Te[Te.CurrencyName=17]="CurrencyName",Te[Te.Currencies=18]="Currencies",Te[Te.Directionality=19]="Directionality",Te[Te.PluralCase=20]="PluralCase",Te[Te.ExtraData=21]="ExtraData",Te))();const sc="en-US";let AE=sc;function jy(i,e,t,n,r){if(i=Ze(i),Array.isArray(i))for(let s=0;s<i.length;s++)jy(i[s],e,t,n,r);else{const s=Ft(),o=ne();let a=ua(i)?i:Ze(i.provide),l=tC(i);const c=$n(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ua(i)||!i.multi){const p=new Du(l,r,C),f=$y(a,e,r?u:u+h,d);-1===f?(fp(Au(c,o),s,a),Wy(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(p),o.push(p)):(t[f]=p,o[f]=p)}else{const p=$y(a,e,u+h,d),f=$y(a,e,u,u+h),m=p>=0&&t[p],y=f>=0&&t[f];if(r&&!y||!r&&!m){fp(Au(c,o),s,a);const g=function v4(i,e,t,n,r){const s=new Du(i,t,C);return s.multi=[],s.index=e,s.componentProviders=0,eD(s,r,n&&!t),s}(r?y4:_4,t.length,r,n,l);!r&&y&&(t[f].providerFactory=g),Wy(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)}else Wy(s,i,p>-1?p:f,eD(t[r?f:p],l,!r&&n));!r&&n&&y&&t[f].componentProviders++}}}function Wy(i,e,t,n){const r=ua(e),s=function QO(i){return!!i.useClass}(e);if(r||s){const l=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[n,l]):c[u+1].push(n,l)}else c.push(t,l)}}}function eD(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function $y(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function _4(i,e,t,n){return qy(this.multi,[])}function y4(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Iu(t,t[1],this.providerFactory.index,n);s=a.slice(0,o),qy(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],qy(r,s);return s}function qy(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function At(i,e=[]){return t=>{t.providersResolver=(n,r)=>function g4(i,e,t){const n=Ft();if(n.firstCreatePass){const r=Or(i);jy(t,n.data,n.blueprint,r,!0),jy(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class oc{}class tD extends oc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Oy(this);const n=function qi(i,e){const t=i[Ox]||null;if(!t&&!0===e)throw new Error(`Type ${Jt(i)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function Ls(i){return i instanceof Function?i():i}(n.bootstrap),this._r3Injector=GC(e,t,[{provide:oc,useValue:this},{provide:Vl,useValue:this.componentFactoryResolver}],Jt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Yy extends class b4{}{constructor(e){super(),this.moduleType=e}create(e){return new tD(this.moduleType,e)}}function sd(i,e){const t=i[e];return t===rt?void 0:t}function uD(i,e,t,n,r,s){const o=e+t;return _i(i,o,r)?ns(i,o+1,s?n.call(s,r):n(r)):sd(i,o+1)}function dD(i,e,t,n,r,s,o){const a=e+t;return function fa(i,e,t,n){const r=_i(i,e,t);return _i(i,e+1,n)||r}(i,a,r,s)?ns(i,a+2,o?n.call(o,r,s):n(r,s)):sd(i,a+2)}function Fn(i,e){const t=Ft();let n;const r=i+22;t.firstCreatePass?(n=function U4(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=la(n.type)),o=fr(C);try{const a=hp(!1),l=s();return hp(a),function FB(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,ne(),r,l),l}finally{fr(o)}}function od(i,e,t){const n=i+22,r=ne(),s=Ml(r,n);return ad(r,n)?uD(r,Ei(),e,s.transform,t,s):s.transform(t)}function yi(i,e,t,n){const r=i+22,s=ne(),o=Ml(s,r);return ad(s,r)?dD(s,Ei(),e,o.transform,t,n,o):o.transform(t,n)}function ad(i,e){return i[1].data[e].pure}function Zy(i){return e=>{setTimeout(i,void 0,e)}}const Pe=class $4 extends Je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){var a,l,c;const d=e;r=null===(a=d.next)||void 0===a?void 0:a.bind(d),s=null===(l=d.error)||void 0===l?void 0:l.bind(d),o=null===(c=d.complete)||void 0===c?void 0:c.bind(d)}this.__isAsync&&(s=Zy(s),r&&(r=Zy(r)),o&&(o=Zy(o)));const u=super.subscribe({next:r,error:s,complete:o});return e instanceof gt&&e.add(u),u}};function q4(){return this._results[pa()]()}class ld{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=pa(),n=ld.prototype;n[t]||(n[t]=q4)}get changes(){return this._changes||(this._changes=new Pe)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Zi(e);(this._changesDetected=!function ZL(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zr=(()=>{class i{}return i.__NG_ELEMENT_ID__=Z4,i})();const Y4=zr,X4=class extends Y4{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,r=Fp(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),Ey(n,r,e),new Wu(r)}};function Z4(){return Yp($n(),ne())}function Yp(i,e){return 4&i.type?new X4(e,i,Hl(i,e)):null}let Vi=(()=>{class i{}return i.__NG_ELEMENT_ID__=K4,i})();function K4(){return _D($n(),ne())}const Q4=Vi,mD=class extends Q4{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new Dl(this._hostTNode,this._hostLView)}get parentInjector(){const e=pp(this._hostTNode,this._hostLView);if(cM(e)){const t=El(e,this._hostLView),n=Sl(e);return new Dl(t[1].data[n+8],t)}return new Dl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=gD(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function Ru(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,n=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new $u(Yt(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Nl,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const n=e._lView,r=n[1];if(function vL(i){return Lr(i[3])}(n)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=n[3],h=new mD(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function K3(i,e,t,n){const r=10+n,s=t.length;n>0&&(t[r-1][4]=e),n<s-10?(e[4]=t[r],bM(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Q3(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(r,n,o,s);const a=ly(s,o),l=n[11],c=Dp(l,o[7]);return null!==c&&function Y3(i,e,t,n,r,s){n[0]=r,n[6]=e,ju(i,n,t,1,r,s)}(r,o[6],l,n,c,a),e.attachToViewContainerRef(),bM(Ky(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=gD(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=sy(this._lContainer,t);n&&(gp(Ky(this._lContainer),t),bC(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=sy(this._lContainer,t);return n&&null!=gp(Ky(this._lContainer),t)?new Wu(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function gD(i){return i[8]}function Ky(i){return i[8]||(i[8]=[])}function _D(i,e){let t;const n=e[i.index];if(Lr(n))t=n;else{let r;if(8&i.type)r=Rn(n);else{const s=e[11];r=s.createComment("");const o=_r(i,e);ha(s,Dp(s,o),r,function nN(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=vS(n,e,r,i),Op(e,t)}return new mD(t,i,e)}class Qy{constructor(e){this.queryList=e,this.matches=null}clone(){return new Qy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jy{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Jy(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==xD(e,t).matches&&this.queries[t].setDirty()}}class yD{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class ev{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new ev(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tv{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new tv(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,tH(t,s)),this.matchTNodeWithReadOption(e,t,mp(t,e,s,!1,!1))}else n===zr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,mp(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===mt||r===Vi||r===zr&&4&t.type)this.addMatch(t.index,-2);else{const s=mp(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function tH(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function iH(i,e,t,n){return-1===t?function nH(i,e){return 11&i.type?Hl(i,e):4&i.type?Yp(i,e):null}(e,i):-2===t?function rH(i,e,t){return t===mt?Hl(e,i):t===zr?Yp(e,i):t===Vi?_D(e,i):void 0}(i,e,n):Iu(i,i[1],t,e)}function vD(i,e,t,n){const r=e[19].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:iH(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function nv(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=vD(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&nv(h[1],h,c,n)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const p=d[h];nv(p[1],p,c,n)}}}}}return n}function ot(i){const e=ne(),t=Ft(),n=Qx();m_(n+1);const r=xD(t,n);if(i.dirty&&function yL(i){return 4==(4&i[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?nv(t,e,n,[]):vD(t,e,r,n);i.reset(s,d3),i.notifyOnChanges()}return!0}return!1}function rn(i,e,t){const n=Ft();n.firstCreatePass&&(wD(n,new yD(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),bD(n,ne(),e)}function Xn(i,e,t,n){const r=Ft();if(r.firstCreatePass){const s=$n();wD(r,new yD(e,t,n),s.index),function oH(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}bD(r,ne(),t)}function at(){return function sH(i,e){return i[19].queries[e].queryList}(ne(),Qx())}function bD(i,e,t){const n=new ld(4==(4&t));uS(i,e,n,n.destroy),null===e[19]&&(e[19]=new Jy),e[19].queries.push(new Qy(n))}function wD(i,e,t){null===i.queries&&(i.queries=new ev),i.queries.track(new tv(e,t))}function xD(i,e){return i.queries.getByIndex(e)}function Zp(...i){}const zD=new ue("Application Initializer");let Kp=(()=>{class i{constructor(t){this.appInits=t,this.resolve=Zp,this.reject=Zp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Up(s))t.push(s);else if(NS(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)($(zD,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cc=new ue("AppId",{providedIn:"root",factory:function UD(){return`${av()}${av()}${av()}`}});function av(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GD=new ue("Platform Initializer"),lv=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),DH=new ue("appBootstrapListener"),tr=new ue("AnimationModuleType"),os=new ue("LocaleId",{providedIn:"root",factory:()=>Rs(os,Ke.Optional|Ke.SkipSelf)||function TH(){return typeof $localize<"u"&&$localize.locale||sc}()}),PH=(()=>Promise.resolve(0))();function cv(i){typeof Zone>"u"?PH.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class tt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function FH(){let i=tn.requestAnimationFrame,e=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function NH(i){const e=()=>{!function OH(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,dv(i),i.isCheckStableRunning=!0,uv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),dv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return $D(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),qD(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return $D(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),qD(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,dv(i),uv(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tt.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(tt.isInAngularZone())throw new ce(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,LH,Zp,Zp);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const LH={};function uv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function dv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function $D(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function qD(i){i._nesting--,uv(i)}class BH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pe,this.onMicrotaskEmpty=new Pe,this.onStable=new Pe,this.onError=new Pe}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const YD=new ue(""),Qp=new ue("");let fv,hv=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fv||(function VH(i){fv=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tt.assertNotInAngularZone(),cv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cv(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)($(tt),$(pv),$(Qp))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),pv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){var r,s;return null!==(r=null===(s=fv)||void 0===s?void 0:s.findTestabilityInTree(this,t,n))&&void 0!==r?r:null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),bo=null;const XD=new ue("AllowMultipleToken"),mv=new ue("PlatformDestroyListeners");function KD(i,e,t=[]){const n=`Platform: ${e}`,r=new ue(n);return(s=[])=>{let o=gv();if(!o||o.injector.get(XD,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function UH(i){if(bo&&!bo.get(XD,!1))throw new ce(400,!1);bo=i;const e=i.get(JD);(function ZD(i){const e=i.get(GD,null);e&&e.forEach(t=>t())})(i)}(function QD(i=[],e){return gi.create({name:e,providers:[{provide:H_,useValue:"platform"},{provide:mv,useValue:new Set([()=>bo=null])},...i]})}(a,n))}return function jH(i){const e=gv();if(!e)throw new ce(401,!1);return e}()}}function gv(){var i,e;return null!==(i=null===(e=bo)||void 0===e?void 0:e.get(JD))&&void 0!==i?i:null}let JD=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function t1(i,e){let t;return t="noop"===i?new BH:("zone.js"===i?void 0:i)||new tt(e),t}(n?.ngZone,function e1(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:tt,useValue:r}];return r.run(()=>{const o=gi.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Fs,null);if(!l)throw new ce(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Jp(this._modules,a),c.unsubscribe()})}),function n1(i,e,t){try{const n=t();return Up(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(Kp);return c.runInitializers(),c.donePromise.then(()=>(function IE(i){$i(i,"Expected localeId to be defined"),"string"==typeof i&&(AE=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(os,sc)||sc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=r1({},n);return function HH(i,e,t){const n=new Yy(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(ud);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ce(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(mv,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)($(gi))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function r1(i,e){return Array.isArray(e)?e.reduce(r1,i):{...i,...e}}let ud=(()=>{class i{constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new cn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new cn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{tt.assertNotInAngularZone(),cv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{tt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=kr(s,o.pipe(kx()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const r=t instanceof nC;if(!this._injector.get(Kp).done)throw!r&&function wu(i){const e=Yt(i)||Ci(i)||Si(i);return null!==e&&e.standalone}(t),new ce(405,false);let o;o=r?t:this._injector.get(Vl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function zH(i){return i.isBoundToModule}(o)?void 0:this._injector.get(oc),c=o.create(gi.NULL,[],n||o.selector,a),u=c.location.nativeElement,d=c.injector.get(YD,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Jp(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;Jp(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(DH,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Jp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ce(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)($(tt),$(Nl),$(Fs))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Jp(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let o1=!0,xn=(()=>{class i{}return i.__NG_ELEMENT_ID__=qH,i})();function qH(i){return function YH(i,e,t){if(ip(i)&&!t){const n=Xi(i.index,e);return new Wu(n,n)}return 47&i.type?new Wu(e[16],e):null}($n(),ne(),16==(16&i))}class d1{constructor(){}supports(e){return qu(e)}create(e){return new e5(e)}}const JH=(i,e)=>e;class e5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JH}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<p1(n,r,s)?t:n,a=p1(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const p=h<s.length?s[h]:s[h]=0,f=p+h;u<=f&&f<c&&(s[h]=p+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!qu(e))throw new ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function IB(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[pa()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new t5(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new h1),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new h1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class t5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class n5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class h1{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new n5,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function p1(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class f1{constructor(){}supports(e){return e instanceof Map||By(e)}create(){return new r5}}class r5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||By(e)))throw new ce(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new s5(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class s5{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function m1(){return new nf([new d1])}let nf=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||m1()),deps:[[i,new _o,new Jr]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new ce(901,!1)}}return i.\u0275prov=Se({token:i,providedIn:"root",factory:m1}),i})();function g1(){return new dd([new f1])}let dd=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||g1()),deps:[[i,new _o,new Jr]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new ce(901,!1)}}return i.\u0275prov=Se({token:i,providedIn:"root",factory:g1}),i})();const l5=KD(null,"core",[]);let c5=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)($(ud))},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})();let rf=null;function as(){return rf}const lt=new ue("DocumentToken");let _1=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:function(){return function p5(){return $(y1)}()},providedIn:"platform"}),i})(),y1=(()=>{class i extends _1{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return as().getBaseHref(this._doc)}onPopState(t){const n=as().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=as().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,r){v1()?this._history.pushState(t,n,r):this.location.hash=r}replaceState(t,n,r){v1()?this._history.replaceState(t,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)($(lt))},i.\u0275prov=Se({token:i,factory:function(){return function f5(){return new y1($(lt))}()},providedIn:"platform"}),i})();function v1(){return!!window.history.pushState}function b1(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function w1(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function ya(i){return i&&"?"!==i[0]?"?"+i:i}let xv=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:function(){return Rs(g5)},providedIn:"root"}),i})();const m5=new ue("appBaseHref");let g5=(()=>{class i extends xv{constructor(t,n){var r,s,o;super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=null!==(r=null!==(s=n??this._platformLocation.getBaseHrefFromDOM())&&void 0!==s?s:null===(o=Rs(lt).location)||void 0===o?void 0:o.origin)&&void 0!==r?r:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return b1(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+ya(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+ya(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+ya(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var n,r;null===(n=(r=this._platformLocation).historyGo)||void 0===n||n.call(r,t)}}return i.\u0275fac=function(t){return new(t||i)($(_1),$(m5,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Mv=(()=>{class i{constructor(t){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=w1(x1(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){var t;null===(t=this._urlChangeSubscription)||void 0===t||t.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+ya(n))}normalize(t){return i.stripTrailingSlash(function y5(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,x1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ya(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ya(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){var n,r;null===(n=(r=this._locationStrategy).historyGo)||void 0===n||n.call(r,t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);var r;this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=ya,i.joinWithSlash=b1,i.stripTrailingSlash=w1,i.\u0275fac=function(t){return new(t||i)($(xv))},i.\u0275prov=Se({token:i,factory:function(){return function _5(){return new Mv($(xv))}()},providedIn:"root"}),i})();function x1(i){return i.replace(/\/index.html$/,"")}var Hi=(()=>((Hi=Hi||{})[Hi.Decimal=0]="Decimal",Hi[Hi.Percent=1]="Percent",Hi[Hi.Currency=2]="Currency",Hi[Hi.Scientific=3]="Scientific",Hi))(),qe=(()=>((qe=qe||{})[qe.Decimal=0]="Decimal",qe[qe.Group=1]="Group",qe[qe.List=2]="List",qe[qe.PercentSign=3]="PercentSign",qe[qe.PlusSign=4]="PlusSign",qe[qe.MinusSign=5]="MinusSign",qe[qe.Exponential=6]="Exponential",qe[qe.SuperscriptingExponent=7]="SuperscriptingExponent",qe[qe.PerMille=8]="PerMille",qe[qe.Infinity=9]="Infinity",qe[qe.NaN=10]="NaN",qe[qe.TimeSeparator=11]="TimeSeparator",qe[qe.CurrencyDecimal=12]="CurrencyDecimal",qe[qe.CurrencyGroup=13]="CurrencyGroup",qe))();function vr(i,e){const t=Ai(i),n=t[Te.NumberSymbols][e];if(typeof n>"u"){if(e===qe.CurrencyDecimal)return t[Te.NumberSymbols][qe.Decimal];if(e===qe.CurrencyGroup)return t[Te.NumberSymbols][qe.Group]}return n}const j5=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function kv(i){const e=parseInt(i);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+i);return e}let fd=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(qu(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Jt(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(C(nf),C(dd),C(mt),C(da))},i.\u0275dir=Ee({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class i8{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let md=(()=>{class i{constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new i8(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),P1(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{P1(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(C(Vi),C(zr),C(nf))},i.\u0275dir=Ee({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function P1(i,e){i.context.$implicit=e.item}let wr=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new s8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){F1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){F1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(C(Vi),C(zr))},i.\u0275dir=Ee({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class s8{constructor(){this.$implicit=null,this.ngIf=null}}function F1(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Jt(e)}'.`)}class Pv{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let uc=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ee({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),mf=(()=>{class i{constructor(t,n,r){this.ngSwitch=r,r._addCase(),this._view=new Pv(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(C(Vi),C(zr),C(uc,9))},i.\u0275dir=Ee({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),L1=(()=>{class i{constructor(t,n,r){r._addDefault(new Pv(t,n))}}return i.\u0275fac=function(t){return new(t||i)(C(Vi),C(zr),C(uc,9))},i.\u0275dir=Ee({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),N1=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Bi.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(dd),C(da))},i.\u0275dir=Ee({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})();function jr(i,e){return new ce(2100,!1)}class l8{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}}class c8{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}}const u8=new c8,d8=new l8;let B1=(()=>{class i{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if(Up(t))return u8;if(OS(t))return d8;throw jr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(C(xn,16))},i.\u0275pipe=hi({name:"async",type:i,pure:!1,standalone:!0}),i})(),V1=(()=>{class i{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=H1}transform(t,n=H1){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function x8(i,e){return{key:i,value:e}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(t){return new(t||i)(C(dd,16))},i.\u0275pipe=hi({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function H1(i,e){const t=i.key,n=e.key;if(t===n)return 0;if(void 0===t)return 1;if(void 0===n)return-1;if(null===t)return 1;if(null===n)return-1;if("string"==typeof t&&"string"==typeof n)return t<n?-1:1;if("number"==typeof t&&"number"==typeof n)return t-n;if("boolean"==typeof t&&"boolean"==typeof n)return t<n?-1:1;const r=String(t),s=String(n);return r==s?0:r<s?-1:1}let gf=(()=>{class i{constructor(t){this._locale=t}transform(t,n,r){if(!function Fv(i){return!(null==i||""===i||i!=i)}(t))return null;r=r||this._locale;try{return function Z5(i,e,t){return function Av(i,e,t,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function Q5(i){let n,r,s,o,a,e=Math.abs(i)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))n=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(e.charAt(s))}return r>22&&(n=n.splice(0,21),t=r-1,r=1),{digits:n,exponent:t,integerLen:r}}(i);o&&(c=function K5(i){if(0===i.digits[0])return i;const e=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===e?i.digits.push(0,0):1===e&&i.digits.push(0),i.integerLen+=2),i}(c));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){const _=s.match(j5);if(null===_)throw new Error(`${s} is not a valid digit info`);const v=_[1],b=_[3],x=_[5];null!=v&&(u=kv(v)),null!=b&&(d=kv(b)),null!=x?h=kv(x):null!=b&&d>h&&(h=d)}!function J5(i,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let d=o;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let d=1;d<o;d++)n[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=e+i.integerLen,u=n.reduceRight(function(d,h,p,f){return f[p]=(h+=d)<10?h:h-10,l&&(0===f[p]&&p>=c?f.pop():l=!1),h>=10?1:0},0);u&&(n.unshift(u),i.integerLen++)}(c,d,h);let p=c.digits,f=c.integerLen;const m=c.exponent;let y=[];for(l=p.every(_=>!_);f<u;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?y=p.splice(f,p.length):(y=p,p=[0]);const g=[];for(p.length>=e.lgSize&&g.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)g.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&g.unshift(p.join("")),a=g.join(vr(t,n)),y.length&&(a+=vr(t,r)+y.join("")),m&&(a+=vr(t,qe.Exponential)+"+"+m)}else a=vr(t,qe.Infinity);return a=i<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(i,function Iv(i,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(";"),r=n[0],s=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?t.minFrac=t.maxFrac=u+1:"#"===d?t.maxFrac=u+1:t.posSuf+=d}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const u=r.length-t.posPre.length-t.posSuf.length,d=s.indexOf("#");t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Cv(i,e){return Ai(i)[Te.NumberFormats][e]}(e,Hi.Decimal),vr(e,qe.MinusSign)),e,qe.Group,qe.Decimal,t)}(function Lv(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(t),r,n)}catch(s){throw jr()}}}return i.\u0275fac=function(t){return new(t||i)(C(os,16))},i.\u0275pipe=hi({name:"number",type:i,pure:!0,standalone:!0}),i})();let ls=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})();const z1="browser";class Bv extends class X8 extends class h5{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function d5(i){rf||(rf=i)}(new Bv)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Z8(){return _d=_d||document.querySelector("base"),_d?_d.getAttribute("href"):null}();return null==t?null:function K8(i){yf=yf||document.createElement("a"),yf.setAttribute("href",i);const e=yf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_d=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function t8(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let yf,_d=null;const $1=new ue("TRANSITION_ID"),J8=[{provide:zD,useFactory:function Q8(i,e,t){return()=>{t.get(Kp).donePromise.then(()=>{const n=as(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[$1,lt,gi],multi:!0}];let tz=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const vf=new ue("EventManagerPlugins");let bf=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)($(vf),$(tt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();class q1{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=as().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let Y1=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),yd=(()=>{class i extends Y1{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(X1),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(t,r,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(X1))}}return i.\u0275fac=function(t){return new(t||i)($(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();function X1(i){as().remove(i)}const Vv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hv=/%COMP%/g;function wf(i,e,t){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?wf(i,r,t):(r=r.replace(Hv,i),t.push(r))}return t}function Q1(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let xf=(()=>{class i{constructor(t,n,r){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new zv(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case Pr.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new az(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(t),r}case 1:case Pr.ShadowDom:return new lz(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const r=wf(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)($(bf),$(yd),$(cc))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();class zv{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Vv[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(eT(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(eT(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=Vv[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Vv[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(Bi.DashCase|Bi.Important)?e.style.setProperty(t,n,r&Bi.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Bi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Q1(n)):this.eventManager.addEventListener(e,t,Q1(n))}}function eT(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class az extends zv{constructor(e,t,n,r){super(e),this.component=n;const s=wf(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=function rz(i){return"_ngcontent-%COMP%".replace(Hv,i)}(r+"-"+n.id),this.hostAttr=function sz(i){return"_nghost-%COMP%".replace(Hv,i)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class lz extends zv{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=wf(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cz=(()=>{class i extends q1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)($(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const tT=["alt","control","meta","shift"],uz={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dz={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let hz=(()=>{class i extends q1{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>as().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),tT.forEach(c=>{const u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let r=uz[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),tT.forEach(o=>{o!==r&&(0,dz[o])(t)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)($(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const iT=[{provide:lv,useValue:z1},{provide:GD,useValue:function pz(){Bv.makeCurrent()},multi:!0},{provide:lt,useFactory:function mz(){return function wO(i){R_=i}(document),document},deps:[]}],gz=KD(l5,"browser",iT),rT=new ue(""),sT=[{provide:Qp,useClass:class ez{addToWindow(e){tn.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},tn.getAllAngularTestabilities=()=>e.getAllTestabilities(),tn.getAllAngularRootElements=()=>e.getAllRootElements(),tn.frameworkStabilizers||(tn.frameworkStabilizers=[]),tn.frameworkStabilizers.push(n=>{const r=tn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?as().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:YD,useClass:hv,deps:[tt,pv,Qp]},{provide:hv,useClass:hv,deps:[tt,pv,Qp]}],oT=[{provide:H_,useValue:"root"},{provide:Fs,useFactory:function fz(){return new Fs},deps:[]},{provide:vf,useClass:cz,multi:!0,deps:[lt,tt,lv]},{provide:vf,useClass:hz,multi:!0,deps:[lt]},{provide:xf,useClass:xf,deps:[bf,yd,cc]},{provide:zu,useExisting:xf},{provide:Y1,useExisting:yd},{provide:yd,useClass:yd,deps:[lt]},{provide:bf,useClass:bf,deps:[vf,tt]},{provide:class k8{},useClass:tz,deps:[]},[]];let aT=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:cc,useValue:t.appId},{provide:$1,useExisting:cc},J8]}}}return i.\u0275fac=function(t){return new(t||i)($(rT,12))},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[...oT,...sT],imports:[ls,c5]}),i})();typeof window<"u"&&window;let jv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:function(t){let n=null;return n=t?new(t||i):$(uT),n},providedIn:"root"}),i})(),uT=(()=>{class i extends jv{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case Ut.NONE:return n;case Ut.HTML:return es(n,"HTML")?Qi(n):GM(this._doc,String(n)).toString();case Ut.STYLE:return es(n,"Style")?Qi(n):n;case Ut.SCRIPT:if(es(n,"Script"))return Qi(n);throw new Error("unsafe value used in a script context");case Ut.URL:return es(n,"URL")?Qi(n):Mp(String(n));case Ut.RESOURCE_URL:if(es(n,"ResourceURL"))return Qi(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function IO(i){return new CO(i)}(t)}bypassSecurityTrustStyle(t){return function kO(i){return new SO(i)}(t)}bypassSecurityTrustScript(t){return function RO(i){return new EO(i)}(t)}bypassSecurityTrustUrl(t){return function PO(i){return new DO(i)}(t)}bypassSecurityTrustResourceUrl(t){return function FO(i){return new TO(i)}(t)}}return i.\u0275fac=function(t){return new(t||i)($(lt))},i.\u0275prov=Se({token:i,factory:function(t){let n=null;return n=t?new t:function Sz(i){return new uT(i.get(lt))}($(gi)),n},providedIn:"root"}),i})();class dT{}const zs="*";function Us(i,e){return{type:7,name:i,definitions:e,options:{}}}function ki(i,e=null){return{type:4,styles:e,timings:i}}function Mf(i,e=null){return{type:3,steps:i,options:e}}function hT(i,e=null){return{type:2,steps:i,options:e}}function $t(i){return{type:6,styles:i,offset:null}}function zi(i,e,t){return{type:0,name:i,styles:e,options:t}}function Wv(i){return{type:5,steps:i}}function bi(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function vd(i=null){return{type:9,options:i}}function bd(i,e,t=null){return{type:11,selector:i,animation:e,options:t}}function pT(i){Promise.resolve().then(i)}class wd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class fT{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?pT(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function mT(i){return new ce(3e3,!1)}function aU(){return typeof window<"u"&&typeof window.document<"u"}function qv(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function xo(i){switch(i.length){case 0:return new wd;case 1:return i[0];default:return new fT(i)}}function gT(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(u=>{const d=u.get("offset"),h=d==l,p=h&&c||new Map;u.forEach((f,m)=>{let y=m,g=f;if("offset"!==m)switch(y=e.normalizePropertyName(y,o),g){case"!":g=r.get(m);break;case zs:g=s.get(m);break;default:g=e.normalizeStyleValue(m,y,g,o)}p.set(y,g)}),h||a.push(p),c=p,l=d}),o.length)throw function Xz(i){return new ce(3502,!1)}();return a}function Yv(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&Xv(t,"start",i)));break;case"done":i.onDone(()=>n(t&&Xv(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&Xv(t,"destroy",i)))}}function Xv(i,e,t){const s=Zv(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function Zv(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function nr(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function _T(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let Kv=(i,e)=>!1,yT=(i,e,t)=>[],vT=null;function Qv(i){const e=i.parentNode||i.host;return e===vT?null:e}(qv()||typeof Element<"u")&&(aU()?(vT=(()=>document.documentElement)(),Kv=(i,e)=>{for(;e;){if(e===i)return!0;e=Qv(e)}return!1}):Kv=(i,e)=>i.contains(e),yT=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let va=null,bT=!1;const wT=Kv,xT=yT;let MT=(()=>{class i{validateStyleProperty(t){return function cU(i){va||(va=function uU(){return typeof document<"u"?document.body:null}()||{},bT=!!va.style&&"WebkitAppearance"in va.style);let e=!0;return va.style&&!function lU(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in va.style,!e&&bT&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in va.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return wT(t,n)}getParentElement(t){return Qv(t)}query(t,n,r){return xT(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new wd(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),Jv=(()=>{class i{}return i.NOOP=new MT,i})();const eb="ng-enter",Cf="ng-leave",Sf="ng-trigger",Ef=".ng-trigger",ST="ng-animating",tb=".ng-animating";function Gs(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:nb(parseFloat(e[1]),e[2])}function nb(i,e){return"s"===e?1e3*i:i}function Df(i,e,t){return i.hasOwnProperty("duration")?i:function pU(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(mT()),{duration:0,delay:0,easing:""};r=nb(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=nb(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Dz(){return new ce(3100,!1)}()),a=!0),s<0&&(e.push(function Tz(){return new ce(3101,!1)}()),a=!0),a&&e.splice(l,0,mT())}return{duration:r,delay:s,easing:o}}(i,e,t)}function xd(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function ET(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function Mo(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function TT(i,e,t){return t?e+":"+t+";":""}function AT(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=TT(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=TT(0,_U(t),i.style[t]));i.setAttribute("style",e)}function cs(i,e,t){i.style&&(e.forEach((n,r)=>{const s=rb(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),qv()&&AT(i))}function ba(i,e){i.style&&(e.forEach((t,n)=>{const r=rb(n);i.style[r]=""}),qv()&&AT(i))}function Md(i){return Array.isArray(i)?1==i.length?i[0]:hT(i):i}const ib=new RegExp("{{\\s*(.+?)\\s*}}","g");function IT(i){let e=[];if("string"==typeof i){let t;for(;t=ib.exec(i);)e.push(t[1]);ib.lastIndex=0}return e}function Cd(i,e,t){const n=i.toString(),r=n.replace(ib,(s,o)=>{let a=e[o];return null==a&&(t.push(function Iz(i){return new ce(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function Tf(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const gU=/-+([a-z0-9])/g;function rb(i){return i.replace(gU,(...e)=>e[1].toUpperCase())}function _U(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ir(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function kz(i){return new ce(3004,!1)}()}}function kT(i,e){return window.getComputedStyle(i)[e]}function MU(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function CU(i,e,t){if(":"==i[0]){const l=function SU(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function Wz(i){return new ce(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function jz(i){return new ce(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(RT(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(RT(o,r))}(n,t,e)):t.push(i),t}const Rf=new Set(["true","1"]),Pf=new Set(["false","0"]);function RT(i,e){const t=Rf.has(i)||Pf.has(i),n=Rf.has(e)||Pf.has(e);return(r,s)=>{let o="*"==i||i==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Rf.has(i):Pf.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?Rf.has(e):Pf.has(e)),o&&a}}const EU=new RegExp("s*:selfs*,?","g");function sb(i,e,t,n){return new DU(i).build(e,t,n)}class DU{constructor(e){this._driver=e}build(e,t,n){const r=new IU(t);return this._resetContextStyleTimingState(r),ir(this,Md(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Pz(){return new ce(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function Fz(){return new ce(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{IT(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(Tf(s.values()),t.errors.push(function Lz(i,e){return new ce(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=ir(this,Md(e.animation),t);return{type:1,matchers:MU(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:wa(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>ir(this,n,t)),options:wa(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=ir(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:wa(e.options)}}visitAnimate(e,t){const n=function RU(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return ob(Df(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ob(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=Df(t,e);return ob(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:$t({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=$t(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===zs?n.push(a):t.errors.push(new ce(3002,!1)):n.push(ET(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function Nz(i,e,t,n,r){return new ce(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function mU(i,e,t){const n=e.params||{},r=IT(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function Az(i){return new ce(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Bz(){return new ce(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(g=>{const _=this._makeStyleAst(g,t);let v=null!=_.offset?_.offset:function kU(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(_.styles),b=0;return null!=v&&(s++,b=_.offset=v),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),_});l&&t.errors.push(function Vz(){return new ce(3012,!1)}()),a&&t.errors.push(function Hz(){return new ce(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function zz(){return new ce(3202,!1)}()):0==s&&(h=1/(d-1));const p=d-1,f=t.currentTime,m=t.currentAnimateTimings,y=m.duration;return u.forEach((g,_)=>{const v=h>0?_==p?1:h*_:o[_],b=v*y;t.currentTime=f+m.delay+b,m.duration=b,this._validateStyleAst(g,t),g.offset=v,n.styles.push(g)}),n}visitReference(e,t){return{type:8,animation:ir(this,Md(e.animation),t),options:wa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:wa(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:wa(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function TU(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(EU,"")),i=i.replace(/@\*/g,Ef).replace(/@\w+/g,t=>Ef+"-"+t.slice(1)).replace(/:animating/g,tb),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,nr(t.collectedStyles,t.currentQuerySelector,new Map);const a=ir(this,Md(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:wa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Uz(){return new ce(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Df(e.timings,t.errors,!0);return{type:12,animation:ir(this,Md(e.animation),t),timings:n,options:null}}}class IU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function wa(i){return i?(i=xd(i)).params&&(i.params=function AU(i){return i?xd(i):null}(i.params)):i={},i}function ob(i,e,t){return{duration:i,delay:e,easing:t}}function ab(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Ff{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const LU=new RegExp(":enter","g"),NU=new RegExp(":leave","g");function lb(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new BU).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class BU{buildKeyframes(e,t,n,r,s,o,a,l,c,u=[]){c=c||new Ff;const d=new cb(e,t,c,r,s,u,[]);d.options=l;const h=l.delay?Gs(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),ir(this,n,d);const p=d.timelines.filter(f=>f.containsAnimation());if(p.length&&a.size){let f;for(let m=p.length-1;m>=0;m--){const y=p[m];if(y.element===t){f=y;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[ab(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const s of e){const o=s?.delay;if(o){var r;const a="number"==typeof o?o:Gs(Cd(o,null!==(r=s?.params)&&void 0!==r?r:{},t.errors));n.delayNextStep(a)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?Gs(n.duration):null,a=null!=n.delay?Gs(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ir(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Lf);const o=Gs(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ir(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Gs(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ir(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Df(t.params?Cd(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Gs(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Lf);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),ir(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;ir(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-d+(r.startTime-n.currentTimeline.startTime)}}const Lf={};class cb{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Lf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Of(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Gs(n.duration)),null!=n.delay&&(r.delay=Gs(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Cd(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new cb(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Lf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new VU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(LU,"."+this._enterClassName)).replace(NU,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function Gz(i){return new ce(3014,!1)}()),a}}class Of{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Of(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||zs),this._currentKeyframe.set(t,zs);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function HU(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,zs)}else Mo(r,t)}),t}(e,this._globalTimelineStyles);for(let[l,c]of o){const u=Cd(c,s,n);var a;this._pendingStyles.set(l,u),this._localTimelineStyles.has(l)||this._backFill.set(l,null!==(a=this._globalTimelineStyles.get(l))&&void 0!==a?a:zs),this._updateStyle(l,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Mo(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===zs&&t.add(d)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?Tf(e.values()):[],o=t.size?Tf(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return ab(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class VU extends Of{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=Mo(e[0]);l.set("offset",0),s.push(l);const c=Mo(e[0]);c.set("offset",LT(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Mo(e[d]);const p=h.get("offset");h.set("offset",LT((t+p*n)/o)),s.push(h)}n=o,t=0,r="",e=s}return ab(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function LT(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class ub{}const zU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class UU extends ub{normalizePropertyName(e,t){return rb(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(zU.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Rz(i,e){return new ce(3005,!1)}())}return o+s}}function OT(i,e,t,n,r,s,o,a,l,c,u,d,h){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const db={};class NT{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function GU(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,u){var d;const h=[],p=this.ast.options&&this.ast.options.params||db,m=this.buildStyles(n,a&&a.params||db,h),y=l&&l.params||db,g=this.buildStyles(r,y,h),_=new Set,v=new Map,b=new Map,x="void"===r,S={params:jU(y,p),delay:null===(d=this.ast.options)||void 0===d?void 0:d.delay},w=u?[]:lb(e,t,this.ast.animation,s,o,m,g,S,c,h);let I=0;if(w.forEach(B=>{I=Math.max(B.duration+B.delay,I)}),h.length)return OT(t,this._triggerName,n,r,x,m,g,[],[],v,b,I,h);w.forEach(B=>{const R=B.element,J=nr(v,R,new Set);B.preStyleProps.forEach(H=>J.add(H));const V=nr(b,R,new Set);B.postStyleProps.forEach(H=>V.add(H)),R!==t&&_.add(R)});const z=Tf(_.values());return OT(t,this._triggerName,n,r,x,m,g,w,z,v,b,I)}}function jU(i,e){const t=xd(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class WU{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=xd(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Cd(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(l,o)})}),n}}class qU{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new WU(r.style,r.options&&r.options.params||{},n))}),BT(this.states,"true","1"),BT(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new NT(e,r,this.states))}),this.fallbackTransition=function YU(i,e,t){return new NT(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function BT(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const XU=new Ff;class ZU{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],s=sb(this._driver,t,n,[]);if(n.length)throw function Zz(i){return new ce(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=gT(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=lb(this._driver,t,s,eb,Cf,new Map,new Map,n,XU,r),o.forEach(u=>{const d=nr(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function Kz(){return new ce(3300,!1)}()),o=[]),r.length)throw function Qz(i){return new ce(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,p)=>{u.set(p,this._driver.computeStyle(d,p,zs))})});const c=xo(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Jz(i){return new ce(3301,!1)}();return t}listen(e,t,n,r){const s=Zv(t,"","","");return Yv(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const VT="ng-animate-queued",hb="ng-animate-disabled",t6=[],HT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},n6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xr="__ng_removed";class pb{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function o6(i){return i??null}(n?e.value:e),n){const s=xd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const Sd="void",fb=new pb(Sd);class i6{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Mr(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function eU(i,e){return new ce(3302,!1)}();if(null==n||0==n.length)throw function tU(i){return new ce(3303,!1)}();if(!function a6(i){return"start"==i||"done"==i}(n))throw function nU(i,e){return new ce(3400,!1)}();const s=nr(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=nr(this._engine.statesByElement,e,new Map);return a.has(t)||(Mr(e,Sf),Mr(e,Sf+"-"+t),a.set(t,fb)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function iU(i){return new ce(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new mb(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Mr(e,Sf),Mr(e,Sf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new pb(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=fb),c.value!==Sd&&l.value===c.value){if(!function u6(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],y=s.matchStyles(l.value,l.params,m),g=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{ba(e,y),cs(e,g)})}return}const h=nr(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let p=s.matchTransition(l.value,c.value,e,c.params),f=!1;if(!p){if(!r)return;p=s.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:f}),f||(Mr(e,VT),o.onStart(()=>{dc(e,VT)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const y=this._engine.playersByElement.get(e);if(y){let g=y.indexOf(o);g>=0&&y.splice(g,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,Ef,!0);n.forEach(r=>{if(r[xr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,Sd,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&xo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||fb,u=new pb(Sd),d=new mb(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[xr];(!s||s===HT)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Mr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=Zv(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,Yv(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class r6{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new i6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(Nf(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Nf(t))return;const s=t[xr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Mr(e,hb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dc(e,hb))}removeNode(e,t,n,r){if(Nf(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[xr]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return Nf(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Ef,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,tb,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return xo(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const n=e[xr];if(n&&n.setForRemoval){if(e[xr]=HT,n.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}null!==(t=e.classList)&&void 0!==t&&t.contains(hb)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Mr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?xo(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function rU(i){return new ce(3402,!1)}()}_flushAnimations(e,t){const n=new Ff,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(P=>{u.add(P);const F=this.driver.query(P,".ng-animate-queued",!0);for(let q=0;q<F.length;q++)u.add(F[q])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=GT(h,this.collectedEnterElements),f=new Map;let m=0;p.forEach((P,F)=>{const q=eb+m++;f.set(F,q),P.forEach(ie=>Mr(ie,q))});const y=[],g=new Set,_=new Set;for(let P=0;P<this.collectedLeaveElements.length;P++){const F=this.collectedLeaveElements[P],q=F[xr];q&&q.setForRemoval&&(y.push(F),g.add(F),q.hasAnimation?this.driver.query(F,".ng-star-inserted",!0).forEach(ie=>g.add(ie)):_.add(F))}const v=new Map,b=GT(h,Array.from(g));b.forEach((P,F)=>{const q=Cf+m++;v.set(F,q),P.forEach(ie=>Mr(ie,q))}),e.push(()=>{p.forEach((P,F)=>{const q=f.get(F);P.forEach(ie=>dc(ie,q))}),b.forEach((P,F)=>{const q=v.get(F);P.forEach(ie=>dc(ie,q))}),y.forEach(P=>{this.processLeaveNode(P)})});const x=[],S=[];for(let P=this._namespaceList.length-1;P>=0;P--)this._namespaceList[P].drainQueuedTransitions(t).forEach(q=>{const ie=q.player,Y=q.element;if(x.push(ie),this.collectedEnterElements.length){const U=Y[xr];if(U&&U.setForMove){if(U.previousTriggersValues&&U.previousTriggersValues.has(q.triggerName)){const le=U.previousTriggersValues.get(q.triggerName),he=this.statesByElement.get(q.element);if(he&&he.has(q.triggerName)){const Re=he.get(q.triggerName);Re.value=le,he.set(q.triggerName,Re)}}return void ie.destroy()}}const ee=!d||!this.driver.containsElement(d,Y),ge=v.get(Y),ye=f.get(Y),fe=this._buildInstruction(q,n,ye,ge,ee);if(fe.errors&&fe.errors.length)return void S.push(fe);if(ee)return ie.onStart(()=>ba(Y,fe.fromStyles)),ie.onDestroy(()=>cs(Y,fe.toStyles)),void r.push(ie);if(q.isFallbackTransition)return ie.onStart(()=>ba(Y,fe.fromStyles)),ie.onDestroy(()=>cs(Y,fe.toStyles)),void r.push(ie);const xt=[];fe.timelines.forEach(U=>{U.stretchStartingKeyframe=!0,this.disabledNodes.has(U.element)||xt.push(U)}),fe.timelines=xt,n.append(Y,fe.timelines),o.push({instruction:fe,player:ie,element:Y}),fe.queriedElements.forEach(U=>nr(a,U,[]).push(ie)),fe.preStyleProps.forEach((U,le)=>{if(U.size){let he=l.get(le);he||l.set(le,he=new Set),U.forEach((Re,Qe)=>he.add(Qe))}}),fe.postStyleProps.forEach((U,le)=>{let he=c.get(le);he||c.set(le,he=new Set),U.forEach((Re,Qe)=>he.add(Qe))})});if(S.length){const P=[];S.forEach(F=>{P.push(function sU(i,e){return new ce(3505,!1)}())}),x.forEach(F=>F.destroy()),this.reportError(P)}const w=new Map,I=new Map;o.forEach(P=>{const F=P.element;n.has(F)&&(I.set(F,F),this._beforeAnimationBuild(P.player.namespaceId,P.instruction,w))}),r.forEach(P=>{const F=P.element;this._getPreviousPlayers(F,!1,P.namespaceId,P.triggerName,null).forEach(ie=>{nr(w,F,[]).push(ie),ie.destroy()})});const z=y.filter(P=>WT(P,l,c)),B=new Map;UT(B,this.driver,_,c,zs).forEach(P=>{WT(P,l,c)&&z.push(P)});const J=new Map;p.forEach((P,F)=>{UT(J,this.driver,new Set(P),l,"!")}),z.forEach(P=>{var F,q;const ie=B.get(P),Y=J.get(P);B.set(P,new Map([...Array.from(null!==(F=ie?.entries())&&void 0!==F?F:[]),...Array.from(null!==(q=Y?.entries())&&void 0!==q?q:[])]))});const V=[],H=[],j={};o.forEach(P=>{const{element:F,player:q,instruction:ie}=P;if(n.has(F)){if(u.has(F))return q.onDestroy(()=>cs(F,ie.toStyles)),q.disabled=!0,q.overrideTotalTime(ie.totalTime),void r.push(q);let Y=j;if(I.size>1){let ge=F;const ye=[];for(;ge=ge.parentNode;){const fe=I.get(ge);if(fe){Y=fe;break}ye.push(ge)}ye.forEach(fe=>I.set(fe,Y))}const ee=this._buildAnimation(q.namespaceId,ie,w,s,J,B);if(q.setRealPlayer(ee),Y===j)V.push(q);else{const ge=this.playersByElement.get(Y);ge&&ge.length&&(q.parentPlayer=xo(ge)),r.push(q)}}else ba(F,ie.fromStyles),q.onDestroy(()=>cs(F,ie.toStyles)),H.push(q),u.has(F)&&r.push(q)}),H.forEach(P=>{const F=s.get(P.element);if(F&&F.length){const q=xo(F);P.setRealPlayer(q)}}),r.forEach(P=>{P.parentPlayer?P.syncPlayerEvents(P.parentPlayer):P.destroy()});for(let P=0;P<y.length;P++){const F=y[P],q=F[xr];if(dc(F,Cf),q&&q.hasAnimation)continue;let ie=[];if(a.size){let ee=a.get(F);ee&&ee.length&&ie.push(...ee);let ge=this.driver.query(F,tb,!0);for(let ye=0;ye<ge.length;ye++){let fe=a.get(ge[ye]);fe&&fe.length&&ie.push(...fe)}}const Y=ie.filter(ee=>!ee.destroyed);Y.length?l6(this,F,Y):this.processLeaveNode(F)}return y.length=0,V.forEach(P=>{this.players.push(P),P.onDone(()=>{P.destroy();const F=this.players.indexOf(P);this.players.splice(F,1)}),P.play()}),V}elementContainsData(e,t){let n=!1;const r=t[xr];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Sd;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=nr(n,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(p=>{const f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),d.push(p)})}ba(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(f=>{const m=f.element;u.add(m);const y=m[xr];if(y&&y.removedBeforeQueried)return new wd(f.duration,f.delay);const g=m!==l,_=function c6(i){const e=[];return jT(i,e),e}((n.get(m)||t6).map(w=>w.getRealPlayer())).filter(w=>!!w.element&&w.element===m),v=s.get(m),b=o.get(m),x=gT(0,this._normalizer,0,f.keyframes,v,b),S=this._buildPlayer(f,x,_);if(f.subTimeline&&r&&d.add(m),g){const w=new mb(e,a,m);w.setRealPlayer(S),c.push(w)}return S});c.forEach(f=>{nr(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>function s6(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Mr(f,ST));const p=xo(h);return p.onDestroy(()=>{u.forEach(f=>dc(f,ST)),cs(l,t.toStyles)}),d.forEach(f=>{nr(r,f,[]).push(p)}),p}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new wd(e.duration,e.delay)}}class mb{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new wd,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>Yv(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){nr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Nf(i){return i&&1===i.nodeType}function zT(i,e){const t=i.style.display;return i.style.display=e??"none",t}function UT(i,e,t,n,r){const s=[];t.forEach(l=>s.push(zT(l)));const o=[];n.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[xr]=n6,o.push(c))}),i.set(c,u)});let a=0;return t.forEach(l=>zT(l,s[a++])),o}function GT(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Mr(i,e){var t;null===(t=i.classList)||void 0===t||t.add(e)}function dc(i,e){var t;null===(t=i.classList)||void 0===t||t.remove(e)}function l6(i,e,t){xo(t).onDone(()=>i.processLeaveNode(e))}function jT(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof fT?jT(n.players,e):e.push(n)}}function WT(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class Bf{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new r6(e,t,n),this._timelineEngine=new ZU(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=sb(this._driver,s,l,[]);if(l.length)throw function Yz(i,e){return new ce(3404,!1)}();a=function $U(i,e,t){return new qU(i,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=_T(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=_T(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let h6=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&cs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cs(this._element,this._initialStyles),this._endStyles&&(cs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ba(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ba(this._element,this._endStyles),this._endStyles=null),cs(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function gb(i){let e=null;return i.forEach((t,n)=>{(function p6(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class $T{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:kT(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class f6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return wT(e,t)}getParentElement(e){return Qv(e)}query(e,t,n){return xT(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(p=>p instanceof $T);(function yU(i,e){return 0===i||0===e})(n,r)&&u.forEach(p=>{p.currentSnapshot.forEach((f,m)=>c.set(m,f))});let d=function fU(i){return i.length?i[0]instanceof Map?i:i.map(e=>ET(e)):[]}(t).map(p=>Mo(p));d=function vU(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,kT(i,a)))}}return e}(e,d,c);const h=function d6(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=gb(e[0]),e.length>1&&(n=gb(e[e.length-1]))):e instanceof Map&&(t=gb(e)),t||n?new h6(i,t,n):null}(e,d);return new $T(e,d,l,h)}}let m6=(()=>{class i extends dT{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:Pr.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?hT(t):t;return qT(this._renderer,null,n,"register",[r]),new g6(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)($(zu),$(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();class g6 extends class Ez{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new _6(this._id,e,t||{},this._renderer)}}class _6{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return qT(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function qT(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const YT="@.disabled";let y6=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let u=this._rendererCache.get(s);return u||(u=new XT("",s,this.engine),this._rendererCache.set(s,u)),u}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return n.data.animation.forEach(l),new v6(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)($(zu),$(Bf),$(tt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();class XT{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==YT?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class v6 extends XT{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==YT?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function b6(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function w6(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}let x6=(()=>{class i extends Bf{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)($(lt),$(Jv),$(ub),$(ud))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const ZT=[{provide:dT,useClass:m6},{provide:ub,useFactory:function M6(){return new UU}},{provide:Bf,useClass:x6},{provide:zu,useFactory:function C6(i,e,t){return new y6(i,e,t)},deps:[xf,Bf,tt]}],_b=[{provide:Jv,useFactory:()=>new f6},{provide:tr,useValue:"BrowserAnimations"},...ZT],KT=[{provide:Jv,useClass:MT},{provide:tr,useValue:"NoopAnimations"},...ZT];let S6=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?KT:_b}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:_b,imports:[aT]}),i})();function QT(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function Ri(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){QT(s,n,r,o,a,"next",l)}function a(l){QT(s,n,r,o,a,"throw",l)}o(void 0)})}}class Be{constructor(e=0){this.period=0,this.speed=0,this.epoch=new Date,this.a=0,this.e=0,this.i=0,this.w=0,this.o=0,this.M=0,this.M=e}}class E6{constructor(){this.asterMap=new Map,this.date=new Date,this.rotation=!0,this.anchorMassCenter=!1,this.scale=1,this.speed=1,this.showAxes=!1,this.showGlare=!0,this.showMassCenter=!1,this.minSpeed=1,this.maxSpeed=1e8}}const ke=149597870.7,$e=36500,Fe=86400,js=198892e10,ai=696e3,xa=1898e9,Ws=71492,Ma=59722e5,Ca=6373.1,Sa=9.80665;function Ea(i,e,t=0){if("number"!=typeof t||t<0)throw new Error('jackknife: called "random" with invalid decimals.');let n=Math.random()*(e-i)+i;return n=Co(n,t),n}function Co(i,e=2){if("number"!=typeof e||e<0)throw new Error('jackknife: called "round" with invalid decimals.');const t=Math.pow(10,e);return Math.round(i*t)/t}function ni(i){return i*(Math.PI/180)}function JT(i,e){if(e<i)throw new Error('jackknife: called "range" with "min" greater than "max".');const t=[];for(let n=i;n<=e;n++)t.push(n);return t}function Ed(i,e){const t=e.split(".");let n=null;for(let r=0;r<t.length&&(0===r||n);r++)n=(0===r?i:n)[t[r]]||null;return n}const Ia=1e3,Tn=1001,pn=1003,Bn=1006,Do=1008,To=1009,Rd=1012,$s=1015,mc=1016,gc=1020,us=1022,wi=1023,ka=1026,_c=1027,Pd=2300,yc=2301,vc=2400,bc=2401,Ui=3e3,Ra=3001,Fd=35044,Ld=35048;class Ao{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const li=[];for(let i=0;i<256;i++)li[i]=(i<16?"0":"")+i.toString(16);let Xf=1234567;const Fa=Math.PI/180,Od=180/Math.PI;function rr(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(li[255&i]+li[i>>8&255]+li[i>>16&255]+li[i>>24&255]+"-"+li[255&e]+li[e>>8&255]+"-"+li[e>>16&15|64]+li[e>>24&255]+"-"+li[63&t|128]+li[t>>8&255]+"-"+li[t>>16&255]+li[t>>24&255]+li[255&n]+li[n>>8&255]+li[n>>16&255]+li[n>>24&255]).toUpperCase()}function ci(i,e,t){return Math.max(e,Math.min(t,i))}function Tb(i,e){return(i%e+e)%e}function Nd(i,e,t){return(1-t)*i+t*e}function Ab(i){return 0==(i&i-1)&&0!==i}function SA(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function EA(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}var Zf=Object.freeze({__proto__:null,DEG2RAD:Fa,RAD2DEG:Od,generateUUID:rr,clamp:ci,euclideanModulo:Tb,mapLinear:function l9(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)},inverseLerp:function c9(i,e,t){return i!==e?(t-i)/(e-i):0},lerp:Nd,damp:function u9(i,e,t,n){return Nd(i,e,1-Math.exp(-t*n))},pingpong:function d9(i,e=1){return e-Math.abs(Tb(i,2*e)-e)},smoothstep:function h9(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*(3-2*i)},smootherstep:function p9(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*i*(i*(6*i-15)+10)},randInt:function f9(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function m9(i,e){return i+Math.random()*(e-i)},randFloatSpread:function g9(i){return i*(.5-Math.random())},seededRandom:function _9(i){return void 0!==i&&(Xf=i%2147483647),Xf=16807*Xf%2147483647,(Xf-1)/2147483646},degToRad:function y9(i){return i*Fa},radToDeg:function v9(i){return i*Od},isPowerOfTwo:Ab,ceilPowerOfTwo:SA,floorPowerOfTwo:EA,setQuaternionFromProperEuler:function b9(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),u=o((e+n)/2),d=s((e-n)/2),h=o((e-n)/2),p=s((n-e)/2),f=o((n-e)/2);switch(r){case"XYX":i.set(a*u,l*d,l*h,a*c);break;case"YZY":i.set(l*h,a*u,l*d,a*c);break;case"ZXZ":i.set(l*d,l*h,a*u,a*c);break;case"XZX":i.set(a*u,l*f,l*p,a*c);break;case"YXY":i.set(l*p,a*u,l*f,a*c);break;case"ZYZ":i.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class Q{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Q.prototype.isVector2=!0;class ii{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],d=n[7],h=n[2],p=n[5],f=n[8],m=r[0],y=r[3],g=r[6],_=r[1],v=r[4],b=r[7],x=r[2],S=r[5],w=r[8];return s[0]=o*m+a*_+l*x,s[3]=o*y+a*v+l*S,s[6]=o*g+a*b+l*w,s[1]=c*m+u*_+d*x,s[4]=c*y+u*v+d*S,s[7]=c*g+u*b+d*w,s[2]=h*m+p*_+f*x,s[5]=h*y+p*v+f*S,s[8]=h*g+p*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,p=c*s-o*l,f=t*d+n*h+r*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=d*m,e[1]=(r*c-u*n)*m,e[2]=(a*n-r*o)*m,e[3]=h*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-a*t)*m,e[6]=p*m,e[7]=(n*l-c*t)*m,e[8]=(o*t-n*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+n*l,r[3]=t*o+n*c,r[6]=t*a+n*u,r[1]=-n*s+t*l,r[4]=-n*o+t*c,r[7]=-n*a+t*u,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function DA(i){if(0===i.length)return-1/0;let e=i[0];for(let t=1,n=i.length;t<n;++t)i[t]>e&&(e=i[t]);return e}function Kf(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function TA(i,e=0){let t=3735928559^e,n=1103547991^e;for(let s,r=0;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}let xc;ii.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class Mc{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===xc&&(xc=Kf("canvas")),xc.width=e.width,xc.height=e.height;const n=xc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=xc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let x9=0;class Vn extends Ao{constructor(e=Vn.DEFAULT_IMAGE,t=Vn.DEFAULT_MAPPING,n=Tn,r=Tn,s=Bn,o=Do,a=wi,l=To,c=1,u=Ui){super(),Object.defineProperty(this,"id",{value:x9++}),this.uuid=rr(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ii,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=rr()),!t&&void 0===e.images[r.uuid]){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(Ib(r[o].isDataTexture?r[o].image:r[o]))}else s=Ib(r);e.images[r.uuid]={uuid:r.uuid,url:s}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ia:e.x=e.x-Math.floor(e.x);break;case Tn:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ia:e.y=e.y-Math.floor(e.y);break;case Tn:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function Ib(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Mc.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Vn.DEFAULT_IMAGE=void 0,Vn.DEFAULT_MAPPING=300,Vn.prototype.isTexture=!0;class Xt{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],p=l[5],f=l[9],m=l[2],y=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(f-y)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(f+y)<.1&&Math.abs(c+p+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,b=(p+1)/2,x=(g+1)/2,S=(u+h)/4,w=(d+m)/4,I=(f+y)/4;return v>b&&v>x?v<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(v),r=S/n,s=w/n):b>x?b<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),n=S/r,s=I/r):x<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=w/s,r=I/s),this.set(n,r,s,t),this}let _=Math.sqrt((y-f)*(y-f)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(y-f)/_,this.y=(d-m)/_,this.z=(h-u)/_,this.w=Math.acos((c+p+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Xt.prototype.isVector4=!0;class Cr extends Ao{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Xt(0,0,e,t),this.scissorTest=!1,this.viewport=new Xt(0,0,e,t),this.texture=new Vn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Bn,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Cr.prototype.isWebGLRenderTarget=!0,class M9 extends Cr{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class kb extends Cr{constructor(e,t,n={}){super(e,t,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}kb.prototype.isWebGLMultisampleRenderTarget=!0;class Hn{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],d=n[r+3];const h=s[o+0],p=s[o+1],f=s[o+2],m=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=p,e[t+2]=f,void(e[t+3]=m);if(d!==m||l!==h||c!==p||u!==f){let y=1-a;const g=l*h+c*p+u*f+d*m,_=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){const x=Math.sqrt(v),S=Math.atan2(x,g*_);y=Math.sin(y*S)/x,a=Math.sin(a*S)/x}const b=a*_;if(l=l*y+h*b,c=c*y+p*b,u=u*y+f*b,d=d*y+m*b,y===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],d=s[o],h=s[o+1],p=s[o+2],f=s[o+3];return e[t]=a*f+u*d+l*p-c*h,e[t+1]=l*f+u*h+c*d-a*p,e[t+2]=c*f+u*p+a*h-l*d,e[t+3]=u*f-a*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),d=a(s/2),h=l(n/2),p=l(r/2),f=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"YXZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"ZXY":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"ZYX":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"YZX":this._x=h*u*d+c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d-h*p*f;break;case"XZY":this._x=h*u*d-c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=n+a+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-r)*p}else if(n>a&&n>d){const p=2*Math.sqrt(1+n-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-n-d);this._w=(s-c)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-n-a);this._w=(o-r)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ci(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*n+t*this._x,this._y=p*r+t*this._y,this._z=p*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hn.prototype.isQuaternion=!0;class M{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(AA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(AA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,u=l*n+a*t-s*r,d=l*r+s*n-o*t,h=-s*t-o*n-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Rb.copy(this).projectOnVector(e),this.sub(Rb)}reflect(e){return this.sub(Rb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}M.prototype.isVector3=!0;const Rb=new M,AA=new Hn;class sr{constructor(e=new M(1/0,1/0,1/0),t=new M(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<n&&(n=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<n&&(n=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Bd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Pb.copy(t.boundingBox),Pb.applyMatrix4(e.matrixWorld),this.union(Pb));const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bd),Bd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vd),Qf.subVectors(this.max,Vd),Cc.subVectors(e.a,Vd),Sc.subVectors(e.b,Vd),Ec.subVectors(e.c,Vd),Io.subVectors(Sc,Cc),ko.subVectors(Ec,Sc),La.subVectors(Cc,Ec);let t=[0,-Io.z,Io.y,0,-ko.z,ko.y,0,-La.z,La.y,Io.z,0,-Io.x,ko.z,0,-ko.x,La.z,0,-La.x,-Io.y,Io.x,0,-ko.y,ko.x,0,-La.y,La.x,0];return!(!Fb(t,Cc,Sc,Ec,Qf)||(t=[1,0,0,0,1,0,0,0,1],!Fb(t,Cc,Sc,Ec,Qf)))&&(Jf.crossVectors(Io,ko),t=[Jf.x,Jf.y,Jf.z],Fb(t,Cc,Sc,Ec,Qf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Bd.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Bd).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}sr.prototype.isBox3=!0;const qs=[new M,new M,new M,new M,new M,new M,new M,new M],Bd=new M,Pb=new sr,Cc=new M,Sc=new M,Ec=new M,Io=new M,ko=new M,La=new M,Vd=new M,Qf=new M,Jf=new M,Oa=new M;function Fb(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Oa.fromArray(i,s);const a=r.x*Math.abs(Oa.x)+r.y*Math.abs(Oa.y)+r.z*Math.abs(Oa.z),l=e.dot(Oa),c=t.dot(Oa),u=n.dot(Oa);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const C9=new sr,IA=new M,Lb=new M,Ob=new M;class Ro{constructor(e=new M,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):C9.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Ob.subVectors(e,this.center);const t=Ob.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Ob.multiplyScalar(r/n)),this.radius+=r}return this}union(e){return Lb.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(IA.copy(e.center).add(Lb)),this.expandByPoint(IA.copy(e.center).sub(Lb)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ys=new M,Nb=new M,em=new M,Po=new M,Bb=new M,tm=new M,Vb=new M;class Na{constructor(e=new M,t=new M(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ys)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ys.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ys.copy(this.direction).multiplyScalar(t).add(this.origin),Ys.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Nb.copy(e).add(t).multiplyScalar(.5),em.copy(t).sub(e).normalize(),Po.copy(this.origin).sub(Nb);const s=.5*e.distanceTo(t),o=-this.direction.dot(em),a=Po.dot(this.direction),l=-Po.dot(em),c=Po.lengthSq(),u=Math.abs(1-o*o);let d,h,p,f;if(u>0)if(d=o*l-a,h=o*a-l,f=s*u,d>=0)if(h>=-f)if(h<=f){const m=1/u;d*=m,h*=m,p=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h<=-f?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c):h<=f?(d=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(em).multiplyScalar(h).add(Nb),p}intersectSphere(e,t){Ys.subVectors(e.center,this.origin);const n=Ys.dot(this.direction),r=Ys.dot(Ys)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||s>r||((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Ys)}intersectTriangle(e,t,n,r,s){Bb.subVectors(t,e),tm.subVectors(n,e),Vb.crossVectors(Bb,tm);let a,o=this.direction.dot(Vb);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Po.subVectors(this.origin,e);const l=a*this.direction.dot(tm.crossVectors(Po,tm));if(l<0)return null;const c=a*this.direction.dot(Bb.cross(Po));if(c<0||l+c>o)return null;const u=-a*Po.dot(Vb);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Oe{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,s,o,a,l,c,u,d,h,p,f,m,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=p,g[7]=f,g[11]=m,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Oe).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Dc.setFromMatrixColumn(e,0).length(),s=1/Dc.setFromMatrixColumn(e,1).length(),o=1/Dc.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,p=o*d,f=a*u,m=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+f*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=f+p*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,p=l*d,f=c*u,m=c*d;t[0]=h+m*a,t[4]=f*a-p,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-f,t[6]=m+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,p=l*d,f=c*u,m=c*d;t[0]=h-m*a,t[4]=-o*d,t[8]=f+p*a,t[1]=p+f*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,p=o*d,f=a*u,m=a*d;t[0]=l*u,t[4]=f*c-p,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=p*c-f,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,p=o*c,f=a*l,m=a*c;t[0]=l*u,t[4]=m-h*d,t[8]=f*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*d+f,t[10]=h-m*d}else if("XZY"===e.order){const h=o*l,p=o*c,f=a*l,m=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=o*u,t[9]=p*d-f,t[2]=f*d-p,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(S9,e,E9)}lookAt(e,t,n){const r=this.elements;return or.subVectors(e,t),0===or.lengthSq()&&(or.z=1),or.normalize(),Fo.crossVectors(n,or),0===Fo.lengthSq()&&(1===Math.abs(n.z)?or.x+=1e-4:or.z+=1e-4,or.normalize(),Fo.crossVectors(n,or)),Fo.normalize(),nm.crossVectors(or,Fo),r[0]=Fo.x,r[4]=nm.x,r[8]=or.x,r[1]=Fo.y,r[5]=nm.y,r[9]=or.y,r[2]=Fo.z,r[6]=nm.z,r[10]=or.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],d=n[5],h=n[9],p=n[13],f=n[2],m=n[6],y=n[10],g=n[14],_=n[3],v=n[7],b=n[11],x=n[15],S=r[0],w=r[4],I=r[8],z=r[12],B=r[1],R=r[5],J=r[9],V=r[13],H=r[2],j=r[6],P=r[10],F=r[14],q=r[3],ie=r[7],Y=r[11],ee=r[15];return s[0]=o*S+a*B+l*H+c*q,s[4]=o*w+a*R+l*j+c*ie,s[8]=o*I+a*J+l*P+c*Y,s[12]=o*z+a*V+l*F+c*ee,s[1]=u*S+d*B+h*H+p*q,s[5]=u*w+d*R+h*j+p*ie,s[9]=u*I+d*J+h*P+p*Y,s[13]=u*z+d*V+h*F+p*ee,s[2]=f*S+m*B+y*H+g*q,s[6]=f*w+m*R+y*j+g*ie,s[10]=f*I+m*J+y*P+g*Y,s[14]=f*z+m*V+y*F+g*ee,s[3]=_*S+v*B+b*H+x*q,s[7]=_*w+v*R+b*j+x*ie,s[11]=_*I+v*J+b*P+x*Y,s[15]=_*z+v*V+b*F+x*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+n*c*h+r*a*p-n*l*p)+e[7]*(+t*l*p-t*c*h+s*o*h-r*o*p+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*p-s*o*d+n*o*p+s*a*u-n*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-n*o*h+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],y=e[14],g=e[15],_=d*y*c-m*h*c+m*l*p-a*y*p-d*l*g+a*h*g,v=f*h*c-u*y*c-f*l*p+o*y*p+u*l*g-o*h*g,b=u*m*c-f*d*c+f*a*p-o*m*p-u*a*g+o*d*g,x=f*d*l-u*m*l-f*a*h+o*m*h+u*a*y-o*d*y,S=t*_+n*v+r*b+s*x;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/S;return e[0]=_*w,e[1]=(m*h*s-d*y*s-m*r*p+n*y*p+d*r*g-n*h*g)*w,e[2]=(a*y*s-m*l*s+m*r*c-n*y*c-a*r*g+n*l*g)*w,e[3]=(d*l*s-a*h*s-d*r*c+n*h*c+a*r*p-n*l*p)*w,e[4]=v*w,e[5]=(u*y*s-f*h*s+f*r*p-t*y*p-u*r*g+t*h*g)*w,e[6]=(f*l*s-o*y*s-f*r*c+t*y*c+o*r*g-t*l*g)*w,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*p+t*l*p)*w,e[8]=b*w,e[9]=(f*d*s-u*m*s-f*n*p+t*m*p+u*n*g-t*d*g)*w,e[10]=(o*m*s-f*a*s+f*n*c-t*m*c-o*n*g+t*a*g)*w,e[11]=(u*a*s-o*d*s-u*n*c+t*d*c+o*n*p-t*a*p)*w,e[12]=x*w,e[13]=(u*m*r-f*d*r+f*n*h-t*m*h-u*n*y+t*d*y)*w,e[14]=(f*a*r-o*m*r-f*n*l+t*m*l+o*n*y-t*a*y)*w,e[15]=(o*d*r-u*a*r+u*n*l-t*d*l-o*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,p=s*u,f=s*d,m=o*u,y=o*d,g=a*d,_=l*c,v=l*u,b=l*d,x=n.x,S=n.y,w=n.z;return r[0]=(1-(m+g))*x,r[1]=(p+b)*x,r[2]=(f-v)*x,r[3]=0,r[4]=(p-b)*S,r[5]=(1-(h+g))*S,r[6]=(y+_)*S,r[7]=0,r[8]=(f+v)*w,r[9]=(y-_)*w,r[10]=(1-(h+m))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Dc.set(r[0],r[1],r[2]).length();const o=Dc.set(r[4],r[5],r[6]).length(),a=Dc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Wr.copy(this);const c=1/s,u=1/o,d=1/a;return Wr.elements[0]*=c,Wr.elements[1]*=c,Wr.elements[2]*=c,Wr.elements[4]*=u,Wr.elements[5]*=u,Wr.elements[6]*=u,Wr.elements[8]*=d,Wr.elements[9]*=d,Wr.elements[10]*=d,t.setFromRotationMatrix(Wr),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r),h=-(o+s)/(o-s),p=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),u=1/(o-s),d=(t+e)*l,h=(n+r)*c,p=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Oe.prototype.isMatrix4=!0;const Dc=new M,Wr=new Oe,S9=new M(0,0,0),E9=new M(1,1,1),Fo=new M,nm=new M,or=new M,kA=new Oe,RA=new Hn;class Tc{constructor(e=0,t=0,n=0,r=Tc.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(ci(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ci(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(ci(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ci(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ci(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-ci(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return kA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kA,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return RA.setFromEuler(this),this.setFromQuaternion(RA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new M(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Tc.prototype.isEuler=!0,Tc.DefaultOrder="XYZ",Tc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class PA{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let D9=0;const FA=new M,Ac=new Hn,Xs=new Oe,im=new M,Hd=new M,T9=new M,A9=new Hn,LA=new M(1,0,0),OA=new M(0,1,0),NA=new M(0,0,1),I9={type:"added"},BA={type:"removed"};class It extends Ao{constructor(){super(),Object.defineProperty(this,"id",{value:D9++}),this.uuid=rr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=It.DefaultUp.clone();const e=new M,t=new Tc,n=new Hn,r=new M(1,1,1);t._onChange(function s(){n.setFromEuler(t,!1)}),n._onChange(function o(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Oe},normalMatrix:{value:new ii}}),this.matrix=new Oe,this.matrixWorld=new Oe,this.matrixAutoUpdate=It.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new PA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ac.setFromAxisAngle(e,t),this.quaternion.multiply(Ac),this}rotateOnWorldAxis(e,t){return Ac.setFromAxisAngle(e,t),this.quaternion.premultiply(Ac),this}rotateX(e){return this.rotateOnAxis(LA,e)}rotateY(e){return this.rotateOnAxis(OA,e)}rotateZ(e){return this.rotateOnAxis(NA,e)}translateOnAxis(e,t){return FA.copy(e).applyQuaternion(this.quaternion),this.position.add(FA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(LA,e)}translateY(e){return this.translateOnAxis(OA,e)}translateZ(e){return this.translateOnAxis(NA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Xs.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?im.copy(e):im.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Hd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xs.lookAt(Hd,im,this.up):Xs.lookAt(im,Hd,this.up),this.quaternion.setFromRotationMatrix(Xs),r&&(Xs.extractRotation(r.matrixWorld),Ac.setFromRotationMatrix(Xs),this.quaternion.premultiply(Ac.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(I9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(BA)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(BA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Xs.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Xs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hd,e,T9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hd,A9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),d.length>0&&(n.shapes=d),h.length>0&&(n.skeletons=h),p.length>0&&(n.animations=p)}return n.object=r,n;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}It.DefaultUp=new M(0,1,0),It.DefaultMatrixAutoUpdate=!0,It.prototype.isObject3D=!0;const $r=new M,Zs=new M,Hb=new M,Ks=new M,Ic=new M,kc=new M,VA=new M,zb=new M,Ub=new M,Gb=new M;class zn{constructor(e=new M,t=new M,n=new M){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),$r.subVectors(e,t),r.cross($r);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){$r.subVectors(r,t),Zs.subVectors(n,t),Hb.subVectors(e,t);const o=$r.dot($r),a=$r.dot(Zs),l=$r.dot(Hb),c=Zs.dot(Zs),u=Zs.dot(Hb),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,p=(c*l-a*u)*h,f=(o*u-a*l)*h;return s.set(1-p-f,f,p)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ks),Ks.x>=0&&Ks.y>=0&&Ks.x+Ks.y<=1}static getUV(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Ks),l.set(0,0),l.addScaledVector(s,Ks.x),l.addScaledVector(o,Ks.y),l.addScaledVector(a,Ks.z),l}static isFrontFacing(e,t,n,r){return $r.subVectors(n,t),Zs.subVectors(e,t),$r.cross(Zs).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $r.subVectors(this.c,this.b),Zs.subVectors(this.a,this.b),.5*$r.cross(Zs).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return zn.getUV(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return zn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Ic.subVectors(r,n),kc.subVectors(s,n),zb.subVectors(e,n);const l=Ic.dot(zb),c=kc.dot(zb);if(l<=0&&c<=0)return t.copy(n);Ub.subVectors(e,r);const u=Ic.dot(Ub),d=kc.dot(Ub);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(n).addScaledVector(Ic,o);Gb.subVectors(e,s);const p=Ic.dot(Gb),f=kc.dot(Gb);if(f>=0&&p<=f)return t.copy(s);const m=p*c-l*f;if(m<=0&&c>=0&&f<=0)return a=c/(c-f),t.copy(n).addScaledVector(kc,a);const y=u*f-p*d;if(y<=0&&d-u>=0&&p-f>=0)return VA.subVectors(s,r),a=(d-u)/(d-u+(p-f)),t.copy(r).addScaledVector(VA,a);const g=1/(y+m+h);return o=m*g,a=h*g,t.copy(n).addScaledVector(Ic,o).addScaledVector(kc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let k9=0;class Un extends Ao{constructor(){super(),Object.defineProperty(this,"id",{value:k9++}),this.uuid=rr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=wi,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==wi&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Un.prototype.isMaterial=!0;const HA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qr={h:0,s:0,l:0},rm={h:0,s:0,l:0};function jb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}function Wb(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function $b(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let _e=(()=>{class i{constructor(t,n,r){return void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,n,r){return this.r=t,this.g=n,this.b=r,this}setHSL(t,n,r){if(t=Tb(t,1),n=ci(n,0,1),r=ci(r,0,1),0===n)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=jb(o,s,t+1/3),this.g=jb(o,s,t),this.b=jb(o,s,t-1/3)}return this}setStyle(t){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return n(s[4]),this.setHSL(l,c,u)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===o)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const n=HA[t.toLowerCase()];return void 0!==n?this.setHex(n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,n=2){return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}copyLinearToGamma(t,n=2){const r=n>0?1/n:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Wb(t.r),this.g=Wb(t.g),this.b=Wb(t.b),this}copyLinearToSRGB(t){return this.r=$b(t.r),this.g=$b(t.g),this.b=$b(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const n=this.r,r=this.g,s=this.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case n:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-n)/d+2;break;case s:l=(n-r)/d+4}l/=6}return t.h=l,t.s=c,t.l=u,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,n,r){return this.getHSL(qr),qr.h+=t,qr.s+=n,qr.l+=r,this.setHSL(qr.h,qr.s,qr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,r){return this.r=t.r+(n.r-t.r)*r,this.g=t.g+(n.g-t.g)*r,this.b=t.b+(n.b-t.b)*r,this}lerpHSL(t,n){this.getHSL(qr),t.getHSL(rm);const r=Nd(qr.h,rm.h,n),s=Nd(qr.s,rm.s,n),o=Nd(qr.l,rm.l,n);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return i.NAMES=HA,i})();_e.prototype.isColor=!0,_e.prototype.r=1,_e.prototype.g=1,_e.prototype.b=1;class Gn extends Un{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new _e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Gn.prototype.isMeshBasicMaterial=!0;const on=new M,sm=new Q;class Zt{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Fd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new _e),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Q),t[n++]=o.x,t[n++]=o.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new M),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Xt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)sm.fromBufferAttribute(this,t),sm.applyMatrix3(e),this.setXY(t,sm.x,sm.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)on.fromBufferAttribute(this,t),on.applyMatrix3(e),this.setXYZ(t,on.x,on.y,on.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)on.x=this.getX(t),on.y=this.getY(t),on.z=this.getZ(t),on.applyMatrix4(e),this.setXYZ(t,on.x,on.y,on.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)on.x=this.getX(t),on.y=this.getY(t),on.z=this.getZ(t),on.applyNormalMatrix(e),this.setXYZ(t,on.x,on.y,on.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)on.x=this.getX(t),on.y=this.getY(t),on.z=this.getZ(t),on.transformDirection(e),this.setXYZ(t,on.x,on.y,on.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Fd&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Zt.prototype.isBufferAttribute=!0;class qb extends Zt{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Yb extends Zt{constructor(e,t,n){super(new Uint32Array(e),t,n)}}(class N9 extends Zt{constructor(e,t,n){super(new Uint16Array(e),t,n)}}).prototype.isFloat16BufferAttribute=!0;class Ve extends Zt{constructor(e,t,n){super(new Float32Array(e),t,n)}}let V9=0;const Sr=new Oe,Xb=new It,Rc=new M,ar=new sr,zd=new sr,ri=new M;class je extends Ao{constructor(){super(),Object.defineProperty(this,"id",{value:V9++}),this.uuid=rr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(DA(e)>65535?Yb:qb)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new ii).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sr.makeRotationFromQuaternion(e),this.applyMatrix4(Sr),this}rotateX(e){return Sr.makeRotationX(e),this.applyMatrix4(Sr),this}rotateY(e){return Sr.makeRotationY(e),this.applyMatrix4(Sr),this}rotateZ(e){return Sr.makeRotationZ(e),this.applyMatrix4(Sr),this}translate(e,t,n){return Sr.makeTranslation(e,t,n),this.applyMatrix4(Sr),this}scale(e,t,n){return Sr.makeScale(e,t,n),this.applyMatrix4(Sr),this}lookAt(e){return Xb.lookAt(e),Xb.updateMatrix(),this.applyMatrix4(Xb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rc).negate(),this.translate(Rc.x,Rc.y,Rc.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ve(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new sr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new M(-1/0,-1/0,-1/0),new M(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)ar.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(ri.addVectors(this.boundingBox.min,ar.min),this.boundingBox.expandByPoint(ri),ri.addVectors(this.boundingBox.max,ar.max),this.boundingBox.expandByPoint(ri)):(this.boundingBox.expandByPoint(ar.min),this.boundingBox.expandByPoint(ar.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ro);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new M,1/0);if(e){const n=this.boundingSphere.center;if(ar.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)zd.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(ri.addVectors(ar.min,zd.min),ar.expandByPoint(ri),ri.addVectors(ar.max,zd.max),ar.expandByPoint(ri)):(ar.expandByPoint(zd.min),ar.expandByPoint(zd.max));ar.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ri.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ri));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ri.fromBufferAttribute(a,c),l&&(Rc.fromBufferAttribute(e,c),ri.add(Rc)),r=Math.max(r,n.distanceToSquared(ri))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Zt(new Float32Array(4*a),4));const l=t.tangent.array,c=[],u=[];for(let B=0;B<a;B++)c[B]=new M,u[B]=new M;const d=new M,h=new M,p=new M,f=new Q,m=new Q,y=new Q,g=new M,_=new M;function v(B,R,J){d.fromArray(r,3*B),h.fromArray(r,3*R),p.fromArray(r,3*J),f.fromArray(o,2*B),m.fromArray(o,2*R),y.fromArray(o,2*J),h.sub(d),p.sub(d),m.sub(f),y.sub(f);const V=1/(m.x*y.y-y.x*m.y);!isFinite(V)||(g.copy(h).multiplyScalar(y.y).addScaledVector(p,-m.y).multiplyScalar(V),_.copy(p).multiplyScalar(m.x).addScaledVector(h,-y.x).multiplyScalar(V),c[B].add(g),c[R].add(g),c[J].add(g),u[B].add(_),u[R].add(_),u[J].add(_))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let B=0,R=b.length;B<R;++B){const J=b[B],V=J.start;for(let j=V,P=V+J.count;j<P;j+=3)v(n[j+0],n[j+1],n[j+2])}const x=new M,S=new M,w=new M,I=new M;function z(B){w.fromArray(s,3*B),I.copy(w);const R=c[B];x.copy(R),x.sub(w.multiplyScalar(w.dot(R))).normalize(),S.crossVectors(I,R);const V=S.dot(u[B])<0?-1:1;l[4*B]=x.x,l[4*B+1]=x.y,l[4*B+2]=x.z,l[4*B+3]=V}for(let B=0,R=b.length;B<R;++B){const J=b[B],V=J.start;for(let j=V,P=V+J.count;j<P;j+=3)z(n[j+0]),z(n[j+1]),z(n[j+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Zt(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let h=0,p=n.count;h<p;h++)n.setXYZ(h,0,0,0);const r=new M,s=new M,o=new M,a=new M,l=new M,c=new M,u=new M,d=new M;if(e)for(let h=0,p=e.count;h<p;h+=3){const f=e.getX(h+0),m=e.getX(h+1),y=e.getX(h+2);r.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,y),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,y),a.add(u),l.add(u),c.add(u),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),n.setXYZ(h+0,u.x,u.y,u.z),n.setXYZ(h+1,u.x,u.y,u.z),n.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const o=n[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ri.fromBufferAttribute(e,t),ri.normalize(),e.setXYZ(t,ri.x,ri.y,ri.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let p=0,f=0;for(let m=0,y=l.length;m<y;m++){p=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*u;for(let g=0;g<u;g++)h[f++]=c[p++]}return new Zt(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new je,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=e(c[u],n);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}je.prototype.isBufferGeometry=!0;const zA=new Oe,Pc=new Na,Zb=new Ro,Lo=new M,Oo=new M,No=new M,Kb=new M,Qb=new M,Jb=new M,om=new M,am=new M,lm=new M,cm=new Q,um=new Q,dm=new Q,e0=new M,hm=new M;class qt extends It{constructor(e=new je,t=new Gn){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),Zb.copy(n.boundingSphere),Zb.applyMatrix4(s),!1===e.ray.intersectsSphere(Zb))||(zA.copy(s).invert(),Pc.copy(e.ray).applyMatrix4(zA),null!==n.boundingBox&&!1===Pc.intersectsBox(n.boundingBox)))return;let o;if(n.isBufferGeometry){const a=n.index,l=n.attributes.position,c=n.morphAttributes.position,u=n.morphTargetsRelative,d=n.attributes.uv,h=n.attributes.uv2,p=n.groups,f=n.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,y=p.length;m<y;m++){const g=p[m],_=r[g.materialIndex];for(let x=Math.max(g.start,f.start),S=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));x<S;x+=3){const w=a.getX(x),I=a.getX(x+1),z=a.getX(x+2);o=pm(this,_,e,Pc,l,c,u,d,h,w,I,z),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else for(let g=Math.max(0,f.start),_=Math.min(a.count,f.start+f.count);g<_;g+=3){const v=a.getX(g),b=a.getX(g+1),x=a.getX(g+2);o=pm(this,r,e,Pc,l,c,u,d,h,v,b,x),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,y=p.length;m<y;m++){const g=p[m],_=r[g.materialIndex];for(let x=Math.max(g.start,f.start),S=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));x<S;x+=3)o=pm(this,_,e,Pc,l,c,u,d,h,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=g.materialIndex,t.push(o))}else for(let g=Math.max(0,f.start),_=Math.min(l.count,f.start+f.count);g<_;g+=3)o=pm(this,r,e,Pc,l,c,u,d,h,g,g+1,g+2),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function pm(i,e,t,n,r,s,o,a,l,c,u,d){Lo.fromBufferAttribute(r,c),Oo.fromBufferAttribute(r,u),No.fromBufferAttribute(r,d);const h=i.morphTargetInfluences;if(s&&h){om.set(0,0,0),am.set(0,0,0),lm.set(0,0,0);for(let f=0,m=s.length;f<m;f++){const y=h[f],g=s[f];0!==y&&(Kb.fromBufferAttribute(g,c),Qb.fromBufferAttribute(g,u),Jb.fromBufferAttribute(g,d),o?(om.addScaledVector(Kb,y),am.addScaledVector(Qb,y),lm.addScaledVector(Jb,y)):(om.addScaledVector(Kb.sub(Lo),y),am.addScaledVector(Qb.sub(Oo),y),lm.addScaledVector(Jb.sub(No),y)))}Lo.add(om),Oo.add(am),No.add(lm)}i.isSkinnedMesh&&(i.boneTransform(c,Lo),i.boneTransform(u,Oo),i.boneTransform(d,No));const p=function H9(i,e,t,n,r,s,o,a){let l;if(l=1===e.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;hm.copy(a),hm.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(hm);return c<t.near||c>t.far?null:{distance:c,point:hm.clone(),object:i}}(i,e,t,n,Lo,Oo,No,e0);if(p){a&&(cm.fromBufferAttribute(a,c),um.fromBufferAttribute(a,u),dm.fromBufferAttribute(a,d),p.uv=zn.getUV(e0,Lo,Oo,No,cm,um,dm,new Q)),l&&(cm.fromBufferAttribute(l,c),um.fromBufferAttribute(l,u),dm.fromBufferAttribute(l,d),p.uv2=zn.getUV(e0,Lo,Oo,No,cm,um,dm,new Q));const f={a:c,b:u,c:d,normal:new M,materialIndex:0};zn.getNormal(Lo,Oo,No,f.normal),p.face=f}return p}qt.prototype.isMesh=!0;class Ba extends je{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,p=0;function f(m,y,g,_,v,b,x,S,w,I,z){const B=b/w,R=x/I,J=b/2,V=x/2,H=S/2,j=w+1,P=I+1;let F=0,q=0;const ie=new M;for(let Y=0;Y<P;Y++){const ee=Y*R-V;for(let ge=0;ge<j;ge++)ie[m]=(ge*B-J)*_,ie[y]=ee*v,ie[g]=H,c.push(ie.x,ie.y,ie.z),ie[m]=0,ie[y]=0,ie[g]=S>0?1:-1,u.push(ie.x,ie.y,ie.z),d.push(ge/w),d.push(1-Y/I),F+=1}for(let Y=0;Y<I;Y++)for(let ee=0;ee<w;ee++){const ye=h+ee+j*(Y+1),fe=h+(ee+1)+j*(Y+1),xt=h+(ee+1)+j*Y;l.push(h+ee+j*Y,ye,xt),l.push(ye,fe,xt),q+=6}a.addGroup(p,q,z),p+=q,h+=F}f("z","y","x",-1,-1,n,t,e,o,s,0),f("z","y","x",1,-1,n,t,-e,o,s,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,s,4),f("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ve(c,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(d,2))}static fromJSON(e){return new Ba(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fc(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];e[t][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function xi(i){const e={};for(let t=0;t<i.length;t++){const n=Fc(i[t]);for(const r in n)e[r]=n[r]}return e}const z9={clone:Fc,merge:xi};class Qs extends Un{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}Qs.prototype.isShaderMaterial=!0;class fm extends It{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Oe,this.projectionMatrix=new Oe,this.projectionMatrixInverse=new Oe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}fm.prototype.isCamera=!0;class Kn extends fm{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Od*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Fa*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Od*Math.atan(Math.tan(.5*Fa*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Fa*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Kn.prototype.isPerspectiveCamera=!0;class t0 extends It{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Kn(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new M(1,0,0)),this.add(r);const s=new Kn(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new M(-1,0,0)),this.add(s);const o=new Kn(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new M(0,1,0)),this.add(o);const a=new Kn(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new M(0,-1,0)),this.add(a);const l=new Kn(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new M(0,0,1)),this.add(l);const c=new Kn(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new M(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.xr.enabled=u}}class Ud extends Vn{constructor(e,t,n,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Ud.prototype.isCubeTexture=!0;class n0 extends Cr{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),this.texture=new Ud(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Bn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=wi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Ba(5,5,5),s=new Qs({name:"CubemapFromEquirect",uniforms:Fc(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new qt(r,s),a=t.minFilter;return t.minFilter===Do&&(t.minFilter=Bn),new t0(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}n0.prototype.isWebGLCubeRenderTarget=!0;const r0=new M,j9=new M,W9=new ii;class Js{constructor(e=new M(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=r0.subVectors(n,t).cross(j9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(r0),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||W9.getNormalMatrix(e),r=this.coplanarPoint(r0).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Js.prototype.isPlane=!0;const Nc=new Ro,mm=new M;class gm{constructor(e=new Js,t=new Js,n=new Js,r=new Js,s=new Js,o=new Js){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],u=n[6],d=n[7],h=n[8],p=n[9],f=n[10],m=n[11],y=n[12],g=n[13],_=n[14],v=n[15];return t[0].setComponents(a-r,d-l,m-h,v-y).normalize(),t[1].setComponents(a+r,d+l,m+h,v+y).normalize(),t[2].setComponents(a+s,d+c,m+p,v+g).normalize(),t[3].setComponents(a-s,d-c,m-p,v-g).normalize(),t[4].setComponents(a-o,d-u,m-f,v-_).normalize(),t[5].setComponents(a+o,d+u,m+f,v+_).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSprite(e){return Nc.center.set(0,0,0),Nc.radius=.7071067811865476,Nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(mm.x=r.normal.x>0?e.max.x:e.min.x,mm.y=r.normal.y>0?e.max.y:e.min.y,mm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(mm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function UA(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function $9(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=n.get(c);return void((!h||h.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);void 0===d?n.set(c,function r(c,u){const d=c.array,h=c.usage,p=i.createBuffer();i.bindBuffer(u,p),i.bufferData(u,d,h),c.onUploadCallback();let f=5126;return d instanceof Float32Array?f=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?c.isFloat16BufferAttribute?t?f=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):f=5123:d instanceof Int16Array?f=5122:d instanceof Uint32Array?f=5125:d instanceof Int32Array?f=5124:d instanceof Int8Array?f=5120:(d instanceof Uint8Array||d instanceof Uint8ClampedArray)&&(f=5121),{buffer:p,type:f,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,p=u.updateRange;i.bindBuffer(d,c),-1===p.count?i.bufferSubData(d,0,h):(t?i.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):i.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Gd extends je{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,p=[],f=[],m=[],y=[];for(let g=0;g<u;g++){const _=g*h-o;for(let v=0;v<c;v++)f.push(v*d-s,-_,0),m.push(0,0,1),y.push(v/a),y.push(1-g/l)}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const b=_+c*(g+1),x=_+1+c*(g+1),S=_+1+c*g;p.push(_+c*g,b,S),p.push(b,x,S)}this.setIndex(p),this.setAttribute("position",new Ve(f,3)),this.setAttribute("normal",new Ve(m,3)),this.setAttribute("uv",new Ve(y,2))}static fromJSON(e){return new Gd(e.width,e.height,e.widthSegments,e.heightSegments)}}const Tt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ce={common:{diffuse:{value:new _e(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ii},uv2Transform:{value:new ii},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ii}},sprite:{diffuse:{value:new _e(16777215)},opacity:{value:1},center:{value:new Q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ii}}},ds={basic:{uniforms:xi([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:xi([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.fog,Ce.lights,{emissive:{value:new _e(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:xi([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new _e(0)},specular:{value:new _e(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:xi([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new _e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:xi([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new _e(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:xi([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:xi([Ce.points,Ce.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:xi([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:xi([Ce.common,Ce.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:xi([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:xi([Ce.sprite,Ce.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new ii},t2D:{value:null}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},cube:{uniforms:xi([Ce.envmap,{opacity:{value:1}}]),vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:xi([Ce.common,Ce.displacementmap,{referencePosition:{value:new M},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:xi([Ce.lights,Ce.fog,{color:{value:new _e(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};function zj(i,e,t,n,r){const s=new _e(0);let a,l,o=0,c=null,u=0,d=null;function p(f,m){t.buffers.color.setClear(f.r,f.g,f.b,m,r)}return{getClearColor:function(){return s},setClearColor:function(f,m=1){s.set(f),o=m,p(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(f){o=f,p(s,o)},render:function h(f,m){let y=!1,g=!0===m.isScene?m.background:null;g&&g.isTexture&&(g=e.get(g));const _=i.xr,v=_.getSession&&_.getSession();v&&"additive"===v.environmentBlendMode&&(g=null),null===g?p(s,o):g&&g.isColor&&(p(g,1),y=!0),(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),g&&(g.isCubeTexture||306===g.mapping)?(void 0===l&&(l=new qt(new Ba(1,1,1),new Qs({name:"BackgroundCubeMaterial",uniforms:Fc(ds.cube.uniforms),vertexShader:ds.cube.vertexShader,fragmentShader:ds.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(b,x,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(l)),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,(c!==g||u!==g.version||d!==i.toneMapping)&&(l.material.needsUpdate=!0,c=g,u=g.version,d=i.toneMapping),f.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new qt(new Gd(2,2),new Qs({name:"BackgroundMaterial",uniforms:Fc(ds.background.uniforms),vertexShader:ds.background.vertexShader,fragmentShader:ds.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(c!==g||u!==g.version||d!==i.toneMapping)&&(a.material.needsUpdate=!0,c=g,u=g.version,d=i.toneMapping),f.unshift(a,a.geometry,a.material,0,0,null))}}}function Uj(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=m(null);let c=l;function h(V){return n.isWebGL2?i.bindVertexArray(V):s.bindVertexArrayOES(V)}function p(V){return n.isWebGL2?i.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function m(V){const H=[],j=[],P=[];for(let F=0;F<r;F++)H[F]=0,j[F]=0,P[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:j,attributeDivisors:P,object:V,attributes:{},index:null}}function _(){const V=c.newAttributes;for(let H=0,j=V.length;H<j;H++)V[H]=0}function v(V){b(V,0)}function b(V,H){const P=c.enabledAttributes,F=c.attributeDivisors;c.newAttributes[V]=1,0===P[V]&&(i.enableVertexAttribArray(V),P[V]=1),F[V]!==H&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,H),F[V]=H)}function x(){const V=c.newAttributes,H=c.enabledAttributes;for(let j=0,P=H.length;j<P;j++)H[j]!==V[j]&&(i.disableVertexAttribArray(j),H[j]=0)}function S(V,H,j,P,F,q){!0!==n.isWebGL2||5124!==j&&5125!==j?i.vertexAttribPointer(V,H,j,P,F,q):i.vertexAttribIPointer(V,H,j,F,q)}function R(){J(),c!==l&&(c=l,h(c.object))}function J(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(V,H,j,P,F){let q=!1;if(o){const ie=function f(V,H,j){const P=!0===j.wireframe;let F=a[V.id];void 0===F&&(F={},a[V.id]=F);let q=F[H.id];void 0===q&&(q={},F[H.id]=q);let ie=q[P];return void 0===ie&&(ie=m(function d(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),q[P]=ie),ie}(P,j,H);c!==ie&&(c=ie,h(c.object)),q=function y(V,H){const j=c.attributes,P=V.attributes;let F=0;for(const q in P){const ie=j[q],Y=P[q];if(void 0===ie||ie.attribute!==Y||ie.data!==Y.data)return!0;F++}return c.attributesNum!==F||c.index!==H}(P,F),q&&function g(V,H){const j={},P=V.attributes;let F=0;for(const q in P){const ie=P[q],Y={};Y.attribute=ie,ie.data&&(Y.data=ie.data),j[q]=Y,F++}c.attributes=j,c.attributesNum=F,c.index=H}(P,F)}else{const ie=!0===H.wireframe;(c.geometry!==P.id||c.program!==j.id||c.wireframe!==ie)&&(c.geometry=P.id,c.program=j.id,c.wireframe=ie,q=!0)}!0===V.isInstancedMesh&&(q=!0),null!==F&&t.update(F,34963),q&&(function w(V,H,j,P){if(!1===n.isWebGL2&&(V.isInstancedMesh||P.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;_();const F=P.attributes,q=j.getAttributes(),ie=H.defaultAttributeValues;for(const Y in q){const ee=q[Y];if(ee.location>=0){let ge=F[Y];if(void 0===ge&&("instanceMatrix"===Y&&V.instanceMatrix&&(ge=V.instanceMatrix),"instanceColor"===Y&&V.instanceColor&&(ge=V.instanceColor)),void 0!==ge){const ye=ge.normalized,fe=ge.itemSize,xt=t.get(ge);if(void 0===xt)continue;const oe=xt.buffer,U=xt.type,le=xt.bytesPerElement;if(ge.isInterleavedBufferAttribute){const he=ge.data,Re=he.stride,Qe=ge.offset;if(he&&he.isInstancedInterleavedBuffer){for(let K=0;K<ee.locationSize;K++)b(ee.location+K,he.meshPerAttribute);!0!==V.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let K=0;K<ee.locationSize;K++)v(ee.location+K);i.bindBuffer(34962,oe);for(let K=0;K<ee.locationSize;K++)S(ee.location+K,fe/ee.locationSize,U,ye,Re*le,(Qe+fe/ee.locationSize*K)*le)}else{if(ge.isInstancedBufferAttribute){for(let he=0;he<ee.locationSize;he++)b(ee.location+he,ge.meshPerAttribute);!0!==V.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let he=0;he<ee.locationSize;he++)v(ee.location+he);i.bindBuffer(34962,oe);for(let he=0;he<ee.locationSize;he++)S(ee.location+he,fe/ee.locationSize,U,ye,fe*le,fe/ee.locationSize*he*le)}}else if(void 0!==ie){const ye=ie[Y];if(void 0!==ye)switch(ye.length){case 2:i.vertexAttrib2fv(ee.location,ye);break;case 3:i.vertexAttrib3fv(ee.location,ye);break;case 4:i.vertexAttrib4fv(ee.location,ye);break;default:i.vertexAttrib1fv(ee.location,ye)}}}}x()}(V,H,j,P),null!==F&&i.bindBuffer(34963,t.get(F).buffer))},reset:R,resetDefaultState:J,dispose:function I(){R();for(const V in a){const H=a[V];for(const j in H){const P=H[j];for(const F in P)p(P[F].object),delete P[F];delete H[j]}delete a[V]}},releaseStatesOfGeometry:function z(V){if(void 0===a[V.id])return;const H=a[V.id];for(const j in H){const P=H[j];for(const F in P)p(P[F].object),delete P[F];delete H[j]}delete a[V.id]},releaseStatesOfProgram:function B(V){for(const H in a){const j=a[H];if(void 0===j[V.id])continue;const P=j[V.id];for(const F in P)p(P[F].object),delete P[F];delete j[V.id]}},initAttributes:_,enableAttribute:v,disableUnusedAttributes:x}}function Gj(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){i.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,p;if(r)h=i,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[p](s,c,u,d),t.update(u,s,d)}}function jj(i,e,t){let n;function s(w){if("highp"===w){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return"mediump"===w&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=i.getParameter(34930),h=i.getParameter(35660),p=i.getParameter(3379),f=i.getParameter(34076),m=i.getParameter(34921),y=i.getParameter(36347),g=i.getParameter(36348),_=i.getParameter(36349),v=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const w=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:o?i.getParameter(36183):0}}function Wj(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Js,a=new ii,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(d,h,p,f){const m=null!==d?d.length:0;let y=null;if(0!==m){if(y=l.value,!0!==f||null===y){const g=p+4*m,_=h.matrixWorldInverse;a.getNormalMatrix(_),(null===y||y.length<g)&&(y=new Float32Array(g));for(let v=0,b=p;v!==m;++v,b+=4)o.copy(d[v]).applyMatrix4(_,a),o.normal.toArray(y,b),y[b+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,y}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,p){const f=0!==d.length||h||0!==n||r;return r=h,t=u(d,p,0),n=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,p){const f=d.clippingPlanes,m=d.clipIntersection,y=d.clipShadows,g=i.get(d);if(!r||null===f||0===f.length||s&&!y)s?u(null):c();else{const _=s?0:n,v=4*_;let b=g.clippingState||null;l.value=b,b=u(f,h,v,p);for(let x=0;x!==v;++x)b[x]=t[x];g.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}}}function $j(i){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=i.getRenderTarget(),u=new n0(l.height/2);return u.fromEquirectangularTexture(i,o),e.set(o,u),i.setRenderTarget(c),o.addEventListener("dispose",r),t(u.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}ds.physical={uniforms:xi([ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Q(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new _e(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _e(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new _e(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};class jd extends fm{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}jd.prototype.isOrthographicCamera=!0;class Bo extends Qs{constructor(e){super(e),this.type="RawShaderMaterial"}}Bo.prototype.isRawShaderMaterial=!0;const hs=Math.pow(2,8),GA=[.125,.215,.35,.446,.526,.582],jA=5+GA.length,Va={[Ui]:0,[Ra]:1,3002:2,3004:3,3005:4,3006:5,3007:6},s0=new jd,{_lodPlanes:Wd,_sizeLods:WA,_sigmas:_m}=Xj(),$A=new _e;let o0=null;const Ha=(1+Math.sqrt(5))/2,Hc=1/Ha,qA=[new M(1,1,1),new M(-1,1,1),new M(1,1,-1),new M(-1,1,-1),new M(0,Ha,Hc),new M(0,Ha,-Hc),new M(Hc,0,Ha),new M(-Hc,0,Ha),new M(Ha,Hc,0),new M(-Ha,Hc,0)];class qj{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function Zj(i){const e=new Float32Array(i),t=new M(0,1,0);return new Bo({name:"SphericalGaussianBlur",defines:{n:i},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Va[Ui]},outputEncoding:{value:Va[Ui]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){o0=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=ZA(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=XA(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Wd.length;e++)Wd[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(o0),e.scissorTest=!1,ym(e,0,0,e.width,e.height)}_fromTexture(e){o0=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:pn,minFilter:pn,generateMipmaps:!1,type:To,format:1023,encoding:Yj(e)?e.encoding:3002,depthBuffer:!1},n=YA(t);return n.depthBuffer=!e,this._pingPongRenderTarget=YA(t),n}_compileMaterial(e){const t=new qt(Wd[0],e);this._renderer.compile(t,s0)}_sceneToCubeUV(e,t,n,r){const a=new Kn(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.outputEncoding,p=u.toneMapping;u.getClearColor($A),u.toneMapping=0,u.outputEncoding=Ui,u.autoClear=!1;const f=new Gn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),m=new qt(new Ba,f);let y=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,y=!0):(f.color.copy($A),y=!0);for(let _=0;_<6;_++){const v=_%3;0==v?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1==v?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_])),ym(r,v*hs,_>2?hs:0,hs,hs),u.setRenderTarget(r),y&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=p,u.outputEncoding=h,u.autoClear=d,e.background=g}_setEncoding(e,t){e.value=Va[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?null==this._cubemapShader&&(this._cubemapShader=ZA()):null==this._equirectShader&&(this._equirectShader=XA());const s=r?this._cubemapShader:this._equirectShader,o=new qt(Wd[0],s),a=s.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),ym(t,0,0,3*hs,2*hs),n.setRenderTarget(t),n.render(o,s0)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<jA;r++){const s=Math.sqrt(_m[r]*_m[r]-_m[r-1]*_m[r-1]);this._blur(e,r-1,r,s,qA[(r-1)%qA.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new qt(Wd[r],c),h=c.uniforms,p=WA[n]-1,f=isFinite(s)?Math.PI/(2*p):2*Math.PI/39,m=s/f,y=isFinite(s)?1+Math.floor(3*m):20;y>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);const g=[];let _=0;for(let S=0;S<20;++S){const w=S/m,I=Math.exp(-w*w/2);g.push(I),0==S?_+=I:S<y&&(_+=2*I)}for(let S=0;S<g.length;S++)g[S]=g[S]/_;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=g,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a),h.dTheta.value=f,h.mipInt.value=8-n,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const v=WA[r];ym(t,3*Math.max(0,hs-2*v),(0===r?0:2*hs)+2*v*(r>4?r-8+4:0),3*v,2*v),l.setRenderTarget(t),l.render(d,s0)}}function Yj(i){return void 0!==i&&i.type===To&&(i.encoding===Ui||i.encoding===Ra||3007===i.encoding)}function Xj(){const i=[],e=[],t=[];let n=8;for(let r=0;r<jA;r++){const s=Math.pow(2,n);e.push(s);let o=1/s;r>4?o=GA[r-8+4-1]:0==r&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,h=6,p=3,f=2,m=1,y=new Float32Array(p*h*d),g=new Float32Array(f*h*d),_=new Float32Array(m*h*d);for(let b=0;b<d;b++){const x=b%3*2/3-1,S=b>2?0:-1;y.set([x,S,0,x+2/3,S,0,x+2/3,S+1,0,x,S,0,x+2/3,S+1,0,x,S+1,0],p*h*b),g.set(u,f*h*b),_.set([b,b,b,b,b,b],m*h*b)}const v=new je;v.setAttribute("position",new Zt(y,p)),v.setAttribute("uv",new Zt(g,f)),v.setAttribute("faceIndex",new Zt(_,m)),i.push(v),n>4&&n--}return{_lodPlanes:i,_sizeLods:e,_sigmas:t}}function YA(i){const e=new Cr(3*hs,3*hs,i);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function ym(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function XA(){const i=new Q(1,1);return new Bo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:i},inputEncoding:{value:Va[Ui]},outputEncoding:{value:Va[Ui]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ZA(){return new Bo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Va[Ui]},outputEncoding:{value:Va[Ui]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Kj(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){const h=i.getRenderTarget();null===t&&(t=new qj(i));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),i.setRenderTarget(h),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Qj(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Jj(i,e,t,n){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const f in h.attributes)e.remove(h.attributes[f]);h.removeEventListener("dispose",o),delete r[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],p=d.index,f=d.attributes.position;let m=0;if(null!==p){const _=p.array;m=p.version;for(let v=0,b=_.length;v<b;v+=3){const x=_[v+0],S=_[v+1],w=_[v+2];h.push(x,S,S,w,w,x)}}else{m=f.version;for(let v=0,b=f.array.length/3-1;v<b;v+=3){const x=v+0,S=v+1,w=v+2;h.push(x,S,S,w,w,x)}}const y=new(DA(h)>65535?Yb:qb)(h,1);y.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,y)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const f in h)e.update(h[f],34962);const p=d.morphAttributes;for(const f in p){const m=p[f];for(let y=0,g=m.length;y<g;y++)e.update(m[y],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const p=d.index;null!==p&&h.version<p.version&&c(d)}else c(d);return s.get(d)}}}function eW(i,e,t,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,p){i.drawElements(s,p,a,h*l),t.update(p,s,1)},this.renderInstances=function d(h,p,f){if(0===f)return;let m,y;if(r)m=i,y="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[y](s,p,a,h*l,f),t.update(p,s,f)}}function tW(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}class c0 extends Vn{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pn,this.minFilter=pn,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function nW(i,e){return i[0]-e[0]}function iW(i,e){return Math.abs(e[1])-Math.abs(i[1])}function KA(i,e){let t=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?t=127:n instanceof Int16Array?t=32767:n instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),i.divideScalar(t)}function rW(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new M,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const p=c.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position.length;let m=s.get(u);if(void 0===m||m.count!==f){void 0!==m&&m.texture.dispose();const _=void 0!==u.morphAttributes.normal,v=u.morphAttributes.position,b=u.morphAttributes.normal||[],S=!0===_?2:1;let w=u.attributes.position.count*S,I=1;w>e.maxTextureSize&&(I=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const z=new Float32Array(w*I*4*f),B=new c0(z,w,I,f);B.format=wi,B.type=$s;const R=4*S;for(let J=0;J<f;J++){const V=v[J],H=b[J],j=w*I*4*J;for(let P=0;P<V.count;P++){o.fromBufferAttribute(V,P),!0===V.normalized&&KA(o,V);const F=P*R;z[j+F+0]=o.x,z[j+F+1]=o.y,z[j+F+2]=o.z,z[j+F+3]=0,!0===_&&(o.fromBufferAttribute(H,P),!0===H.normalized&&KA(o,H),z[j+F+4]=o.x,z[j+F+5]=o.y,z[j+F+6]=o.z,z[j+F+7]=0)}}m={count:f,texture:B,size:new Q(w,I)},s.set(u,m)}let y=0;for(let _=0;_<p.length;_++)y+=p[_];const g=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(i,"morphTargetBaseInfluence",g),h.getUniforms().setValue(i,"morphTargetInfluences",p),h.getUniforms().setValue(i,"morphTargetsTexture",m.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",m.size)}else{const f=void 0===p?0:p.length;let m=n[u.id];if(void 0===m||m.length!==f){m=[];for(let b=0;b<f;b++)m[b]=[b,0];n[u.id]=m}for(let b=0;b<f;b++){const x=m[b];x[0]=b,x[1]=p[b]}m.sort(iW);for(let b=0;b<8;b++)b<f&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(nW);const y=u.morphAttributes.position,g=u.morphAttributes.normal;let _=0;for(let b=0;b<8;b++){const x=a[b],S=x[0],w=x[1];S!==Number.MAX_SAFE_INTEGER&&w?(y&&u.getAttribute("morphTarget"+b)!==y[S]&&u.setAttribute("morphTarget"+b,y[S]),g&&u.getAttribute("morphNormal"+b)!==g[S]&&u.setAttribute("morphNormal"+b,g[S]),r[b]=w,_+=w):(y&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),g&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",v),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function sW(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}c0.prototype.isDataTexture2DArray=!0;class QA extends Vn{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pn,this.minFilter=pn,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}QA.prototype.isDataTexture3D=!0;const JA=new Vn,eI=new c0,tI=new QA,nI=new Ud,iI=[],rI=[],sI=new Float32Array(16),oI=new Float32Array(9),aI=new Float32Array(4);function zc(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=iI[r];if(void 0===s&&(s=new Float32Array(r),iI[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Pi(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Mi(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function vm(i,e){let t=rI[e];void 0===t&&(t=new Int32Array(e),rI[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function oW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function aW(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;i.uniform2fv(this.addr,e),Mi(t,e)}}function lW(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pi(t,e))return;i.uniform3fv(this.addr,e),Mi(t,e)}}function cW(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;i.uniform4fv(this.addr,e),Mi(t,e)}}function uW(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Pi(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Mi(t,e)}else{if(Pi(t,n))return;aI.set(n),i.uniformMatrix2fv(this.addr,!1,aI),Mi(t,n)}}function dW(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Pi(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Mi(t,e)}else{if(Pi(t,n))return;oI.set(n),i.uniformMatrix3fv(this.addr,!1,oI),Mi(t,n)}}function hW(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Pi(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Mi(t,e)}else{if(Pi(t,n))return;sI.set(n),i.uniformMatrix4fv(this.addr,!1,sI),Mi(t,n)}}function pW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function fW(i,e){const t=this.cache;Pi(t,e)||(i.uniform2iv(this.addr,e),Mi(t,e))}function mW(i,e){const t=this.cache;Pi(t,e)||(i.uniform3iv(this.addr,e),Mi(t,e))}function gW(i,e){const t=this.cache;Pi(t,e)||(i.uniform4iv(this.addr,e),Mi(t,e))}function _W(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function yW(i,e){const t=this.cache;Pi(t,e)||(i.uniform2uiv(this.addr,e),Mi(t,e))}function vW(i,e){const t=this.cache;Pi(t,e)||(i.uniform3uiv(this.addr,e),Mi(t,e))}function bW(i,e){const t=this.cache;Pi(t,e)||(i.uniform4uiv(this.addr,e),Mi(t,e))}function wW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTexture2D(e||JA,r)}function xW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||tI,r)}function MW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTextureCube(e||nI,r)}function CW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||eI,r)}function EW(i,e){i.uniform1fv(this.addr,e)}function DW(i,e){const t=zc(e,this.size,2);i.uniform2fv(this.addr,t)}function TW(i,e){const t=zc(e,this.size,3);i.uniform3fv(this.addr,t)}function AW(i,e){const t=zc(e,this.size,4);i.uniform4fv(this.addr,t)}function IW(i,e){const t=zc(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function kW(i,e){const t=zc(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function RW(i,e){const t=zc(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function PW(i,e){i.uniform1iv(this.addr,e)}function FW(i,e){i.uniform2iv(this.addr,e)}function LW(i,e){i.uniform3iv(this.addr,e)}function OW(i,e){i.uniform4iv(this.addr,e)}function NW(i,e){i.uniform1uiv(this.addr,e)}function BW(i,e){i.uniform2uiv(this.addr,e)}function VW(i,e){i.uniform3uiv(this.addr,e)}function HW(i,e){i.uniform4uiv(this.addr,e)}function zW(i,e,t){const n=e.length,r=vm(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.safeSetTexture2D(e[s]||JA,r[s])}function UW(i,e,t){const n=e.length,r=vm(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.setTexture3D(e[s]||tI,r[s])}function GW(i,e,t){const n=e.length,r=vm(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.safeSetTextureCube(e[s]||nI,r[s])}function jW(i,e,t){const n=e.length,r=vm(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.setTexture2DArray(e[s]||eI,r[s])}function $W(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=function SW(i){switch(i){case 5126:return oW;case 35664:return aW;case 35665:return lW;case 35666:return cW;case 35674:return uW;case 35675:return dW;case 35676:return hW;case 5124:case 35670:return pW;case 35667:case 35671:return fW;case 35668:case 35672:return mW;case 35669:case 35673:return gW;case 5125:return _W;case 36294:return yW;case 36295:return vW;case 36296:return bW;case 35678:case 36198:case 36298:case 36306:case 35682:return wW;case 35679:case 36299:case 36307:return xW;case 35680:case 36300:case 36308:case 36293:return MW;case 36289:case 36303:case 36311:case 36292:return CW}}(e.type)}function lI(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function WW(i){switch(i){case 5126:return EW;case 35664:return DW;case 35665:return TW;case 35666:return AW;case 35674:return IW;case 35675:return kW;case 35676:return RW;case 5124:case 35670:return PW;case 35667:case 35671:return FW;case 35668:case 35672:return LW;case 35669:case 35673:return OW;case 5125:return NW;case 36294:return BW;case 36295:return VW;case 36296:return HW;case 35678:case 36198:case 36298:case 36306:case 35682:return zW;case 35679:case 36299:case 36307:return UW;case 35680:case 36300:case 36308:case 36293:return GW;case 36289:case 36303:case 36311:case 36292:return jW}}(e.type)}function cI(i){this.id=i,this.seq=[],this.map={}}lI.prototype.updateCache=function(i){const e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Mi(e,i)},cI.prototype.setValue=function(i,e,t){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.setValue(i,e[o.id],t)}};const u0=/(\w+)(\])?(\[|\.)?/g;function uI(i,e){i.seq.push(e),i.map[e.id]=e}function qW(i,e,t){const n=i.name,r=n.length;for(u0.lastIndex=0;;){const s=u0.exec(n),o=u0.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){uI(t,void 0===c?new $W(a,i,e):new lI(a,i,e));break}{let d=t.map[a];void 0===d&&(d=new cI(a),uI(t,d)),t=d}}}function Ho(i,e){this.seq=[],this.map={};const t=i.getProgramParameter(e,35718);for(let n=0;n<t;++n){const r=i.getActiveUniform(e,n);qW(r,i.getUniformLocation(e,r.name),this)}}function dI(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}Ho.prototype.setValue=function(i,e,t,n){const r=this.map[e];void 0!==r&&r.setValue(i,t,n)},Ho.prototype.setOptional=function(i,e,t){const n=e[t];void 0!==n&&this.setValue(i,t,n)},Ho.upload=function(i,e,t,n){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];!1!==a.needsUpdate&&o.setValue(i,a.value,n)}},Ho.seqWithValue=function(i,e){const t=[];for(let n=0,r=i.length;n!==r;++n){const s=i[n];s.id in e&&t.push(s)}return t};let YW=0;function hI(i){switch(i){case Ui:return["Linear","( value )"];case Ra:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function pI(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();return n&&""===r?"":t.toUpperCase()+"\n\n"+r+"\n\n"+function XW(i){const e=i.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(i.getShaderSource(e))}function za(i,e){const t=hI(e);return"vec4 "+i+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function ZW(i,e){const t=hI(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function KW(i,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function $d(i){return""!==i}function fI(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function mI(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const t$=/^[ \t]*#include +<([\w\d./]+)>/gm;function d0(i){return i.replace(t$,n$)}function n$(i,e){const t=Tt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return d0(t)}const i$=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,r$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gI(i){return i.replace(r$,_I).replace(i$,s$)}function s$(i,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_I(0,e,t,n)}function _I(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function yI(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function u$(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function o$(i){let e="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function a$(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function l$(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),d=function c$(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=i.gammaFactor>0?i.gammaFactor:1,p=t.isWebGL2?"":function QW(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($d).join("\n")}(t),f=function JW(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),m=r.createProgram();let y,g,_=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(y=[f].filter($d).join("\n"),y.length>0&&(y+="\n"),g=[p,f].filter($d).join("\n"),g.length>0&&(g+="\n")):(y=[yI(t),"#define SHADER_NAME "+t.shaderName,f,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($d).join("\n"),g=[p,yI(t),"#define SHADER_NAME "+t.shaderName,f,"#define GAMMA_FACTOR "+h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Tt.tonemapping_pars_fragment:"",0!==t.toneMapping?KW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===us?"#define OPAQUE":"",Tt.encodings_pars_fragment,t.map?za("mapTexelToLinear",t.mapEncoding):"",t.matcap?za("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?za("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?za("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?za("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?za("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?za("lightMapTexelToLinear",t.lightMapEncoding):"",ZW("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter($d).join("\n")),o=d0(o),o=fI(o,t),o=mI(o,t),a=d0(a),a=fI(a,t),a=mI(a,t),o=gI(o),a=gI(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(_="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,g=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const b=_+g+a,x=dI(r,35633,_+y+o),S=dI(r,35632,b);if(r.attachShader(m,x),r.attachShader(m,S),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),i.debug.checkShaderErrors){const z=r.getProgramInfoLog(m).trim(),B=r.getShaderInfoLog(x).trim(),R=r.getShaderInfoLog(S).trim();let J=!0,V=!0;if(!1===r.getProgramParameter(m,35714)){J=!1;const H=pI(r,x,"vertex"),j=pI(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+z+"\n"+H+"\n"+j)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===B||""===R)&&(V=!1);V&&(this.diagnostics={runnable:J,programLog:z,vertexShader:{log:B,prefix:y},fragmentShader:{log:R,prefix:g}})}let w,I;return r.deleteShader(x),r.deleteShader(S),this.getUniforms=function(){return void 0===w&&(w=new Ho(r,m)),w},this.getAttributes=function(){return void 0===I&&(I=function e$(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,m)),I},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=YW++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=S,this}function d$(i,e,t,n,r,s,o){const a=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,d=r.maxVertexUniforms,h=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function g(w){let I;return w&&w.isTexture?I=w.encoding:w&&w.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),I=w.texture.encoding):I=Ui,I}return{getParameters:function _(w,I,z,B,R){const J=B.fog,H=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?B.environment:null)),j=f[w.type],P=R.isSkinnedMesh?function y(w){const z=w.skeleton.bones;if(u)return 1024;{const R=Math.floor((d-20)/4),J=Math.min(R,z.length);return J<z.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+z.length+" bones. This GPU supports "+J+"."),0):J}}(R):0;let F,q;if(null!==w.precision&&(p=r.getMaxPrecision(w.precision),p!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",p,"instead.")),j){const ye=ds[j];F=ye.vertexShader,q=ye.fragmentShader}else F=w.vertexShader,q=w.fragmentShader;const ie=i.getRenderTarget(),Y=w.alphaTest>0,ee=w.clearcoat>0;return{isWebGL2:l,shaderID:j,shaderName:w.type,vertexShader:F,fragmentShader:q,defines:w.defines,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:p,instancing:!0===R.isInstancedMesh,instancingColor:!0===R.isInstancedMesh&&null!==R.instanceColor,supportsVertexTextures:h,outputEncoding:null!==ie?g(ie.texture):i.outputEncoding,map:!!w.map,mapEncoding:g(w.map),matcap:!!w.matcap,matcapEncoding:g(w.matcap),envMap:!!H,envMapMode:H&&H.mapping,envMapEncoding:g(H),envMapCubeUV:!!H&&(306===H.mapping||307===H.mapping),lightMap:!!w.lightMap,lightMapEncoding:g(w.lightMap),aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,emissiveMapEncoding:g(w.emissiveMap),bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:1===w.normalMapType,tangentSpaceNormalMap:0===w.normalMapType,clearcoat:ee,clearcoatMap:ee&&!!w.clearcoatMap,clearcoatRoughnessMap:ee&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:ee&&!!w.clearcoatNormalMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,specularColorMapEncoding:g(w.specularColorMap),alphaMap:!!w.alphaMap,alphaTest:Y,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenColorMapEncoding:g(w.sheenColorMap),sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!R.geometry&&!!R.geometry.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!R.geometry&&!!R.geometry.attributes.color&&4===R.geometry.attributes.color.itemSize,vertexUvs:!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatMap||!!w.clearcoatRoughnessMap||!!w.clearcoatNormalMap||!!w.displacementMap||!!w.transmissionMap||!!w.thicknessMap||!!w.specularIntensityMap||!!w.specularColorMap||!!w.sheenColorMap||w.sheenRoughnessMap,uvsVertexOnly:!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatNormalMap||w.transmission>0||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheen>0||w.sheenColorMap||w.sheenRoughnessMap||!w.displacementMap),fog:!!J,useFog:w.fog,fogExp2:J&&J.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===R.isSkinnedMesh&&P>0,maxBones:P,useVertexTexture:u,morphTargets:!!R.geometry&&!!R.geometry.morphAttributes.position,morphNormals:!!R.geometry&&!!R.geometry.morphAttributes.normal,morphTargetsCount:R.geometry&&R.geometry.morphAttributes.position?R.geometry.morphAttributes.position.length:0,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:w.format,dithering:w.dithering,shadowMapEnabled:i.shadowMap.enabled&&z.length>0,shadowMapType:i.shadowMap.type,toneMapping:w.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,depthPacking:void 0!==w.depthPacking&&w.depthPacking,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||n.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function v(w){const I=[];if(w.shaderID?I.push(w.shaderID):(I.push(TA(w.fragmentShader)),I.push(TA(w.vertexShader))),void 0!==w.defines)for(const z in w.defines)I.push(z),I.push(w.defines[z]);if(!1===w.isRawShaderMaterial){for(let z=0;z<m.length;z++)I.push(w[m[z]]);I.push(i.outputEncoding),I.push(i.gammaFactor)}return I.push(w.customProgramCacheKey),I.join()},getUniforms:function b(w){const I=f[w.type];let z;return z=I?z9.clone(ds[I].uniforms):w.uniforms,z},acquireProgram:function x(w,I){let z;for(let B=0,R=a.length;B<R;B++){const J=a[B];if(J.cacheKey===I){z=J,++z.usedTimes;break}}return void 0===z&&(z=new u$(i,I,w,s),a.push(z)),z},releaseProgram:function S(w){if(0==--w.usedTimes){const I=a.indexOf(w);a[I]=a[a.length-1],a.pop(),w.destroy()}},programs:a}}function h$(){let i=new WeakMap;return{get:function e(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function t(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function p$(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.program!==e.program?i.program.id-e.program.id:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function vI(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function bI(i){const e=[];let t=0;const n=[],r=[],s=[],o={id:-1};function l(p,f,m,y,g,_){let v=e[t];const b=i.get(m);return void 0===v?(v={id:p.id,object:p,geometry:f,material:m,program:b.program||o,groupOrder:y,renderOrder:p.renderOrder,z:g,group:_},e[t]=v):(v.id=p.id,v.object=p,v.geometry=f,v.material=m,v.program=b.program||o,v.groupOrder=y,v.renderOrder=p.renderOrder,v.z=g,v.group=_),t++,v}return{opaque:n,transmissive:r,transparent:s,init:function a(){t=0,n.length=0,r.length=0,s.length=0},push:function c(p,f,m,y,g,_){const v=l(p,f,m,y,g,_);m.transmission>0?r.push(v):!0===m.transparent?s.push(v):n.push(v)},unshift:function u(p,f,m,y,g,_){const v=l(p,f,m,y,g,_);m.transmission>0?r.unshift(v):!0===m.transparent?s.unshift(v):n.unshift(v)},finish:function h(){for(let p=t,f=e.length;p<f;p++){const m=e[p];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.program=null,m.group=null}},sort:function d(p,f){n.length>1&&n.sort(p||p$),r.length>1&&r.sort(f||vI),s.length>1&&s.sort(f||vI)}}}function f$(i){let e=new WeakMap;return{get:function t(r,s){let o;return!1===e.has(r)?(o=new bI(i),e.set(r,[o])):s>=e.get(r).length?(o=new bI(i),e.get(r).push(o)):o=e.get(r)[s],o},dispose:function n(){e=new WeakMap}}}function m$(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new M,color:new _e};break;case"SpotLight":t={position:new M,direction:new M,color:new _e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new M,color:new _e,distance:0,decay:0};break;case"HemisphereLight":t={direction:new M,skyColor:new _e,groundColor:new _e};break;case"RectAreaLight":t={color:new _e,position:new M,halfWidth:new M,halfHeight:new M}}return i[e.id]=t,t}}}let _$=0;function y$(i,e){return(e.castShadow?1:0)-(i.castShadow?1:0)}function v$(i,e){const t=new m$,n=function g$(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new M);const s=new M,o=new Oe,a=new Oe;return{setup:function l(u,d){let h=0,p=0,f=0;for(let z=0;z<9;z++)r.probe[z].set(0,0,0);let m=0,y=0,g=0,_=0,v=0,b=0,x=0,S=0;u.sort(y$);const w=!0!==d?Math.PI:1;for(let z=0,B=u.length;z<B;z++){const R=u[z],J=R.color,V=R.intensity,H=R.distance,j=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)h+=J.r*V*w,p+=J.g*V*w,f+=J.b*V*w;else if(R.isLightProbe)for(let P=0;P<9;P++)r.probe[P].addScaledVector(R.sh.coefficients[P],V);else if(R.isDirectionalLight){const P=t.get(R);if(P.color.copy(R.color).multiplyScalar(R.intensity*w),R.castShadow){const F=R.shadow,q=n.get(R);q.shadowBias=F.bias,q.shadowNormalBias=F.normalBias,q.shadowRadius=F.radius,q.shadowMapSize=F.mapSize,r.directionalShadow[m]=q,r.directionalShadowMap[m]=j,r.directionalShadowMatrix[m]=R.shadow.matrix,b++}r.directional[m]=P,m++}else if(R.isSpotLight){const P=t.get(R);if(P.position.setFromMatrixPosition(R.matrixWorld),P.color.copy(J).multiplyScalar(V*w),P.distance=H,P.coneCos=Math.cos(R.angle),P.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),P.decay=R.decay,R.castShadow){const F=R.shadow,q=n.get(R);q.shadowBias=F.bias,q.shadowNormalBias=F.normalBias,q.shadowRadius=F.radius,q.shadowMapSize=F.mapSize,r.spotShadow[g]=q,r.spotShadowMap[g]=j,r.spotShadowMatrix[g]=R.shadow.matrix,S++}r.spot[g]=P,g++}else if(R.isRectAreaLight){const P=t.get(R);P.color.copy(J).multiplyScalar(V),P.halfWidth.set(.5*R.width,0,0),P.halfHeight.set(0,.5*R.height,0),r.rectArea[_]=P,_++}else if(R.isPointLight){const P=t.get(R);if(P.color.copy(R.color).multiplyScalar(R.intensity*w),P.distance=R.distance,P.decay=R.decay,R.castShadow){const F=R.shadow,q=n.get(R);q.shadowBias=F.bias,q.shadowNormalBias=F.normalBias,q.shadowRadius=F.radius,q.shadowMapSize=F.mapSize,q.shadowCameraNear=F.camera.near,q.shadowCameraFar=F.camera.far,r.pointShadow[y]=q,r.pointShadowMap[y]=j,r.pointShadowMatrix[y]=R.shadow.matrix,x++}r.point[y]=P,y++}else if(R.isHemisphereLight){const P=t.get(R);P.skyColor.copy(R.color).multiplyScalar(V*w),P.groundColor.copy(R.groundColor).multiplyScalar(V*w),r.hemi[v]=P,v++}}_>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ce.LTC_FLOAT_1,r.rectAreaLTC2=Ce.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ce.LTC_HALF_1,r.rectAreaLTC2=Ce.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=p,r.ambient[2]=f;const I=r.hash;(I.directionalLength!==m||I.pointLength!==y||I.spotLength!==g||I.rectAreaLength!==_||I.hemiLength!==v||I.numDirectionalShadows!==b||I.numPointShadows!==x||I.numSpotShadows!==S)&&(r.directional.length=m,r.spot.length=g,r.rectArea.length=_,r.point.length=y,r.hemi.length=v,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotShadowMatrix.length=S,I.directionalLength=m,I.pointLength=y,I.spotLength=g,I.rectAreaLength=_,I.hemiLength=v,I.numDirectionalShadows=b,I.numPointShadows=x,I.numSpotShadows=S,r.version=_$++)},setupView:function c(u,d){let h=0,p=0,f=0,m=0,y=0;const g=d.matrixWorldInverse;for(let _=0,v=u.length;_<v;_++){const b=u[_];if(b.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(g),h++}else if(b.isSpotLight){const x=r.spot[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(g),f++}else if(b.isRectAreaLight){const x=r.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(g),a.identity(),o.copy(b.matrixWorld),o.premultiply(g),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const x=r.point[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(g),p++}else if(b.isHemisphereLight){const x=r.hemi[y];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(g),x.direction.normalize(),y++}}},state:r}}function wI(i,e){const t=new v$(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(n,d)},setupLightsView:function c(d){t.setupView(n,d)},pushLight:function o(d){n.push(d)},pushShadow:function a(d){r.push(d)}}}function b$(i,e){let t=new WeakMap;return{get:function n(s,o=0){let a;return!1===t.has(s)?(a=new wI(i,e),t.set(s,[a])):o>=t.get(s).length?(a=new wI(i,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function r(){t=new WeakMap}}}class h0 extends Un{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}h0.prototype.isMeshDepthMaterial=!0;class p0 extends Un{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new M,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function xI(i,e,t){let n=new gm;const r=new Q,s=new Q,o=new Xt,a=new h0({depthPacking:3201}),l=new p0,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Qs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Q},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new je;f.setAttribute("position",new Zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new qt(f,h),y=this;function g(b,x){const S=e.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,p.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,i.setRenderTarget(b.mapPass),i.clear(),i.renderBufferDirect(x,null,S,h,m,null),p.uniforms.shadow_pass.value=b.mapPass.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,i.setRenderTarget(b.map),i.clear(),i.renderBufferDirect(x,null,S,p,m,null)}function _(b,x,S,w,I,z,B){let R=null;const J=!0===w.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(R=void 0!==J?J:!0===w.isPointLight?l:a,i.localClippingEnabled&&!0===S.clipShadows&&0!==S.clippingPlanes.length||S.displacementMap&&0!==S.displacementScale||S.alphaMap&&S.alphaTest>0){const V=R.uuid,H=S.uuid;let j=c[V];void 0===j&&(j={},c[V]=j);let P=j[H];void 0===P&&(P=R.clone(),j[H]=P),R=P}return R.visible=S.visible,R.wireframe=S.wireframe,R.side=3===B?null!==S.shadowSide?S.shadowSide:S.side:null!==S.shadowSide?S.shadowSide:d[S.side],R.alphaMap=S.alphaMap,R.alphaTest=S.alphaTest,R.clipShadows=S.clipShadows,R.clippingPlanes=S.clippingPlanes,R.clipIntersection=S.clipIntersection,R.displacementMap=S.displacementMap,R.displacementScale=S.displacementScale,R.displacementBias=S.displacementBias,R.wireframeLinewidth=S.wireframeLinewidth,R.linewidth=S.linewidth,!0===w.isPointLight&&!0===R.isMeshDistanceMaterial&&(R.referencePosition.setFromMatrixPosition(w.matrixWorld),R.nearDistance=I,R.farDistance=z),R}function v(b,x,S,w,I){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===I)&&(!b.frustumCulled||n.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,b.matrixWorld);const R=e.update(b),J=b.material;if(Array.isArray(J)){const V=R.groups;for(let H=0,j=V.length;H<j;H++){const P=V[H],F=J[P.materialIndex];if(F&&F.visible){const q=_(b,0,F,w,S.near,S.far,I);i.renderBufferDirect(S,null,R,q,b,P)}}}else if(J.visible){const V=_(b,0,J,w,S.near,S.far,I);i.renderBufferDirect(S,null,R,V,b,null)}}const B=b.children;for(let R=0,J=B.length;R<J;R++)v(B[R],x,S,w,I)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,S){if(!1===y.enabled||!1===y.autoUpdate&&!1===y.needsUpdate||0===b.length)return;const w=i.getRenderTarget(),I=i.getActiveCubeFace(),z=i.getActiveMipmapLevel(),B=i.state;B.setBlending(0),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let R=0,J=b.length;R<J;R++){const V=b[R],H=V.shadow;if(void 0===H){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(!1===H.autoUpdate&&!1===H.needsUpdate)continue;r.copy(H.mapSize);const j=H.getFrameExtents();if(r.multiply(j),s.copy(H.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/j.x),r.x=s.x*j.x,H.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/j.y),r.y=s.y*j.y,H.mapSize.y=s.y)),null===H.map&&!H.isPointLightShadow&&3===this.type){const F={minFilter:Bn,magFilter:Bn,format:wi};H.map=new Cr(r.x,r.y,F),H.map.texture.name=V.name+".shadowMap",H.mapPass=new Cr(r.x,r.y,F),H.camera.updateProjectionMatrix()}null===H.map&&(H.map=new Cr(r.x,r.y,{minFilter:pn,magFilter:pn,format:wi}),H.map.texture.name=V.name+".shadowMap",H.camera.updateProjectionMatrix()),i.setRenderTarget(H.map),i.clear();const P=H.getViewportCount();for(let F=0;F<P;F++){const q=H.getViewport(F);o.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),B.viewport(o),H.updateMatrices(V,F),n=H.getFrustum(),v(x,S,H.camera,V,this.type)}!H.isPointLightShadow&&3===this.type&&g(H,S),H.needsUpdate=!1}y.needsUpdate=!1,i.setRenderTarget(w,I,z)}}function M$(i,e,t){const n=t.isWebGL2,a=new function r(){let N=!1;const xe=new Xt;let ae=null;const Ie=new Xt(0,0,0,0);return{setMask:function(Me){ae!==Me&&!N&&(i.colorMask(Me,Me,Me,Me),ae=Me)},setLocked:function(Me){N=Me},setClear:function(Me,Ne,Ge,Mt,kn){!0===kn&&(Me*=Mt,Ne*=Mt,Ge*=Mt),xe.set(Me,Ne,Ge,Mt),!1===Ie.equals(xe)&&(i.clearColor(Me,Ne,Ge,Mt),Ie.copy(xe))},reset:function(){N=!1,ae=null,Ie.set(-1,0,0,0)}}},l=new function s(){let N=!1,xe=null,ae=null,Ie=null;return{setTest:function(Me){Me?ye(2929):fe(2929)},setMask:function(Me){xe!==Me&&!N&&(i.depthMask(Me),xe=Me)},setFunc:function(Me){if(ae!==Me){if(Me)switch(Me){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}else i.depthFunc(515);ae=Me}},setLocked:function(Me){N=Me},setClear:function(Me){Ie!==Me&&(i.clearDepth(Me),Ie=Me)},reset:function(){N=!1,xe=null,ae=null,Ie=null}}},c=new function o(){let N=!1,xe=null,ae=null,Ie=null,Me=null,Ne=null,Ge=null,Mt=null,kn=null;return{setTest:function(Gt){N||(Gt?ye(2960):fe(2960))},setMask:function(Gt){xe!==Gt&&!N&&(i.stencilMask(Gt),xe=Gt)},setFunc:function(Gt,Yr,Xr){(ae!==Gt||Ie!==Yr||Me!==Xr)&&(i.stencilFunc(Gt,Yr,Xr),ae=Gt,Ie=Yr,Me=Xr)},setOp:function(Gt,Yr,Xr){(Ne!==Gt||Ge!==Yr||Mt!==Xr)&&(i.stencilOp(Gt,Yr,Xr),Ne=Gt,Ge=Yr,Mt=Xr)},setLocked:function(Gt){N=Gt},setClear:function(Gt){kn!==Gt&&(i.clearStencil(Gt),kn=Gt)},reset:function(){N=!1,xe=null,ae=null,Ie=null,Me=null,Ne=null,Ge=null,Mt=null,kn=null}}};let u={},d={},h=null,p=!1,f=null,m=null,y=null,g=null,_=null,v=null,b=null,x=!1,S=null,w=null,I=null,z=null,B=null;const R=i.getParameter(35661);let J=!1,V=0;const H=i.getParameter(7938);-1!==H.indexOf("WebGL")?(V=parseFloat(/^WebGL (\d)/.exec(H)[1]),J=V>=1):-1!==H.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),J=V>=2);let j=null,P={};const F=i.getParameter(3088),q=i.getParameter(2978),ie=(new Xt).fromArray(F),Y=(new Xt).fromArray(q);function ee(N,xe,ae){const Ie=new Uint8Array(4),Me=i.createTexture();i.bindTexture(N,Me),i.texParameteri(N,10241,9728),i.texParameteri(N,10240,9728);for(let Ne=0;Ne<ae;Ne++)i.texImage2D(xe+Ne,0,6408,1,1,0,6408,5121,Ie);return Me}const ge={};function ye(N){!0!==u[N]&&(i.enable(N),u[N]=!0)}function fe(N){!1!==u[N]&&(i.disable(N),u[N]=!1)}ge[3553]=ee(3553,3553,1),ge[34067]=ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ye(2929),l.setFunc(3),Qe(!1),K(1),ye(2884),he(0);const U={100:32774,101:32778,102:32779};if(n)U[103]=32775,U[104]=32776;else{const N=e.get("EXT_blend_minmax");null!==N&&(U[103]=N.MIN_EXT,U[104]=N.MAX_EXT)}const le={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function he(N,xe,ae,Ie,Me,Ne,Ge,Mt){if(0!==N){if(!1===p&&(ye(3042),p=!0),5===N)Me=Me||xe,Ne=Ne||ae,Ge=Ge||Ie,(xe!==m||Me!==_)&&(i.blendEquationSeparate(U[xe],U[Me]),m=xe,_=Me),(ae!==y||Ie!==g||Ne!==v||Ge!==b)&&(i.blendFuncSeparate(le[ae],le[Ie],le[Ne],le[Ge]),y=ae,g=Ie,v=Ne,b=Ge),f=N,x=null;else if(N!==f||Mt!==x){if((100!==m||100!==_)&&(i.blendEquation(32774),m=100,_=100),Mt)switch(N){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,0,769,771);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",N)}else switch(N){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFunc(0,769);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",N)}y=null,g=null,v=null,b=null,f=N,x=Mt}}else!0===p&&(fe(3042),p=!1)}function Qe(N){S!==N&&(i.frontFace(N?2304:2305),S=N)}function K(N){0!==N?(ye(2884),N!==w&&i.cullFace(1===N?1029:2===N?1028:1032)):fe(2884),w=N}function me(N,xe,ae){N?(ye(32823),(z!==xe||B!==ae)&&(i.polygonOffset(xe,ae),z=xe,B=ae)):fe(32823)}function Ae(N){void 0===N&&(N=33984+R-1),j!==N&&(i.activeTexture(N),j=N)}return{buffers:{color:a,depth:l,stencil:c},enable:ye,disable:fe,bindFramebuffer:function xt(N,xe){return d[N]!==xe&&(i.bindFramebuffer(N,xe),d[N]=xe,n&&(36009===N&&(d[36160]=xe),36160===N&&(d[36009]=xe)),!0)},useProgram:function oe(N){return h!==N&&(i.useProgram(N),h=N,!0)},setBlending:he,setMaterial:function Re(N,xe){2===N.side?fe(2884):ye(2884);let ae=1===N.side;xe&&(ae=!ae),Qe(ae),1===N.blending&&!1===N.transparent?he(0):he(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.premultipliedAlpha),l.setFunc(N.depthFunc),l.setTest(N.depthTest),l.setMask(N.depthWrite),a.setMask(N.colorWrite);const Ie=N.stencilWrite;c.setTest(Ie),Ie&&(c.setMask(N.stencilWriteMask),c.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),c.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),me(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits),!0===N.alphaToCoverage?ye(32926):fe(32926)},setFlipSided:Qe,setCullFace:K,setLineWidth:function pe(N){N!==I&&(J&&i.lineWidth(N),I=N)},setPolygonOffset:me,setScissorTest:function Le(N){N?ye(3089):fe(3089)},activeTexture:Ae,bindTexture:function ht(N,xe){null===j&&Ae();let ae=P[j];void 0===ae&&(ae={type:void 0,texture:void 0},P[j]=ae),(ae.type!==N||ae.texture!==xe)&&(i.bindTexture(N,xe||ge[N]),ae.type=N,ae.texture=xe)},unbindTexture:function pt(){const N=P[j];void 0!==N&&void 0!==N.type&&(i.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)},compressedTexImage2D:function kt(){try{i.compressedTexImage2D.apply(i,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texImage2D:function D(){try{i.texImage2D.apply(i,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texImage3D:function se(){try{i.texImage3D.apply(i,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texStorage2D:function k(){try{i.texStorage2D.apply(i,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texSubImage2D:function un(){try{i.texSubImage2D.apply(i,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},scissor:function re(N){!1===ie.equals(N)&&(i.scissor(N.x,N.y,N.z,N.w),ie.copy(N))},viewport:function Ue(N){!1===Y.equals(N)&&(i.viewport(N.x,N.y,N.z,N.w),Y.copy(N))},reset:function ze(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},j=null,P={},d={},h=null,p=!1,f=null,m=null,y=null,g=null,_=null,v=null,b=null,x=!1,S=null,w=null,I=null,z=null,B=null,ie.set(0,0,i.canvas.width,i.canvas.height),Y.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function C$(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,f=new WeakMap;let m,y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function g(k,D){return y?new OffscreenCanvas(k,D):Kf("canvas")}function _(k,D,se,re){let Ue=1;if((k.width>re||k.height>re)&&(Ue=re/Math.max(k.width,k.height)),Ue<1||!0===D){if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const ze=D?EA:Math.floor,N=ze(Ue*k.width),xe=ze(Ue*k.height);void 0===m&&(m=g(N,xe));const ae=se?g(N,xe):m;return ae.width=N,ae.height=xe,ae.getContext("2d").drawImage(k,0,0,N,xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+N+"x"+xe+")."),ae}return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k}return k}function v(k){return Ab(k.width)&&Ab(k.height)}function x(k,D){return k.generateMipmaps&&D&&k.minFilter!==pn&&k.minFilter!==Bn}function S(k){i.generateMipmap(k)}function w(k,D,se){if(!1===a)return D;if(null!==k){if(void 0!==i[k])return i[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let re=D;return 6403===D&&(5126===se&&(re=33326),5131===se&&(re=33325),5121===se&&(re=33321)),6407===D&&(5126===se&&(re=34837),5131===se&&(re=34843),5121===se&&(re=32849)),6408===D&&(5126===se&&(re=34836),5131===se&&(re=34842),5121===se&&(re=32856)),(33325===re||33326===re||34842===re||34836===re)&&e.get("EXT_color_buffer_float"),re}function z(k){return k===pn||1004===k||1005===k?9728:9729}function B(k){const D=k.target;D.removeEventListener("dispose",B),function J(k){const D=n.get(k);void 0!==D.__webglInit&&(i.deleteTexture(D.__webglTexture),n.remove(k))}(D),D.isVideoTexture&&f.delete(D),o.memory.textures--}function R(k){const D=k.target;D.removeEventListener("dispose",R),function V(k){const D=k.texture,se=n.get(k),re=n.get(D);if(k){if(void 0!==re.__webglTexture&&(i.deleteTexture(re.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++)i.deleteFramebuffer(se.__webglFramebuffer[Ue]),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer[Ue]);else i.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&i.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer&&i.deleteRenderbuffer(se.__webglColorRenderbuffer),se.__webglDepthRenderbuffer&&i.deleteRenderbuffer(se.__webglDepthRenderbuffer);if(k.isWebGLMultipleRenderTargets)for(let Ue=0,ze=D.length;Ue<ze;Ue++){const N=n.get(D[Ue]);N.__webglTexture&&(i.deleteTexture(N.__webglTexture),o.memory.textures--),n.remove(D[Ue])}n.remove(D),n.remove(k)}}(D)}let H=0;function F(k,D){const se=n.get(k);if(k.isVideoTexture&&function Ae(k){const D=o.render.frame;f.get(k)!==D&&(f.set(k,D),k.update())}(k),k.version>0&&se.__version!==k.version){const re=k.image;if(void 0===re)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==re.complete)return void xt(se,k,D);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+D),t.bindTexture(3553,se.__webglTexture)}function Y(k,D){const se=n.get(k);k.version>0&&se.__version!==k.version?function oe(k,D,se){if(6!==D.image.length)return;fe(k,D),t.activeTexture(33984+se),t.bindTexture(34067,k.__webglTexture),i.pixelStorei(37440,D.flipY),i.pixelStorei(37441,D.premultiplyAlpha),i.pixelStorei(3317,D.unpackAlignment),i.pixelStorei(37443,0);const re=D&&(D.isCompressedTexture||D.image[0].isCompressedTexture),Ue=D.image[0]&&D.image[0].isDataTexture,ze=[];for(let Ge=0;Ge<6;Ge++)ze[Ge]=re||Ue?Ue?D.image[Ge].image:D.image[Ge]:_(D.image[Ge],!1,!0,c);const xe=v(ze[0])||a,ae=s.convert(D.format),Ie=s.convert(D.type),Me=w(D.internalFormat,ae,Ie);let Ne;if(ye(34067,D,xe),re)for(let Ge=0;Ge<6;Ge++){Ne=ze[Ge].mipmaps;for(let Mt=0;Mt<Ne.length;Mt++){const kn=Ne[Mt];D.format!==wi&&D.format!==us?null!==ae?t.compressedTexImage2D(34069+Ge,Mt,Me,kn.width,kn.height,0,kn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Ge,Mt,Me,kn.width,kn.height,0,ae,Ie,kn.data)}}else{Ne=D.mipmaps;for(let Ge=0;Ge<6;Ge++)if(Ue){t.texImage2D(34069+Ge,0,Me,ze[Ge].width,ze[Ge].height,0,ae,Ie,ze[Ge].data);for(let Mt=0;Mt<Ne.length;Mt++){const Gt=Ne[Mt].image[Ge].image;t.texImage2D(34069+Ge,Mt+1,Me,Gt.width,Gt.height,0,ae,Ie,Gt.data)}}else{t.texImage2D(34069+Ge,0,Me,ae,Ie,ze[Ge]);for(let Mt=0;Mt<Ne.length;Mt++)t.texImage2D(34069+Ge,Mt+1,Me,ae,Ie,Ne[Mt].image[Ge])}}x(D,xe)&&S(34067),k.__version=D.version,D.onUpdate&&D.onUpdate(D)}(se,k,D):(t.activeTexture(33984+D),t.bindTexture(34067,se.__webglTexture))}const ee={[Ia]:10497,[Tn]:33071,1002:33648},ge={[pn]:9728,1004:9984,1005:9986,[Bn]:9729,1007:9985,[Do]:9987};function ye(k,D,se){if(se?(i.texParameteri(k,10242,ee[D.wrapS]),i.texParameteri(k,10243,ee[D.wrapT]),(32879===k||35866===k)&&i.texParameteri(k,32882,ee[D.wrapR]),i.texParameteri(k,10240,ge[D.magFilter]),i.texParameteri(k,10241,ge[D.minFilter])):(i.texParameteri(k,10242,33071),i.texParameteri(k,10243,33071),(32879===k||35866===k)&&i.texParameteri(k,32882,33071),(D.wrapS!==Tn||D.wrapT!==Tn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(k,10240,z(D.magFilter)),i.texParameteri(k,10241,z(D.minFilter)),D.minFilter!==pn&&D.minFilter!==Bn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const re=e.get("EXT_texture_filter_anisotropic");if(D.type===$s&&!1===e.has("OES_texture_float_linear")||!1===a&&D.type===mc&&!1===e.has("OES_texture_half_float_linear"))return;(D.anisotropy>1||n.get(D).__currentAnisotropy)&&(i.texParameterf(k,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy)}}function fe(k,D){void 0===k.__webglInit&&(k.__webglInit=!0,D.addEventListener("dispose",B),k.__webglTexture=i.createTexture(),o.memory.textures++)}function xt(k,D,se){let re=3553;D.isDataTexture2DArray&&(re=35866),D.isDataTexture3D&&(re=32879),fe(k,D),t.activeTexture(33984+se),t.bindTexture(re,k.__webglTexture),i.pixelStorei(37440,D.flipY),i.pixelStorei(37441,D.premultiplyAlpha),i.pixelStorei(3317,D.unpackAlignment),i.pixelStorei(37443,0);const Ue=function b(k){return!a&&(k.wrapS!==Tn||k.wrapT!==Tn||k.minFilter!==pn&&k.minFilter!==Bn)}(D)&&!1===v(D.image),ze=_(D.image,Ue,!1,u),N=v(ze)||a,xe=s.convert(D.format);let Me,ae=s.convert(D.type),Ie=w(D.internalFormat,xe,ae);ye(re,D,N);const Ne=D.mipmaps;if(D.isDepthTexture)Ie=6402,a?Ie=D.type===$s?36012:1014===D.type?33190:D.type===gc?35056:33189:D.type===$s&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===ka&&6402===Ie&&D.type!==Rd&&1014!==D.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Rd,ae=s.convert(D.type)),D.format===_c&&6402===Ie&&(Ie=34041,D.type!==gc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=gc,ae=s.convert(D.type))),t.texImage2D(3553,0,Ie,ze.width,ze.height,0,xe,ae,null);else if(D.isDataTexture)if(Ne.length>0&&N){for(let Ge=0,Mt=Ne.length;Ge<Mt;Ge++)Me=Ne[Ge],t.texImage2D(3553,Ge,Ie,Me.width,Me.height,0,xe,ae,Me.data);D.generateMipmaps=!1}else t.texImage2D(3553,0,Ie,ze.width,ze.height,0,xe,ae,ze.data);else if(D.isCompressedTexture)for(let Ge=0,Mt=Ne.length;Ge<Mt;Ge++)Me=Ne[Ge],D.format!==wi&&D.format!==us?null!==xe?t.compressedTexImage2D(3553,Ge,Ie,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Ge,Ie,Me.width,Me.height,0,xe,ae,Me.data);else if(D.isDataTexture2DArray)t.texImage3D(35866,0,Ie,ze.width,ze.height,ze.depth,0,xe,ae,ze.data);else if(D.isDataTexture3D)t.texImage3D(32879,0,Ie,ze.width,ze.height,ze.depth,0,xe,ae,ze.data);else{const Ge=function I(k,D,se){return!0===x(k,se)?Math.log2(Math.max(D.width,D.height))+1:k.mipmaps.length>0?k.mipmaps.length:1}(D,ze,N),Mt=a&&!0!==D.isVideoTexture,kn=void 0===k.__version;if(Ne.length>0&&N){Mt&&kn&&t.texStorage2D(3553,Ge,Ie,Ne[0].width,Ne[0].height);for(let Gt=0,Yr=Ne.length;Gt<Yr;Gt++)Me=Ne[Gt],Mt?t.texSubImage2D(3553,Gt,0,0,xe,ae,Me):t.texImage2D(3553,Gt,Ie,xe,ae,Me);D.generateMipmaps=!1}else Mt?(kn&&t.texStorage2D(3553,Ge,Ie,ze.width,ze.height),t.texSubImage2D(3553,0,0,0,xe,ae,ze)):t.texImage2D(3553,0,Ie,xe,ae,ze)}x(D,N)&&S(re),k.__version=D.version,D.onUpdate&&D.onUpdate(D)}function U(k,D,se,re,Ue){const ze=s.convert(se.format),N=s.convert(se.type),xe=w(se.internalFormat,ze,N);n.get(D).__hasExternalTextures||(32879===Ue||35866===Ue?t.texImage3D(Ue,0,xe,D.width,D.height,D.depth,0,ze,N,null):t.texImage2D(Ue,0,xe,D.width,D.height,0,ze,N,null)),t.bindFramebuffer(36160,k),D.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,re,Ue,n.get(se).__webglTexture,0,Le(D)):i.framebufferTexture2D(36160,re,Ue,n.get(se).__webglTexture,0),t.bindFramebuffer(36160,null)}function le(k,D,se){if(i.bindRenderbuffer(36161,k),D.depthBuffer&&!D.stencilBuffer){let re=33189;if(se||D.useRenderToTexture){const Ue=D.depthTexture;Ue&&Ue.isDepthTexture&&(Ue.type===$s?re=36012:1014===Ue.type&&(re=33190));const ze=Le(D);D.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,ze,re,D.width,D.height):i.renderbufferStorageMultisample(36161,ze,re,D.width,D.height)}else i.renderbufferStorage(36161,re,D.width,D.height);i.framebufferRenderbuffer(36160,36096,36161,k)}else if(D.depthBuffer&&D.stencilBuffer){const re=Le(D);se&&D.useRenderbuffer?i.renderbufferStorageMultisample(36161,re,35056,D.width,D.height):D.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,re,35056,D.width,D.height):i.renderbufferStorage(36161,34041,D.width,D.height),i.framebufferRenderbuffer(36160,33306,36161,k)}else{const re=!0===D.isWebGLMultipleRenderTargets?D.texture[0]:D.texture,Ue=s.convert(re.format),ze=s.convert(re.type),N=w(re.internalFormat,Ue,ze),xe=Le(D);se&&D.useRenderbuffer?i.renderbufferStorageMultisample(36161,xe,N,D.width,D.height):D.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,xe,N,D.width,D.height):i.renderbufferStorage(36161,N,D.width,D.height)}i.bindRenderbuffer(36161,null)}function Re(k){const D=n.get(k),se=!0===k.isWebGLCubeRenderTarget;if(k.depthTexture&&!D.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");!function he(k,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,k),!D.depthTexture||!D.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),F(D.depthTexture,0);const re=n.get(D.depthTexture).__webglTexture,Ue=Le(D);if(D.depthTexture.format===ka)D.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,re,0,Ue):i.framebufferTexture2D(36160,36096,3553,re,0);else{if(D.depthTexture.format!==_c)throw new Error("Unknown depthTexture format");D.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,re,0,Ue):i.framebufferTexture2D(36160,33306,3553,re,0)}}(D.__webglFramebuffer,k)}else if(se){D.__webglDepthbuffer=[];for(let re=0;re<6;re++)t.bindFramebuffer(36160,D.__webglFramebuffer[re]),D.__webglDepthbuffer[re]=i.createRenderbuffer(),le(D.__webglDepthbuffer[re],k,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=i.createRenderbuffer(),le(D.__webglDepthbuffer,k,!1);t.bindFramebuffer(36160,null)}function Le(k){return a&&(k.useRenderbuffer||k.useRenderToTexture)?Math.min(d,k.samples):0}let ht=!1,pt=!1;this.allocateTextureUnit=function P(){const k=H;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),H+=1,k},this.resetTextureUnits=function j(){H=0},this.setTexture2D=F,this.setTexture2DArray=function q(k,D){const se=n.get(k);k.version>0&&se.__version!==k.version?xt(se,k,D):(t.activeTexture(33984+D),t.bindTexture(35866,se.__webglTexture))},this.setTexture3D=function ie(k,D){const se=n.get(k);k.version>0&&se.__version!==k.version?xt(se,k,D):(t.activeTexture(33984+D),t.bindTexture(32879,se.__webglTexture))},this.setTextureCube=Y,this.rebindTextures=function Qe(k,D,se){const re=n.get(k);void 0!==D&&U(re.__webglFramebuffer,k,k.texture,36064,3553),void 0!==se&&Re(k)},this.setupRenderTarget=function K(k){const D=k.texture,se=n.get(k),re=n.get(D);k.addEventListener("dispose",R),!0!==k.isWebGLMultipleRenderTargets&&(void 0===re.__webglTexture&&(re.__webglTexture=i.createTexture()),re.__version=D.version,o.memory.textures++);const Ue=!0===k.isWebGLCubeRenderTarget,ze=!0===k.isWebGLMultipleRenderTargets,N=D.isDataTexture3D||D.isDataTexture2DArray,xe=v(k)||a;if(a&&D.format===us&&(D.type===$s||D.type===mc)&&(D.format=wi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ue){se.__webglFramebuffer=[];for(let ae=0;ae<6;ae++)se.__webglFramebuffer[ae]=i.createFramebuffer()}else if(se.__webglFramebuffer=i.createFramebuffer(),ze)if(r.drawBuffers){const ae=k.texture;for(let Ie=0,Me=ae.length;Ie<Me;Ie++){const Ne=n.get(ae[Ie]);void 0===Ne.__webglTexture&&(Ne.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(k.useRenderbuffer)if(a){se.__webglMultisampledFramebuffer=i.createFramebuffer(),se.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,se.__webglColorRenderbuffer);const ae=s.convert(D.format),Ie=s.convert(D.type),Me=w(D.internalFormat,ae,Ie),Ne=Le(k);i.renderbufferStorageMultisample(36161,Ne,Me,k.width,k.height),t.bindFramebuffer(36160,se.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,se.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),k.depthBuffer&&(se.__webglDepthRenderbuffer=i.createRenderbuffer(),le(se.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ue){t.bindTexture(34067,re.__webglTexture),ye(34067,D,xe);for(let ae=0;ae<6;ae++)U(se.__webglFramebuffer[ae],k,D,36064,34069+ae);x(D,xe)&&S(34067),t.unbindTexture()}else if(ze){const ae=k.texture;for(let Ie=0,Me=ae.length;Ie<Me;Ie++){const Ne=ae[Ie],Ge=n.get(Ne);t.bindTexture(3553,Ge.__webglTexture),ye(3553,Ne,xe),U(se.__webglFramebuffer,k,Ne,36064+Ie,3553),x(Ne,xe)&&S(3553)}t.unbindTexture()}else{let ae=3553;N&&(a?ae=D.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(ae,re.__webglTexture),ye(ae,D,xe),U(se.__webglFramebuffer,k,D,36064,ae),x(D,xe)&&S(ae),t.unbindTexture()}k.depthBuffer&&Re(k)},this.updateRenderTargetMipmap=function pe(k){const D=v(k)||a,se=!0===k.isWebGLMultipleRenderTargets?k.texture:[k.texture];for(let re=0,Ue=se.length;re<Ue;re++){const ze=se[re];if(x(ze,D)){const N=k.isWebGLCubeRenderTarget?34067:3553,xe=n.get(ze).__webglTexture;t.bindTexture(N,xe),S(N),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function me(k){if(k.useRenderbuffer)if(a){const D=k.width,se=k.height;let re=16384;const Ue=[36064],ze=k.stencilBuffer?33306:36096;k.depthBuffer&&Ue.push(ze),k.ignoreDepthForMultisampleCopy||(k.depthBuffer&&(re|=256),k.stencilBuffer&&(re|=1024));const N=n.get(k);t.bindFramebuffer(36008,N.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,N.__webglFramebuffer),k.ignoreDepthForMultisampleCopy&&(i.invalidateFramebuffer(36008,[ze]),i.invalidateFramebuffer(36009,[ze])),i.blitFramebuffer(0,0,D,se,0,0,D,se,re,9728),i.invalidateFramebuffer(36008,Ue),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,N.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=U,this.safeSetTexture2D=function kt(k,D){k&&k.isWebGLRenderTarget&&(!1===ht&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ht=!0),k=k.texture),F(k,D)},this.safeSetTextureCube=function un(k,D){k&&k.isWebGLCubeRenderTarget&&(!1===pt&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),pt=!0),k=k.texture),Y(k,D)}}function S$(i,e,t){const n=t.isWebGL2;return{convert:function r(s){let o;if(s===To)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1019===s)return 33635;if(1010===s)return 5120;if(1011===s)return 5122;if(s===Rd)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===$s)return 5126;if(s===mc)return n?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===us)return 6407;if(s===wi)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===ka)return 6402;if(s===_c)return 34041;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1032===s)return 36248;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s){if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(33776===s)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===s)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===s||37496===s)&&(o=e.get("WEBGL_compressed_texture_etc"),null!==o)){if(37492===s)return o.COMPRESSED_RGB8_ETC2;if(37496===s)return o.COMPRESSED_RGBA8_ETC2_EAC}return 37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s||37840===s||37841===s||37842===s||37843===s||37844===s||37845===s||37846===s||37847===s||37848===s||37849===s||37850===s||37851===s||37852===s||37853===s?(o=e.get("WEBGL_compressed_texture_astc"),null!==o?s:null):36492===s?(o=e.get("EXT_texture_compression_bptc"),null!==o?s:null):s===gc?n?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}p0.prototype.isMeshDistanceMaterial=!0;class MI extends Kn{constructor(e=[]){super(),this.cameras=e}}MI.prototype.isArrayCamera=!0;class eo extends It{constructor(){super(),this.type="Group"}}eo.prototype.isGroup=!0;const E$={type:"move"};class f0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new eo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new eo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new M,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new M),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new eo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new M,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new M),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(E$))),c&&e.hand){o=!0;for(const m of e.hand.values()){const y=t.getJointPose(m,n);if(void 0===c.joints[m.jointName]){const _=new eo;_.matrixAutoUpdate=!1,_.visible=!1,c.joints[m.jointName]=_,c.add(_)}const g=c.joints[m.jointName];null!==y&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=y.radius),g.visible=null!==y}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),p=.02,f=.005;c.inputState.pinching&&h>p+f?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-f&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class m0 extends Vn{constructor(e,t,n,r,s,o,a,l,c,u){if((u=void 0!==u?u:ka)!==ka&&u!==_c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===ka&&(n=Rd),void 0===n&&u===_c&&(n=gc),super(null,r,s,o,a,l,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:pn,this.minFilter=void 0!==l?l:pn,this.flipY=!1,this.generateMipmaps=!1}}m0.prototype.isDepthTexture=!0;class D$ extends Ao{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor";const l=e.extensions.has("WEBGL_multisampled_render_to_texture");let c=null,u=null,d=null,h=null,p=!1,f=null;const m=t.getContextAttributes();let y=null,g=null;const _=[],v=new Map,b=new Kn;b.layers.enable(1),b.viewport=new Xt;const x=new Kn;x.layers.enable(2),x.viewport=new Xt;const S=[b,x],w=new MI;w.layers.enable(1),w.layers.enable(2);let I=null,z=null;function B(Y){const ee=v.get(Y.inputSource);ee&&ee.dispatchEvent({type:Y.type,data:Y.inputSource})}function R(){v.forEach(function(Y,ee){Y.disconnect(ee)}),v.clear(),I=null,z=null,e.setRenderTarget(y),h=null,d=null,u=null,r=null,g=null,ie.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function J(Y){const ee=r.inputSources;for(let ge=0;ge<_.length;ge++)v.set(ee[ge],_[ge]);for(let ge=0;ge<Y.removed.length;ge++){const ye=Y.removed[ge],fe=v.get(ye);fe&&(fe.dispatchEvent({type:"disconnected",data:ye}),v.delete(ye))}for(let ge=0;ge<Y.added.length;ge++){const ye=Y.added[ge],fe=v.get(ye);fe&&fe.dispatchEvent({type:"connected",data:ye})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ee=_[Y];return void 0===ee&&(ee=new f0,_[Y]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(Y){let ee=_[Y];return void 0===ee&&(ee=new f0,_[Y]=ee),ee.getGripSpace()},this.getHand=function(Y){let ee=_[Y];return void 0===ee&&(ee=new f0,_[Y]=ee),ee.getHandSpace()},this.setFramebufferScaleFactor=function(Y){s=Y,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var Y=Ri(function*(ee){if(r=ee,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",R),r.addEventListener("inputsourceschange",J),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),g=new Cr(h.framebufferWidth,h.framebufferHeight);else{p=m.antialias;let ge=null,ye=null,fe=null;m.depth&&(fe=m.stencil?35056:33189,ge=m.stencil?_c:ka,ye=m.stencil?gc:Rd);const xt={colorFormat:m.alpha||p?32856:32849,depthFormat:fe,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(xt),r.updateRenderState({layers:[d]}),g=p?new kb(d.textureWidth,d.textureHeight,{format:wi,type:To,depthTexture:new m0(d.textureWidth,d.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,ge),stencilBuffer:m.stencil,ignoreDepth:d.ignoreDepthValues,useRenderToTexture:l}):new Cr(d.textureWidth,d.textureHeight,{format:m.alpha?wi:us,type:To,depthTexture:new m0(d.textureWidth,d.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,ge),stencilBuffer:m.stencil,ignoreDepth:d.ignoreDepthValues})}this.setFoveation(0),o=yield r.requestReferenceSpace(a),ie.setContext(r),ie.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(ee){return Y.apply(this,arguments)}}();const V=new M,H=new M;function P(Y,ee){null===ee?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ee.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(null===r)return;w.near=x.near=b.near=Y.near,w.far=x.far=b.far=Y.far,(I!==w.near||z!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),I=w.near,z=w.far);const ee=Y.parent,ge=w.cameras;P(w,ee);for(let fe=0;fe<ge.length;fe++)P(ge[fe],ee);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),Y.position.copy(w.position),Y.quaternion.copy(w.quaternion),Y.scale.copy(w.scale),Y.matrix.copy(w.matrix),Y.matrixWorld.copy(w.matrixWorld);const ye=Y.children;for(let fe=0,xt=ye.length;fe<xt;fe++)ye[fe].updateMatrixWorld(!0);2===ge.length?function j(Y,ee,ge){V.setFromMatrixPosition(ee.matrixWorld),H.setFromMatrixPosition(ge.matrixWorld);const ye=V.distanceTo(H),fe=ee.projectionMatrix.elements,xt=ge.projectionMatrix.elements,oe=fe[14]/(fe[10]-1),U=fe[14]/(fe[10]+1),le=(fe[9]+1)/fe[5],he=(fe[9]-1)/fe[5],Re=(fe[8]-1)/fe[0],Qe=(xt[8]+1)/xt[0],K=oe*Re,pe=oe*Qe,me=ye/(-Re+Qe),Le=me*-Re;ee.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Le),Y.translateZ(me),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();const Ae=oe+me,ht=U+me;Y.projectionMatrix.makePerspective(K-Le,pe+(ye-Le),le*U/ht*Ae,he*U/ht*Ae,Ae,ht)}(w,b,x):w.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(Y){null!==d&&(d.fixedFoveation=Y),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=Y)};let F=null;const ie=new UA;ie.setAnimationLoop(function q(Y,ee){if(c=ee.getViewerPose(o),f=ee,null!==c){const ye=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let fe=!1;ye.length!==w.cameras.length&&(w.cameras.length=0,fe=!0);for(let xt=0;xt<ye.length;xt++){const oe=ye[xt];let U=null;if(null!==h)U=h.getViewport(oe);else{const he=u.getViewSubImage(d,oe);U=he.viewport,0===xt&&(e.setRenderTargetTextures(g,he.colorTexture,d.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(g))}const le=S[xt];le.matrix.fromArray(oe.transform.matrix),le.projectionMatrix.fromArray(oe.projectionMatrix),le.viewport.set(U.x,U.y,U.width,U.height),0===xt&&w.matrix.copy(le.matrix),!0===fe&&w.cameras.push(le)}}const ge=r.inputSources;for(let ye=0;ye<_.length;ye++)_[ye].update(ge[ye],ee,o);F&&F(Y,ee),f=null}),this.setAnimationLoop=function(Y){F=Y},this.dispose=function(){}}}function T$(i){function n(g,_){g.opacity.value=_.opacity,_.color&&g.diffuse.value.copy(_.color),_.emissive&&g.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.specularMap&&(g.specularMap.value=_.specularMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);const v=i.get(_).envMap;let b,x;v&&(g.envMap.value=v,g.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,g.reflectivity.value=_.reflectivity,g.ior.value=_.ior,g.refractionRatio.value=_.refractionRatio),_.lightMap&&(g.lightMap.value=_.lightMap,g.lightMapIntensity.value=_.lightMapIntensity),_.aoMap&&(g.aoMap.value=_.aoMap,g.aoMapIntensity.value=_.aoMapIntensity),_.map?b=_.map:_.specularMap?b=_.specularMap:_.displacementMap?b=_.displacementMap:_.normalMap?b=_.normalMap:_.bumpMap?b=_.bumpMap:_.roughnessMap?b=_.roughnessMap:_.metalnessMap?b=_.metalnessMap:_.alphaMap?b=_.alphaMap:_.emissiveMap?b=_.emissiveMap:_.clearcoatMap?b=_.clearcoatMap:_.clearcoatNormalMap?b=_.clearcoatNormalMap:_.clearcoatRoughnessMap?b=_.clearcoatRoughnessMap:_.specularIntensityMap?b=_.specularIntensityMap:_.specularColorMap?b=_.specularColorMap:_.transmissionMap?b=_.transmissionMap:_.thicknessMap?b=_.thicknessMap:_.sheenColorMap?b=_.sheenColorMap:_.sheenRoughnessMap&&(b=_.sheenRoughnessMap),void 0!==b&&(b.isWebGLRenderTarget&&(b=b.texture),!0===b.matrixAutoUpdate&&b.updateMatrix(),g.uvTransform.value.copy(b.matrix)),_.aoMap?x=_.aoMap:_.lightMap&&(x=_.lightMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),g.uv2Transform.value.copy(x.matrix))}function d(g,_){g.roughness.value=_.roughness,g.metalness.value=_.metalness,_.roughnessMap&&(g.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(g.metalnessMap.value=_.metalnessMap),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,1===_.side&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),1===_.side&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias),i.get(_).envMap&&(g.envMapIntensity.value=_.envMapIntensity)}return{refreshFogUniforms:function e(g,_){g.fogColor.value.copy(_.color),_.isFog?(g.fogNear.value=_.near,g.fogFar.value=_.far):_.isFogExp2&&(g.fogDensity.value=_.density)},refreshMaterialUniforms:function t(g,_,v,b,x){_.isMeshBasicMaterial?n(g,_):_.isMeshLambertMaterial?(n(g,_),function l(g,_){_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap)}(g,_)):_.isMeshToonMaterial?(n(g,_),function u(g,_){_.gradientMap&&(g.gradientMap.value=_.gradientMap),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,1===_.side&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),1===_.side&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}(g,_)):_.isMeshPhongMaterial?(n(g,_),function c(g,_){g.specular.value.copy(_.specular),g.shininess.value=Math.max(_.shininess,1e-4),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,1===_.side&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),1===_.side&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}(g,_)):_.isMeshStandardMaterial?(n(g,_),_.isMeshPhysicalMaterial?function h(g,_,v){d(g,_),g.ior.value=_.ior,_.sheen>0&&(g.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),g.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(g.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(g.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(g.clearcoat.value=_.clearcoat,g.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(g.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),g.clearcoatNormalMap.value=_.clearcoatNormalMap,1===_.side&&g.clearcoatNormalScale.value.negate())),_.transmission>0&&(g.transmission.value=_.transmission,g.transmissionSamplerMap.value=v.texture,g.transmissionSamplerSize.value.set(v.width,v.height),_.transmissionMap&&(g.transmissionMap.value=_.transmissionMap),g.thickness.value=_.thickness,_.thicknessMap&&(g.thicknessMap.value=_.thicknessMap),g.attenuationDistance.value=_.attenuationDistance,g.attenuationColor.value.copy(_.attenuationColor)),g.specularIntensity.value=_.specularIntensity,g.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(g.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(g.specularColorMap.value=_.specularColorMap)}(g,_,x):d(g,_)):_.isMeshMatcapMaterial?(n(g,_),function p(g,_){_.matcap&&(g.matcap.value=_.matcap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,1===_.side&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),1===_.side&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}(g,_)):_.isMeshDepthMaterial?(n(g,_),function f(g,_){_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}(g,_)):_.isMeshDistanceMaterial?(n(g,_),function m(g,_){_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias),g.referencePosition.value.copy(_.referencePosition),g.nearDistance.value=_.nearDistance,g.farDistance.value=_.farDistance}(g,_)):_.isMeshNormalMaterial?(n(g,_),function y(g,_){_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,1===_.side&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),1===_.side&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}(g,_)):_.isLineBasicMaterial?(function r(g,_){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity}(g,_),_.isLineDashedMaterial&&function s(g,_){g.dashSize.value=_.dashSize,g.totalSize.value=_.dashSize+_.gapSize,g.scale.value=_.scale}(g,_)):_.isPointsMaterial?function o(g,_,v,b){let x;g.diffuse.value.copy(_.color),g.opacity.value=_.opacity,g.size.value=_.size*v,g.scale.value=.5*b,_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest),_.map?x=_.map:_.alphaMap&&(x=_.alphaMap),void 0!==x&&(!0===x.matrixAutoUpdate&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}(g,_,v,b):_.isSpriteMaterial?function a(g,_){let v;g.diffuse.value.copy(_.color),g.opacity.value=_.opacity,g.rotation.value=_.rotation,_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest),_.map?v=_.map:_.alphaMap&&(v=_.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),g.uvTransform.value.copy(v.matrix))}(g,_):_.isShadowMaterial?(g.color.value.copy(_.color),g.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function Kt(i={}){const e=void 0!==i.canvas?i.canvas:function A$(){const i=Kf("canvas");return i.style.display="block",i}(),t=void 0!==i.context?i.context:null,n=void 0!==i.alpha&&i.alpha,r=void 0===i.depth||i.depth,s=void 0===i.stencil||i.stencil,o=void 0!==i.antialias&&i.antialias,a=void 0===i.premultipliedAlpha||i.premultipliedAlpha,l=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,c=void 0!==i.powerPreference?i.powerPreference:"default",u=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let d=null,h=null;const p=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ui,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let y=!1,g=0,_=0,v=null,b=-1,x=null;const S=new Xt,w=new Xt;let I=null,z=e.width,B=e.height,R=1,J=null,V=null;const H=new Xt(0,0,z,B),j=new Xt(0,0,z,B);let P=!1;const F=[],q=new gm;let ie=!1,Y=!1,ee=null;const ge=new Oe,ye=new M,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xt(){return null===v?R:1}let le,he,Re,Qe,K,pe,me,Le,Ae,ht,pt,kt,un,k,D,se,re,Ue,ze,N,xe,ae,Ie,oe=t;function U(E,W){for(let Z=0;Z<E.length;Z++){const te=e.getContext(E[Z],W);if(null!==te)return te}return null}try{const E={alpha:n,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r135"),e.addEventListener("webglcontextlost",Ge,!1),e.addEventListener("webglcontextrestored",Mt,!1),null===oe){const W=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&W.shift(),oe=U(W,E),null===oe)throw U(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===oe.getShaderPrecisionFormat&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(E){throw console.error("THREE.WebGLRenderer: "+E.message),E}function Me(){le=new Qj(oe),he=new jj(oe,le,i),le.init(he),ae=new S$(oe,le,he),Re=new M$(oe,le,he),F[0]=1029,Qe=new tW(oe),K=new h$,pe=new C$(oe,le,Re,K,he,ae,Qe),me=new $j(m),Le=new Kj(m),Ae=new $9(oe,he),Ie=new Uj(oe,le,Ae,he),ht=new Jj(oe,Ae,Qe,Ie),pt=new sW(oe,ht,Ae,Qe),ze=new rW(oe,he,pe),se=new Wj(K),kt=new d$(m,me,Le,le,he,Ie,se),un=new T$(K),k=new f$(K),D=new b$(le,he),Ue=new zj(m,me,Re,pt,a),re=new xI(m,pt,he),N=new Gj(oe,le,Qe,he),xe=new eW(oe,le,Qe,he),Qe.programs=kt.programs,m.capabilities=he,m.extensions=le,m.properties=K,m.renderLists=k,m.shadowMap=re,m.state=Re,m.info=Qe}Me();const Ne=new D$(m,oe);function Ge(E){E.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Mt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const E=Qe.autoReset,W=re.enabled,Z=re.autoUpdate,X=re.needsUpdate,te=re.type;Me(),Qe.autoReset=E,re.enabled=W,re.autoUpdate=Z,re.needsUpdate=X,re.type=te}function kn(E){const W=E.target;W.removeEventListener("dispose",kn),function Gt(E){(function Yr(E){const W=K.get(E).programs;void 0!==W&&W.forEach(function(Z){kt.releaseProgram(Z)})})(E),K.remove(E)}(W)}this.xr=Ne,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const E=le.get("WEBGL_lose_context");E&&E.loseContext()},this.forceContextRestore=function(){const E=le.get("WEBGL_lose_context");E&&E.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(E){void 0!==E&&(R=E,this.setSize(z,B,!1))},this.getSize=function(E){return E.set(z,B)},this.setSize=function(E,W,Z){Ne.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(z=E,B=W,e.width=Math.floor(E*R),e.height=Math.floor(W*R),!1!==Z&&(e.style.width=E+"px",e.style.height=W+"px"),this.setViewport(0,0,E,W))},this.getDrawingBufferSize=function(E){return E.set(z*R,B*R).floor()},this.setDrawingBufferSize=function(E,W,Z){z=E,B=W,R=Z,e.width=Math.floor(E*Z),e.height=Math.floor(W*Z),this.setViewport(0,0,E,W)},this.getCurrentViewport=function(E){return E.copy(S)},this.getViewport=function(E){return E.copy(H)},this.setViewport=function(E,W,Z,X){E.isVector4?H.set(E.x,E.y,E.z,E.w):H.set(E,W,Z,X),Re.viewport(S.copy(H).multiplyScalar(R).floor())},this.getScissor=function(E){return E.copy(j)},this.setScissor=function(E,W,Z,X){E.isVector4?j.set(E.x,E.y,E.z,E.w):j.set(E,W,Z,X),Re.scissor(w.copy(j).multiplyScalar(R).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(E){Re.setScissorTest(P=E)},this.setOpaqueSort=function(E){J=E},this.setTransparentSort=function(E){V=E},this.getClearColor=function(E){return E.copy(Ue.getClearColor())},this.setClearColor=function(){Ue.setClearColor.apply(Ue,arguments)},this.getClearAlpha=function(){return Ue.getClearAlpha()},this.setClearAlpha=function(){Ue.setClearAlpha.apply(Ue,arguments)},this.clear=function(E,W,Z){let X=0;(void 0===E||E)&&(X|=16384),(void 0===W||W)&&(X|=256),(void 0===Z||Z)&&(X|=1024),oe.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ge,!1),e.removeEventListener("webglcontextrestored",Mt,!1),k.dispose(),D.dispose(),K.dispose(),me.dispose(),Le.dispose(),pt.dispose(),Ie.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",pF),Ne.removeEventListener("sessionend",fF),ee&&(ee.dispose(),ee=null),cl.stop()},this.renderBufferDirect=function(E,W,Z,X,te,ct){null===W&&(W=fe);const Xe=te.isMesh&&te.matrixWorld.determinant()<0,St=function zie(E,W,Z,X,te){!0!==W.isScene&&(W=fe),pe.resetTextureUnits();const ct=W.fog,St=null===v?m.outputEncoding:v.texture.encoding,ut=(X.isMeshStandardMaterial?Le:me).get(X.envMap||(X.isMeshStandardMaterial?W.environment:null)),Bt=!0===X.vertexColors&&!!Z.attributes.color&&4===Z.attributes.color.itemSize,Et=!!X.normalMap&&!!Z.attributes.tangent,Ot=!!Z.morphAttributes.position,Cn=!!Z.morphAttributes.normal,ul=Z.morphAttributes.position?Z.morphAttributes.position.length:0,jt=K.get(X),Uh=h.state.lights;!0!==ie||!0!==Y&&E===x||se.setState(X,E,E===x&&X.id===b);let dn=!1;X.version===jt.__version?(jt.needsLights&&jt.lightsStateVersion!==Uh.state.version||jt.outputEncoding!==St||te.isInstancedMesh&&!1===jt.instancing||!te.isInstancedMesh&&!0===jt.instancing||te.isSkinnedMesh&&!1===jt.skinning||!te.isSkinnedMesh&&!0===jt.skinning||jt.envMap!==ut||X.fog&&jt.fog!==ct||void 0!==jt.numClippingPlanes&&(jt.numClippingPlanes!==se.numPlanes||jt.numIntersection!==se.numIntersection)||jt.vertexAlphas!==Bt||jt.vertexTangents!==Et||jt.morphTargets!==Ot||jt.morphNormals!==Cn||!0===he.isWebGL2&&jt.morphTargetsCount!==ul)&&(dn=!0):(dn=!0,jt.__version=X.version);let dl=jt.currentProgram;!0===dn&&(dl=_x(X,W,te));let hl=!1,pl=!1,ia=!1;const Sn=dl.getUniforms(),Gh=jt.uniforms;if(Re.useProgram(dl.program)&&(hl=!0,pl=!0,ia=!0),X.id!==b&&(b=X.id,pl=!0),hl||x!==E){if(Sn.setValue(oe,"projectionMatrix",E.projectionMatrix),he.logarithmicDepthBuffer&&Sn.setValue(oe,"logDepthBufFC",2/(Math.log(E.far+1)/Math.LN2)),x!==E&&(x=E,pl=!0,ia=!0),X.isShaderMaterial||X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshStandardMaterial||X.envMap){const Zr=Sn.map.cameraPosition;void 0!==Zr&&Zr.setValue(oe,ye.setFromMatrixPosition(E.matrixWorld))}(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&Sn.setValue(oe,"isOrthographic",!0===E.isOrthographicCamera),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial||X.isShadowMaterial||te.isSkinnedMesh)&&Sn.setValue(oe,"viewMatrix",E.matrixWorldInverse)}if(te.isSkinnedMesh){Sn.setOptional(oe,te,"bindMatrix"),Sn.setOptional(oe,te,"bindMatrixInverse");const Zr=te.skeleton;Zr&&(he.floatVertexTextures?(null===Zr.boneTexture&&Zr.computeBoneTexture(),Sn.setValue(oe,"boneTexture",Zr.boneTexture,pe),Sn.setValue(oe,"boneTextureSize",Zr.boneTextureSize)):Sn.setOptional(oe,Zr,"boneMatrices"))}return!!Z&&(void 0!==Z.morphAttributes.position||void 0!==Z.morphAttributes.normal)&&ze.update(te,Z,X,dl),(pl||jt.receiveShadow!==te.receiveShadow)&&(jt.receiveShadow=te.receiveShadow,Sn.setValue(oe,"receiveShadow",te.receiveShadow)),pl&&(Sn.setValue(oe,"toneMappingExposure",m.toneMappingExposure),jt.needsLights&&function Uie(E,W){E.ambientLightColor.needsUpdate=W,E.lightProbe.needsUpdate=W,E.directionalLights.needsUpdate=W,E.directionalLightShadows.needsUpdate=W,E.pointLights.needsUpdate=W,E.pointLightShadows.needsUpdate=W,E.spotLights.needsUpdate=W,E.spotLightShadows.needsUpdate=W,E.rectAreaLights.needsUpdate=W,E.hemisphereLights.needsUpdate=W}(Gh,ia),ct&&X.fog&&un.refreshFogUniforms(Gh,ct),un.refreshMaterialUniforms(Gh,X,R,B,ee),Ho.upload(oe,jt.uniformsList,Gh,pe)),X.isShaderMaterial&&!0===X.uniformsNeedUpdate&&(Ho.upload(oe,jt.uniformsList,Gh,pe),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&Sn.setValue(oe,"center",te.center),Sn.setValue(oe,"modelViewMatrix",te.modelViewMatrix),Sn.setValue(oe,"normalMatrix",te.normalMatrix),Sn.setValue(oe,"modelMatrix",te.matrixWorld),dl}(E,W,Z,X,te);Re.setMaterial(X,Xe);let ut=Z.index;const Bt=Z.attributes.position;if(null===ut){if(void 0===Bt||0===Bt.count)return}else if(0===ut.count)return;let Et=1;!0===X.wireframe&&(ut=ht.getWireframeAttribute(Z),Et=2),Ie.setup(te,X,St,Z,ut);let Ot,Cn=N;null!==ut&&(Ot=Ae.get(ut),Cn=xe,Cn.setIndex(Ot));const ul=null!==ut?ut.count:Bt.count,jt=Z.drawRange.start*Et,Uh=Z.drawRange.count*Et,dn=null!==ct?ct.start*Et:0,dl=null!==ct?ct.count*Et:1/0,hl=Math.max(jt,dn),pl=Math.min(ul,jt+Uh,dn+dl)-1,ia=Math.max(0,pl-hl+1);if(0!==ia){if(te.isMesh)!0===X.wireframe?(Re.setLineWidth(X.wireframeLinewidth*xt()),Cn.setMode(1)):Cn.setMode(4);else if(te.isLine){let Sn=X.linewidth;void 0===Sn&&(Sn=1),Re.setLineWidth(Sn*xt()),Cn.setMode(te.isLineSegments?1:te.isLineLoop?2:3)}else te.isPoints?Cn.setMode(0):te.isSprite&&Cn.setMode(4);if(te.isInstancedMesh)Cn.renderInstances(hl,ia,te.count);else if(Z.isInstancedBufferGeometry){const Sn=Math.min(Z.instanceCount,Z._maxInstanceCount);Cn.renderInstances(hl,ia,Sn)}else Cn.render(hl,ia)}},this.compile=function(E,W){h=D.get(E),h.init(),f.push(h),E.traverseVisible(function(Z){Z.isLight&&Z.layers.test(W.layers)&&(h.pushLight(Z),Z.castShadow&&h.pushShadow(Z))}),h.setupLights(m.physicallyCorrectLights),E.traverse(function(Z){const X=Z.material;if(X)if(Array.isArray(X))for(let te=0;te<X.length;te++)_x(X[te],E,Z);else _x(X,E,Z)}),f.pop(),h=null};let Xr=null;function pF(){cl.stop()}function fF(){cl.start()}const cl=new UA;function mF(E,W,Z,X){if(!1===E.visible)return;if(E.layers.test(W.layers))if(E.isGroup)Z=E.renderOrder;else if(E.isLOD)!0===E.autoUpdate&&E.update(W);else if(E.isLight)h.pushLight(E),E.castShadow&&h.pushShadow(E);else if(E.isSprite){if(!E.frustumCulled||q.intersectsSprite(E)){X&&ye.setFromMatrixPosition(E.matrixWorld).applyMatrix4(ge);const Xe=pt.update(E),St=E.material;St.visible&&d.push(E,Xe,St,Z,ye.z,null)}}else if((E.isMesh||E.isLine||E.isPoints)&&(E.isSkinnedMesh&&E.skeleton.frame!==Qe.render.frame&&(E.skeleton.update(),E.skeleton.frame=Qe.render.frame),!E.frustumCulled||q.intersectsObject(E))){X&&ye.setFromMatrixPosition(E.matrixWorld).applyMatrix4(ge);const Xe=pt.update(E),St=E.material;if(Array.isArray(St)){const ut=Xe.groups;for(let Bt=0,Et=ut.length;Bt<Et;Bt++){const Ot=ut[Bt],Cn=St[Ot.materialIndex];Cn&&Cn.visible&&d.push(E,Xe,Cn,Z,ye.z,Ot)}}else St.visible&&d.push(E,Xe,St,Z,ye.z,null)}const ct=E.children;for(let Xe=0,St=ct.length;Xe<St;Xe++)mF(ct[Xe],W,Z,X)}function gF(E,W,Z,X){const te=E.opaque,ct=E.transmissive,Xe=E.transparent;h.setupLightsView(Z),ct.length>0&&function Vie(E,W,Z){null===ee&&(ee=new(!0===o&&!0===he.isWebGL2?kb:Cr)(1024,1024,{generateMipmaps:!0,type:null!==ae.convert(mc)?mc:To,minFilter:Do,magFilter:pn,wrapS:Tn,wrapT:Tn,useRenderToTexture:le.has("WEBGL_multisampled_render_to_texture")}));const X=m.getRenderTarget();m.setRenderTarget(ee),m.clear();const te=m.toneMapping;m.toneMapping=0,jg(E,W,Z),m.toneMapping=te,pe.updateMultisampleRenderTarget(ee),pe.updateRenderTargetMipmap(ee),m.setRenderTarget(X)}(te,W,Z),X&&Re.viewport(S.copy(X)),te.length>0&&jg(te,W,Z),ct.length>0&&jg(ct,W,Z),Xe.length>0&&jg(Xe,W,Z)}function jg(E,W,Z){const X=!0===W.isScene?W.overrideMaterial:null;for(let te=0,ct=E.length;te<ct;te++){const Xe=E[te],St=Xe.object,ut=Xe.geometry,Bt=null===X?Xe.material:X,Et=Xe.group;St.layers.test(Z.layers)&&Hie(St,W,Z,ut,Bt,Et)}}function Hie(E,W,Z,X,te,ct){E.onBeforeRender(m,W,Z,X,te,ct),E.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,E.matrixWorld),E.normalMatrix.getNormalMatrix(E.modelViewMatrix),te.onBeforeRender(m,W,Z,X,E,ct),!0===te.transparent&&2===te.side?(te.side=1,te.needsUpdate=!0,m.renderBufferDirect(Z,W,X,te,E,ct),te.side=0,te.needsUpdate=!0,m.renderBufferDirect(Z,W,X,te,E,ct),te.side=2):m.renderBufferDirect(Z,W,X,te,E,ct),E.onAfterRender(m,W,Z,X,te,ct)}function _x(E,W,Z){!0!==W.isScene&&(W=fe);const X=K.get(E),te=h.state.lights,Xe=te.state.version,St=kt.getParameters(E,te.state,h.state.shadowsArray,W,Z),ut=kt.getProgramCacheKey(St);let Bt=X.programs;X.environment=E.isMeshStandardMaterial?W.environment:null,X.fog=W.fog,X.envMap=(E.isMeshStandardMaterial?Le:me).get(E.envMap||X.environment),void 0===Bt&&(E.addEventListener("dispose",kn),Bt=new Map,X.programs=Bt);let Et=Bt.get(ut);if(void 0!==Et){if(X.currentProgram===Et&&X.lightsStateVersion===Xe)return _F(E,St),Et}else St.uniforms=kt.getUniforms(E),E.onBuild(Z,St,m),E.onBeforeCompile(St,m),Et=kt.acquireProgram(St,ut),Bt.set(ut,Et),X.uniforms=St.uniforms;const Ot=X.uniforms;(!E.isShaderMaterial&&!E.isRawShaderMaterial||!0===E.clipping)&&(Ot.clippingPlanes=se.uniform),_F(E,St),X.needsLights=function Gie(E){return E.isMeshLambertMaterial||E.isMeshToonMaterial||E.isMeshPhongMaterial||E.isMeshStandardMaterial||E.isShadowMaterial||E.isShaderMaterial&&!0===E.lights}(E),X.lightsStateVersion=Xe,X.needsLights&&(Ot.ambientLightColor.value=te.state.ambient,Ot.lightProbe.value=te.state.probe,Ot.directionalLights.value=te.state.directional,Ot.directionalLightShadows.value=te.state.directionalShadow,Ot.spotLights.value=te.state.spot,Ot.spotLightShadows.value=te.state.spotShadow,Ot.rectAreaLights.value=te.state.rectArea,Ot.ltc_1.value=te.state.rectAreaLTC1,Ot.ltc_2.value=te.state.rectAreaLTC2,Ot.pointLights.value=te.state.point,Ot.pointLightShadows.value=te.state.pointShadow,Ot.hemisphereLights.value=te.state.hemi,Ot.directionalShadowMap.value=te.state.directionalShadowMap,Ot.directionalShadowMatrix.value=te.state.directionalShadowMatrix,Ot.spotShadowMap.value=te.state.spotShadowMap,Ot.spotShadowMatrix.value=te.state.spotShadowMatrix,Ot.pointShadowMap.value=te.state.pointShadowMap,Ot.pointShadowMatrix.value=te.state.pointShadowMatrix);const Cn=Et.getUniforms(),ul=Ho.seqWithValue(Cn.seq,Ot);return X.currentProgram=Et,X.uniformsList=ul,Et}function _F(E,W){const Z=K.get(E);Z.outputEncoding=W.outputEncoding,Z.instancing=W.instancing,Z.skinning=W.skinning,Z.morphTargets=W.morphTargets,Z.morphNormals=W.morphNormals,Z.morphTargetsCount=W.morphTargetsCount,Z.numClippingPlanes=W.numClippingPlanes,Z.numIntersection=W.numClipIntersection,Z.vertexAlphas=W.vertexAlphas,Z.vertexTangents=W.vertexTangents}cl.setAnimationLoop(function Bie(E){Xr&&Xr(E)}),typeof window<"u"&&cl.setContext(window),this.setAnimationLoop=function(E){Xr=E,Ne.setAnimationLoop(E),null===E?cl.stop():cl.start()},Ne.addEventListener("sessionstart",pF),Ne.addEventListener("sessionend",fF),this.render=function(E,W){if(void 0===W||!0===W.isCamera){if(!0!==y){if(!0===E.autoUpdate&&E.updateMatrixWorld(),null===W.parent&&W.updateMatrixWorld(),!0===Ne.enabled&&!0===Ne.isPresenting&&(!0===Ne.cameraAutoUpdate&&Ne.updateCamera(W),W=Ne.getCamera()),!0===E.isScene&&E.onBeforeRender(m,E,W,v),h=D.get(E,f.length),h.init(),f.push(h),ge.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),q.setFromProjectionMatrix(ge),Y=this.localClippingEnabled,ie=se.init(this.clippingPlanes,Y,W),d=k.get(E,p.length),d.init(),p.push(d),mF(E,W,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(J,V),!0===ie&&se.beginShadows(),re.render(h.state.shadowsArray,E,W),!0===ie&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ue.render(d,E),h.setupLights(m.physicallyCorrectLights),W.isArrayCamera){const X=W.cameras;for(let te=0,ct=X.length;te<ct;te++){const Xe=X[te];gF(d,E,Xe,Xe.viewport)}}else gF(d,E,W);null!==v&&(pe.updateMultisampleRenderTarget(v),pe.updateRenderTargetMipmap(v)),!0===E.isScene&&E.onAfterRender(m,E,W),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1),Ie.resetDefaultState(),b=-1,x=null,f.pop(),h=f.length>0?f[f.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(E,W,Z){K.get(E.texture).__webglTexture=W,K.get(E.depthTexture).__webglTexture=Z;const X=K.get(E);X.__hasExternalTextures=!0,X.__hasExternalTextures&&(X.__autoAllocateDepthBuffer=void 0===Z,X.__autoAllocateDepthBuffer||E.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),E.useRenderToTexture=!1,E.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(E,W){const Z=K.get(E);Z.__webglFramebuffer=W,Z.__useDefaultFramebuffer=void 0===W},this.setRenderTarget=function(E,W=0,Z=0){v=E,g=W,_=Z;let X=!0;if(E){const ut=K.get(E);void 0!==ut.__useDefaultFramebuffer?(Re.bindFramebuffer(36160,null),X=!1):void 0===ut.__webglFramebuffer?pe.setupRenderTarget(E):ut.__hasExternalTextures&&pe.rebindTextures(E,K.get(E.texture).__webglTexture,K.get(E.depthTexture).__webglTexture)}let te=null,ct=!1,Xe=!1;if(E){const ut=E.texture;(ut.isDataTexture3D||ut.isDataTexture2DArray)&&(Xe=!0);const Bt=K.get(E).__webglFramebuffer;E.isWebGLCubeRenderTarget?(te=Bt[W],ct=!0):te=E.useRenderbuffer?K.get(E).__webglMultisampledFramebuffer:Bt,S.copy(E.viewport),w.copy(E.scissor),I=E.scissorTest}else S.copy(H).multiplyScalar(R).floor(),w.copy(j).multiplyScalar(R).floor(),I=P;if(Re.bindFramebuffer(36160,te)&&he.drawBuffers&&X){let ut=!1;if(E)if(E.isWebGLMultipleRenderTargets){const Bt=E.texture;if(F.length!==Bt.length||36064!==F[0]){for(let Et=0,Ot=Bt.length;Et<Ot;Et++)F[Et]=36064+Et;F.length=Bt.length,ut=!0}}else(1!==F.length||36064!==F[0])&&(F[0]=36064,F.length=1,ut=!0);else(1!==F.length||1029!==F[0])&&(F[0]=1029,F.length=1,ut=!0);ut&&(he.isWebGL2?oe.drawBuffers(F):le.get("WEBGL_draw_buffers").drawBuffersWEBGL(F))}if(Re.viewport(S),Re.scissor(w),Re.setScissorTest(I),ct){const ut=K.get(E.texture);oe.framebufferTexture2D(36160,36064,34069+W,ut.__webglTexture,Z)}else if(Xe){const ut=K.get(E.texture);oe.framebufferTextureLayer(36160,36064,ut.__webglTexture,Z||0,W||0)}b=-1},this.readRenderTargetPixels=function(E,W,Z,X,te,ct,Xe){if(!E||!E.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let St=K.get(E).__webglFramebuffer;if(E.isWebGLCubeRenderTarget&&void 0!==Xe&&(St=St[Xe]),St){Re.bindFramebuffer(36160,St);try{const ut=E.texture,Bt=ut.format,Et=ut.type;if(Bt!==wi&&ae.convert(Bt)!==oe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ot=Et===mc&&(le.has("EXT_color_buffer_half_float")||he.isWebGL2&&le.has("EXT_color_buffer_float"));if(!(Et===To||ae.convert(Et)===oe.getParameter(35738)||Et===$s&&(he.isWebGL2||le.has("OES_texture_float")||le.has("WEBGL_color_buffer_float"))||Ot))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===oe.checkFramebufferStatus(36160)?W>=0&&W<=E.width-X&&Z>=0&&Z<=E.height-te&&oe.readPixels(W,Z,X,te,ae.convert(Bt),ae.convert(Et),ct):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const ut=null!==v?K.get(v).__webglFramebuffer:null;Re.bindFramebuffer(36160,ut)}}},this.copyFramebufferToTexture=function(E,W,Z=0){const X=Math.pow(2,-Z),te=Math.floor(W.image.width*X),ct=Math.floor(W.image.height*X);let Xe=ae.convert(W.format);he.isWebGL2&&(6407===Xe&&(Xe=32849),6408===Xe&&(Xe=32856)),pe.setTexture2D(W,0),oe.copyTexImage2D(3553,Z,Xe,E.x,E.y,te,ct,0),Re.unbindTexture()},this.copyTextureToTexture=function(E,W,Z,X=0){const te=W.image.width,ct=W.image.height,Xe=ae.convert(Z.format),St=ae.convert(Z.type);pe.setTexture2D(Z,0),oe.pixelStorei(37440,Z.flipY),oe.pixelStorei(37441,Z.premultiplyAlpha),oe.pixelStorei(3317,Z.unpackAlignment),W.isDataTexture?oe.texSubImage2D(3553,X,E.x,E.y,te,ct,Xe,St,W.image.data):W.isCompressedTexture?oe.compressedTexSubImage2D(3553,X,E.x,E.y,W.mipmaps[0].width,W.mipmaps[0].height,Xe,W.mipmaps[0].data):oe.texSubImage2D(3553,X,E.x,E.y,Xe,St,W.image),0===X&&Z.generateMipmaps&&oe.generateMipmap(3553),Re.unbindTexture()},this.copyTextureToTexture3D=function(E,W,Z,X,te=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ct=E.max.x-E.min.x+1,Xe=E.max.y-E.min.y+1,St=E.max.z-E.min.z+1,ut=ae.convert(X.format),Bt=ae.convert(X.type);let Et;if(X.isDataTexture3D)pe.setTexture3D(X,0),Et=32879;else{if(!X.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");pe.setTexture2DArray(X,0),Et=35866}oe.pixelStorei(37440,X.flipY),oe.pixelStorei(37441,X.premultiplyAlpha),oe.pixelStorei(3317,X.unpackAlignment);const Ot=oe.getParameter(3314),Cn=oe.getParameter(32878),ul=oe.getParameter(3316),jt=oe.getParameter(3315),Uh=oe.getParameter(32877),dn=Z.isCompressedTexture?Z.mipmaps[0]:Z.image;oe.pixelStorei(3314,dn.width),oe.pixelStorei(32878,dn.height),oe.pixelStorei(3316,E.min.x),oe.pixelStorei(3315,E.min.y),oe.pixelStorei(32877,E.min.z),Z.isDataTexture||Z.isDataTexture3D?oe.texSubImage3D(Et,te,W.x,W.y,W.z,ct,Xe,St,ut,Bt,dn.data):Z.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),oe.compressedTexSubImage3D(Et,te,W.x,W.y,W.z,ct,Xe,St,ut,dn.data)):oe.texSubImage3D(Et,te,W.x,W.y,W.z,ct,Xe,St,ut,Bt,dn),oe.pixelStorei(3314,Ot),oe.pixelStorei(32878,Cn),oe.pixelStorei(3316,ul),oe.pixelStorei(3315,jt),oe.pixelStorei(32877,Uh),0===te&&X.generateMipmaps&&oe.generateMipmap(Et),Re.unbindTexture()},this.initTexture=function(E){pe.setTexture2D(E,0),Re.unbindTexture()},this.resetState=function(){g=0,_=0,v=null,Re.reset(),Ie.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Kt.prototype.isWebGLRenderer=!0,class I$ extends Kt{}.prototype.isWebGL1Renderer=!0;class bm{constructor(e,t=25e-5){this.name="",this.color=new _e(e),this.density=t}clone(){return new bm(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}bm.prototype.isFogExp2=!0;class wm{constructor(e,t=1,n=1e3){this.name="",this.color=new _e(e),this.near=t,this.far=n}clone(){return new wm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}wm.prototype.isFog=!0;class xm extends It{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}xm.prototype.isScene=!0;class zo{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Fd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=rr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}zo.prototype.isInterleavedBuffer=!0;const An=new M;class ps{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)An.x=this.getX(t),An.y=this.getY(t),An.z=this.getZ(t),An.applyMatrix4(e),this.setXYZ(t,An.x,An.y,An.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)An.x=this.getX(t),An.y=this.getY(t),An.z=this.getZ(t),An.applyNormalMatrix(e),this.setXYZ(t,An.x,An.y,An.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)An.x=this.getX(t),An.y=this.getY(t),An.z=this.getZ(t),An.transformDirection(e),this.setXYZ(t,An.x,An.y,An.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Zt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ps(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}ps.prototype.isInterleavedBufferAttribute=!0;class g0 extends Un{constructor(e){super(),this.type="SpriteMaterial",this.color=new _e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Uc;g0.prototype.isSpriteMaterial=!0;const qd=new M,Gc=new M,jc=new M,Wc=new Q,Yd=new Q,CI=new Oe,Mm=new M,Xd=new M,Cm=new M,SI=new Q,_0=new Q,EI=new Q;function Sm(i,e,t,n,r,s){Wc.subVectors(i,t).addScalar(.5).multiply(n),void 0!==r?(Yd.x=s*Wc.x-r*Wc.y,Yd.y=r*Wc.x+s*Wc.y):Yd.copy(Wc),i.copy(e),i.x+=Yd.x,i.y+=Yd.y,i.applyMatrix4(CI)}(class y0 extends It{constructor(e){if(super(),this.type="Sprite",void 0===Uc){Uc=new je;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new zo(t,5);Uc.setIndex([0,1,2,0,2,3]),Uc.setAttribute("position",new ps(n,3,0,!1)),Uc.setAttribute("uv",new ps(n,2,3,!1))}this.geometry=Uc,this.material=void 0!==e?e:new g0,this.center=new Q(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gc.setFromMatrixScale(this.matrixWorld),CI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Gc.multiplyScalar(-jc.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;Sm(Mm.set(-.5,-.5,0),jc,o,Gc,r,s),Sm(Xd.set(.5,-.5,0),jc,o,Gc,r,s),Sm(Cm.set(.5,.5,0),jc,o,Gc,r,s),SI.set(0,0),_0.set(1,0),EI.set(1,1);let a=e.ray.intersectTriangle(Mm,Xd,Cm,!1,qd);if(null===a&&(Sm(Xd.set(-.5,.5,0),jc,o,Gc,r,s),_0.set(0,1),a=e.ray.intersectTriangle(Mm,Cm,Xd,!1,qd),null===a))return;const l=e.ray.origin.distanceTo(qd);l<e.near||l>e.far||t.push({distance:l,point:qd.clone(),uv:zn.getUV(qd,Mm,Xd,Cm,SI,_0,EI,new Q),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const TI=new M,AI=new Xt,II=new Xt,R$=new M,kI=new Oe;class Dm extends qt{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Oe,this.bindMatrixInverse=new Oe}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Xt,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;AI.fromBufferAttribute(r.attributes.skinIndex,e),II.fromBufferAttribute(r.attributes.skinWeight,e),TI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=II.getComponent(s);if(0!==o){const a=AI.getComponent(s);kI.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(R$.copy(TI).applyMatrix4(kI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}Dm.prototype.isSkinnedMesh=!0;class Tm extends It{constructor(){super(),this.type="Bone"}}Tm.prototype.isBone=!0;class Uo extends Vn{constructor(e=null,t=1,n=1,r,s,o,a,l,c=pn,u=pn,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={data:e,width:t,height:n},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Uo.prototype.isDataTexture=!0;const RI=new Oe,P$=new Oe;class Am{constructor(e=[],t=[]){this.uuid=rr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Oe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Oe;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)RI.multiplyMatrices(e[s]?e[s].matrixWorld:P$,t[s]),RI.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Am(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=SA(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Uo(t,e,e,wi,$s);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Tm),this.bones.push(o),this.boneInverses.push((new Oe).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class $c extends Zt{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}$c.prototype.isInstancedBufferAttribute=!0;const PI=new Oe,FI=new Oe,Im=[],Zd=new qt;(class LI extends qt{constructor(e,t,n){super(e,t),this.instanceMatrix=new $c(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Zd.geometry=this.geometry,Zd.material=this.material,void 0!==Zd.material)for(let s=0;s<r;s++){this.getMatrixAt(s,PI),FI.multiplyMatrices(n,PI),Zd.matrixWorld=FI,Zd.raycast(e,Im);for(let o=0,a=Im.length;o<a;o++){const l=Im[o];l.instanceId=s,l.object=this,t.push(l)}Im.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new $c(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Qn extends Un{constructor(e){super(),this.type="LineBasicMaterial",this.color=new _e(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Qn.prototype.isLineBasicMaterial=!0;const OI=new M,NI=new M,BI=new Oe,v0=new Na,km=new Ro;class to extends It{constructor(e=new je,t=new Qn){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)OI.fromBufferAttribute(t,r-1),NI.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=OI.distanceTo(NI);e.setAttribute("lineDistance",new Ve(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),km.copy(n.boundingSphere),km.applyMatrix4(r),km.radius+=s,!1===e.ray.intersectsSphere(km))return;BI.copy(r).invert(),v0.copy(e.ray).applyMatrix4(BI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new M,u=new M,d=new M,h=new M,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const f=n.index,y=n.attributes.position;if(null!==f)for(let v=Math.max(0,o.start),b=Math.min(f.count,o.start+o.count)-1;v<b;v+=p){const x=f.getX(v),S=f.getX(v+1);if(c.fromBufferAttribute(y,x),u.fromBufferAttribute(y,S),v0.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(h);I<e.near||I>e.far||t.push({distance:I,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(let v=Math.max(0,o.start),b=Math.min(y.count,o.start+o.count)-1;v<b;v+=p){if(c.fromBufferAttribute(y,v),u.fromBufferAttribute(y,v+1),v0.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||t.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}to.prototype.isLine=!0;const VI=new M,HI=new M;class no extends to{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)VI.fromBufferAttribute(t,r),HI.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+VI.distanceTo(HI);e.setAttribute("lineDistance",new Ve(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}no.prototype.isLineSegments=!0;class b0 extends to{constructor(e,t){super(e,t),this.type="LineLoop"}}b0.prototype.isLineLoop=!0;class fs extends Un{constructor(e){super(),this.type="PointsMaterial",this.color=new _e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}fs.prototype.isPointsMaterial=!0;const zI=new Oe,w0=new Na,Rm=new Ro,Pm=new M;class Go extends It{constructor(e=new je,t=new fs){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Rm.copy(n.boundingSphere),Rm.applyMatrix4(r),Rm.radius+=s,!1===e.ray.intersectsSphere(Rm))return;zI.copy(r).invert(),w0.copy(e.ray).applyMatrix4(zI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(n.isBufferGeometry){const c=n.index,d=n.attributes.position;if(null!==c)for(let f=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);f<m;f++){const y=c.getX(f);Pm.fromBufferAttribute(d,y),UI(Pm,y,l,r,e,t,this)}else for(let f=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);f<m;f++)Pm.fromBufferAttribute(d,f),UI(Pm,f,l,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function UI(i,e,t,n,r,s,o){const a=w0.distanceSqToPoint(i);if(a<t){const l=new M;w0.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}Go.prototype.isPoints=!0,class F$ extends Vn{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.format=void 0!==a?a:us,this.minFilter=void 0!==o?o:Bn,this.magFilter=void 0!==s?s:Bn,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class GI extends Vn{constructor(e,t,n,r,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class L$ extends Vn{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class qc extends je{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new M,u=new Q;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=n+d/t*r;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ve(o,3)),this.setAttribute("normal",new Ve(a,3)),this.setAttribute("uv",new Ve(l,2))}static fromJSON(e){return new qc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}new M,new M,new M,new zn;class Er{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;o=t||e*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Q:new M);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new M,r=[],s=[],o=[],a=new M,l=new Oe;for(let p=0;p<=e;p++)r[p]=this.getTangentAt(p/e,new M);s[0]=new M,o[0]=new M;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();const f=Math.acos(ci(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,f))}o[p].crossVectors(r[p],s[p])}if(!0===t){let p=Math.acos(ci(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let f=1;f<=e;f++)s[f].applyMatrix4(l.makeRotationAxis(r[f],p*f)),o[f].crossVectors(r[f],s[f])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Vm extends Er{constructor(e=0,t=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new Q,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*d+this.aX,c=h*d+p*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Vm.prototype.isEllipseCurve=!0;class WI extends Vm{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.type="ArcCurve"}}function M0(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,p*=u,r(o,a,h,p)},calc:function(s){const o=s*s;return i+e*s+t*o+n*(o*s)}}}WI.prototype.isArcCurve=!0;const Hm=new M,C0=new M0,S0=new M0,E0=new M0;class D0 extends Er{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new M){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(Hm.subVectors(r[0],r[1]).add(r[0]),c=Hm);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Hm.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Hm),"centripetal"===this.curveType||"chordal"===this.curveType){const p="chordal"===this.curveType?.5:.25;let f=Math.pow(c.distanceToSquared(d),p),m=Math.pow(d.distanceToSquared(h),p),y=Math.pow(h.distanceToSquared(u),p);m<1e-4&&(m=1),f<1e-4&&(f=m),y<1e-4&&(y=m),C0.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,f,m,y),S0.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,f,m,y),E0.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,f,m,y)}else"catmullrom"===this.curveType&&(C0.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),S0.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),E0.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return n.set(C0.calc(l),S0.calc(l),E0.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new M).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function $I(i,e,t,n,r){const s=.5*(n-e),o=.5*(r-t),a=i*i;return(2*t-2*n+s+o)*(i*a)+(-3*t+3*n-2*s-o)*a+s*i+t}function Kd(i,e,t,n){return function O$(i,e){const t=1-i;return t*t*e}(i,e)+function N$(i,e){return 2*(1-i)*i*e}(i,t)+function B$(i,e){return i*i*e}(i,n)}function Qd(i,e,t,n,r){return function V$(i,e){const t=1-i;return t*t*t*e}(i,e)+function H$(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function z$(i,e){return 3*(1-i)*i*i*e}(i,n)+function U$(i,e){return i*i*i*e}(i,r)}D0.prototype.isCatmullRomCurve3=!0;class T0 extends Er{constructor(e=new Q,t=new Q,n=new Q,r=new Q){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Q){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Qd(e,r.x,s.x,o.x,a.x),Qd(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}T0.prototype.isCubicBezierCurve=!0;class qI extends Er{constructor(e=new M,t=new M,n=new M,r=new M){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new M){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Qd(e,r.x,s.x,o.x,a.x),Qd(e,r.y,s.y,o.y,a.y),Qd(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}qI.prototype.isCubicBezierCurve3=!0;class zm extends Er{constructor(e=new Q,t=new Q){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Q){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Q;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}zm.prototype.isLineCurve=!0;class A0 extends Er{constructor(e=new Q,t=new Q,n=new Q){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Q){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Kd(e,r.x,s.x,o.x),Kd(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}A0.prototype.isQuadraticBezierCurve=!0;class I0 extends Er{constructor(e=new M,t=new M,n=new M){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new M){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Kd(e,r.x,s.x,o.x),Kd(e,r.y,s.y,o.y),Kd(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}I0.prototype.isQuadraticBezierCurve3=!0;class k0 extends Er{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Q){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return n.set($I(a,l.x,c.x,u.x,d.x),$I(a,l.y,c.y,u.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new Q).fromArray(r))}return this}}k0.prototype.isSplineCurve=!0;var R0=Object.freeze({__proto__:null,ArcCurve:WI,CatmullRomCurve3:D0,CubicBezierCurve:T0,CubicBezierCurve3:qI,EllipseCurve:Vm,LineCurve:zm,LineCurve3:class G$ extends Er{constructor(e=new M,t=new M){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new M){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:A0,QuadraticBezierCurve3:I0,SplineCurve:k0});class j$ extends Er{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new zm(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push((new R0[r.type]).fromJSON(r))}return this}}class Um extends j${constructor(e){super(),this.type="Path",this.currentPoint=new Q,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new zm(this.currentPoint.clone(),new Q(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new A0(this.currentPoint.clone(),new Q(e,t),new Q(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new T0(this.currentPoint.clone(),new Q(e,t),new Q(n,r),new Q(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new k0(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new Vm(e,t,n,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class io extends Um{constructor(e){super(e),this.uuid=rr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push((new Um).fromJSON(r))}return this}}function YI(i,e,t,n,r){let s,o;if(r===function aq(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,e,t,n)>0)for(s=e;s<t;s+=n)o=KI(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=KI(s,i[s],i[s+1],o);return o&&Gm(o,o.next)&&(th(o),o=o.next),o}function Wo(i,e){if(!i)return i;e||(e=i);let n,t=i;do{if(n=!1,t.steiner||!Gm(t,t.next)&&0!==gn(t.prev,t,t.next))t=t.next;else{if(th(t),t=e=t.prev,t===t.next)break;n=!0}}while(n||t!==e);return e}function Jd(i,e,t,n,r,s,o){if(!i)return;!o&&s&&function tq(i,e,t,n){let r=i;do{null===r.z&&(r.z=P0(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function nq(i){let e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,n);e++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1)}(r)}(i,n,r,s);let l,c,a=i;for(;i.prev!==i.next;)if(l=i.prev,c=i.next,s?q$(i,n,r,s):$$(i))e.push(l.i/t),e.push(i.i/t),e.push(c.i/t),th(i),i=c.next,a=c.next;else if((i=c)===a){o?1===o?Jd(i=Y$(Wo(i),e,t),e,t,n,r,s,2):2===o&&X$(i,e,t,n,r,s):Jd(Wo(i),e,t,n,r,s,1);break}}function $$(i){const e=i.prev,t=i,n=i.next;if(gn(e,t,n)>=0)return!1;let r=i.next.next;for(;r!==i.prev;){if(Xc(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)&&gn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function q$(i,e,t,n){const r=i.prev,s=i,o=i.next;if(gn(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=P0(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,n),h=P0(c,u,e,t,n);let p=i.prevZ,f=i.nextZ;for(;p&&p.z>=d&&f&&f.z<=h;){if(p!==i.prev&&p!==i.next&&Xc(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&gn(p.prev,p,p.next)>=0||(p=p.prevZ,f!==i.prev&&f!==i.next&&Xc(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&gn(f.prev,f,f.next)>=0))return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==i.prev&&p!==i.next&&Xc(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&gn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==i.prev&&f!==i.next&&Xc(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&gn(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Y$(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!Gm(r,s)&&XI(r,n,n.next,s)&&eh(r,s)&&eh(s,r)&&(e.push(r.i/t),e.push(n.i/t),e.push(s.i/t),th(n),th(n.next),n=i=s),n=n.next}while(n!==i);return Wo(n)}function X$(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&rq(o,a)){let l=ZI(o,a);return o=Wo(o,o.next),l=Wo(l,l.next),Jd(o,e,t,n,r,s),void Jd(l,e,t,n,r,s)}a=a.next}o=o.next}while(o!==i)}function K$(i,e){return i.x-e.x}function Q$(i,e){if(e=function J$(i,e){let t=e;const n=i.x,r=i.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>s){if(s=h,h===n){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(n===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;t=o;do{n>=t.x&&t.x>=l&&n!==t.x&&Xc(r<c?n:s,r,l,c,r<c?s:n,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(n-t.x),eh(t,i)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&eq(o,t)))&&(o=t,u=d)),t=t.next}while(t!==a);return o}(i,e),e){const t=ZI(e,i);Wo(e,e.next),Wo(t,t.next)}}function eq(i,e){return gn(i.prev,i,e.prev)<0&&gn(e.next,i,i.next)<0}function P0(i,e,t,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-t)*r)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iq(i){let e=i,t=i;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==i);return t}function Xc(i,e,t,n,r,s,o,a){return(r-o)*(e-a)-(i-o)*(s-a)>=0&&(i-o)*(n-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(n-a)>=0}function rq(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function sq(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&XI(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}(i,e)&&(eh(i,e)&&eh(e,i)&&function oq(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next}while(t!==i);return n}(i,e)&&(gn(i.prev,i,e.prev)||gn(i,e.prev,e))||Gm(i,e)&&gn(i.prev,i,i.next)>0&&gn(e.prev,e,e.next)>0)}function gn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Gm(i,e){return i.x===e.x&&i.y===e.y}function XI(i,e,t,n){const r=Wm(gn(i,e,t)),s=Wm(gn(i,e,n)),o=Wm(gn(t,n,i)),a=Wm(gn(t,n,e));return!!(r!==s&&o!==a||0===r&&jm(i,t,e)||0===s&&jm(i,n,e)||0===o&&jm(t,i,n)||0===a&&jm(t,e,n))}function jm(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Wm(i){return i>0?1:i<0?-1:0}function eh(i,e){return gn(i.prev,i,i.next)<0?gn(i,e,i.next)>=0&&gn(i,i.prev,e)>=0:gn(i,e,i.prev)<0||gn(i,i.next,e)<0}function ZI(i,e){const t=new F0(i.i,i.x,i.y),n=new F0(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function KI(i,e,t,n){const r=new F0(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function th(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function F0(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ro{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*n}static isClockWise(e){return ro.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];QI(e),JI(n,e);let o=e.length;t.forEach(QI);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,JI(n,t[l]);const a=function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=YI(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,p;if(n&&(s=function Z$(i,e,t,n){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=YI(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(iq(c));for(r.sort(K$),s=0;s<r.length;s++)Q$(r[s],t),t=Wo(t,t.next);return t}(i,e,s,t)),i.length>80*t){a=c=i[0],l=u=i[1];for(let f=t;f<r;f+=t)d=i[f],h=i[f+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-a,u-l),p=0!==p?1/p:0}return Jd(s,o,t,a,l,p),o}(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function QI(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function JI(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class so extends je{constructor(e=new io([new Q(.5,.5),new Q(-.5,.5),new Q(-.5,-.5),new Q(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,p=void 0!==t.bevelThickness?t.bevelThickness:.2,f=void 0!==t.bevelSize?t.bevelSize:p-.1,m=void 0!==t.bevelOffset?t.bevelOffset:0,y=void 0!==t.bevelSegments?t.bevelSegments:3;const g=t.extrudePath,_=void 0!==t.UVGenerator?t.UVGenerator:lq;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let v,x,S,w,I,b=!1;g&&(v=g.getSpacedPoints(u),b=!0,h=!1,x=g.computeFrenetFrames(u,!1),S=new M,w=new M,I=new M),h||(y=0,p=0,f=0,m=0);const z=a.extractPoints(c);let B=z.shape;const R=z.holes;if(!ro.isClockWise(B)){B=B.reverse();for(let K=0,pe=R.length;K<pe;K++){const me=R[K];ro.isClockWise(me)&&(R[K]=me.reverse())}}const V=ro.triangulateShape(B,R),H=B;for(let K=0,pe=R.length;K<pe;K++)B=B.concat(R[K]);function j(K,pe,me){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(me).add(K)}const P=B.length,F=V.length;function q(K,pe,me){let Le,Ae,ht;const pt=K.x-pe.x,kt=K.y-pe.y,un=me.x-K.x,k=me.y-K.y,D=pt*pt+kt*kt;if(Math.abs(pt*k-kt*un)>Number.EPSILON){const re=Math.sqrt(D),Ue=Math.sqrt(un*un+k*k),ze=pe.x-kt/re,N=pe.y+pt/re,Ie=((me.x-k/Ue-ze)*k-(me.y+un/Ue-N)*un)/(pt*k-kt*un);Le=ze+pt*Ie-K.x,Ae=N+kt*Ie-K.y;const Me=Le*Le+Ae*Ae;if(Me<=2)return new Q(Le,Ae);ht=Math.sqrt(Me/2)}else{let re=!1;pt>Number.EPSILON?un>Number.EPSILON&&(re=!0):pt<-Number.EPSILON?un<-Number.EPSILON&&(re=!0):Math.sign(kt)===Math.sign(k)&&(re=!0),re?(Le=-kt,Ae=pt,ht=Math.sqrt(D)):(Le=pt,Ae=kt,ht=Math.sqrt(D/2))}return new Q(Le/ht,Ae/ht)}const ie=[];for(let K=0,pe=H.length,me=pe-1,Le=K+1;K<pe;K++,me++,Le++)me===pe&&(me=0),Le===pe&&(Le=0),ie[K]=q(H[K],H[me],H[Le]);const Y=[];let ee,ge=ie.concat();for(let K=0,pe=R.length;K<pe;K++){const me=R[K];ee=[];for(let Le=0,Ae=me.length,ht=Ae-1,pt=Le+1;Le<Ae;Le++,ht++,pt++)ht===Ae&&(ht=0),pt===Ae&&(pt=0),ee[Le]=q(me[Le],me[ht],me[pt]);Y.push(ee),ge=ge.concat(ee)}for(let K=0;K<y;K++){const pe=K/y,me=p*Math.cos(pe*Math.PI/2),Le=f*Math.sin(pe*Math.PI/2)+m;for(let Ae=0,ht=H.length;Ae<ht;Ae++){const pt=j(H[Ae],ie[Ae],Le);U(pt.x,pt.y,-me)}for(let Ae=0,ht=R.length;Ae<ht;Ae++){const pt=R[Ae];ee=Y[Ae];for(let kt=0,un=pt.length;kt<un;kt++){const k=j(pt[kt],ee[kt],Le);U(k.x,k.y,-me)}}}const ye=f+m;for(let K=0;K<P;K++){const pe=h?j(B[K],ge[K],ye):B[K];b?(w.copy(x.normals[0]).multiplyScalar(pe.x),S.copy(x.binormals[0]).multiplyScalar(pe.y),I.copy(v[0]).add(w).add(S),U(I.x,I.y,I.z)):U(pe.x,pe.y,0)}for(let K=1;K<=u;K++)for(let pe=0;pe<P;pe++){const me=h?j(B[pe],ge[pe],ye):B[pe];b?(w.copy(x.normals[K]).multiplyScalar(me.x),S.copy(x.binormals[K]).multiplyScalar(me.y),I.copy(v[K]).add(w).add(S),U(I.x,I.y,I.z)):U(me.x,me.y,d/u*K)}for(let K=y-1;K>=0;K--){const pe=K/y,me=p*Math.cos(pe*Math.PI/2),Le=f*Math.sin(pe*Math.PI/2)+m;for(let Ae=0,ht=H.length;Ae<ht;Ae++){const pt=j(H[Ae],ie[Ae],Le);U(pt.x,pt.y,d+me)}for(let Ae=0,ht=R.length;Ae<ht;Ae++){const pt=R[Ae];ee=Y[Ae];for(let kt=0,un=pt.length;kt<un;kt++){const k=j(pt[kt],ee[kt],Le);b?U(k.x,k.y+v[u-1].y,v[u-1].x+me):U(k.x,k.y,d+me)}}}function oe(K,pe){let me=K.length;for(;--me>=0;){const Le=me;let Ae=me-1;Ae<0&&(Ae=K.length-1);for(let ht=0,pt=u+2*y;ht<pt;ht++){const kt=P*ht,un=P*(ht+1);he(pe+Le+kt,pe+Ae+kt,pe+Ae+un,pe+Le+un)}}}function U(K,pe,me){l.push(K),l.push(pe),l.push(me)}function le(K,pe,me){Re(K),Re(pe),Re(me);const Le=r.length/3,Ae=_.generateTopUV(n,r,Le-3,Le-2,Le-1);Qe(Ae[0]),Qe(Ae[1]),Qe(Ae[2])}function he(K,pe,me,Le){Re(K),Re(pe),Re(Le),Re(pe),Re(me),Re(Le);const Ae=r.length/3,ht=_.generateSideWallUV(n,r,Ae-6,Ae-3,Ae-2,Ae-1);Qe(ht[0]),Qe(ht[1]),Qe(ht[3]),Qe(ht[1]),Qe(ht[2]),Qe(ht[3])}function Re(K){r.push(l[3*K+0]),r.push(l[3*K+1]),r.push(l[3*K+2])}function Qe(K){s.push(K.x),s.push(K.y)}(function fe(){const K=r.length/3;if(h){let pe=0,me=P*pe;for(let Le=0;Le<F;Le++){const Ae=V[Le];le(Ae[2]+me,Ae[1]+me,Ae[0]+me)}pe=u+2*y,me=P*pe;for(let Le=0;Le<F;Le++){const Ae=V[Le];le(Ae[0]+me,Ae[1]+me,Ae[2]+me)}}else{for(let pe=0;pe<F;pe++){const me=V[pe];le(me[2],me[1],me[0])}for(let pe=0;pe<F;pe++){const me=V[pe];le(me[0]+P*u,me[1]+P*u,me[2]+P*u)}}n.addGroup(K,r.length/3-K,0)})(),function xt(){const K=r.length/3;let pe=0;oe(H,pe),pe+=H.length;for(let me=0,Le=R.length;me<Le;me++){const Ae=R[me];oe(Ae,pe),pe+=Ae.length}n.addGroup(K,r.length/3-K,1)}()}this.setAttribute("position",new Ve(r,3)),this.setAttribute("uv",new Ve(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function cq(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)t.shapes.push(i[n].uuid);else t.shapes.push(i.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++)n.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new R0[r.type]).fromJSON(r)),new so(n,e.options)}}const lq={generateTopUV:function(i,e,t,n,r){const a=e[3*n],l=e[3*n+1],c=e[3*r],u=e[3*r+1];return[new Q(e[3*t],e[3*t+1]),new Q(a,l),new Q(c,u)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*n],u=e[3*n+1],d=e[3*n+2],h=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*s],y=e[3*s+1],g=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new Q(o,1-l),new Q(c,1-d),new Q(h,1-f),new Q(m,1-g)]:[new Q(a,1-l),new Q(u,1-d),new Q(p,1-f),new Q(y,1-g)]}};class ih extends je{constructor(e=.5,t=1,n=8,r=1,s=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n);const a=[],l=[],c=[],u=[];let d=e;const h=(t-e)/(r=Math.max(1,r)),p=new M,f=new Q;for(let m=0;m<=r;m++){for(let y=0;y<=n;y++){const g=s+y/n*o;p.x=d*Math.cos(g),p.y=d*Math.sin(g),l.push(p.x,p.y,p.z),c.push(0,0,1),f.x=(p.x/t+1)/2,f.y=(p.y/t+1)/2,u.push(f.x,f.y)}d+=h}for(let m=0;m<r;m++){const y=m*(n+1);for(let g=0;g<n;g++){const _=g+y,b=_+n+1,x=_+n+2,S=_+1;a.push(_,b,S),a.push(b,x,S)}}this.setIndex(a),this.setAttribute("position",new Ve(l,3)),this.setAttribute("normal",new Ve(c,3)),this.setAttribute("uv",new Ve(u,2))}static fromJSON(e){return new ih(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class rh extends je{constructor(e=new io([new Q(0,.5),new Q(-.5,-.5),new Q(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=r.length/3,h=u.extractPoints(t);let p=h.shape;const f=h.holes;!1===ro.isClockWise(p)&&(p=p.reverse());for(let y=0,g=f.length;y<g;y++){const _=f[y];!0===ro.isClockWise(_)&&(f[y]=_.reverse())}const m=ro.triangulateShape(p,f);for(let y=0,g=f.length;y<g;y++)p=p.concat(f[y]);for(let y=0,g=p.length;y<g;y++){const _=p[y];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let y=0,g=m.length;y<g;y++){const _=m[y];n.push(_[0]+d,_[1]+d,_[2]+d),l+=3}}this.setIndex(n),this.setAttribute("position",new Ve(r,3)),this.setAttribute("normal",new Ve(s,3)),this.setAttribute("uv",new Ve(o,2))}toJSON(){const e=super.toJSON();return function uq(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++)e.shapes.push(i[t].uuid);else e.shapes.push(i.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++)n.push(t[e.shapes[r]]);return new rh(n,e.curveSegments)}}class $o extends je{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new M,h=new M,p=[],f=[],m=[],y=[];for(let g=0;g<=n;g++){const _=[],v=g/n;let b=0;0==g&&0==o?b=.5/t:g==n&&l==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){const S=x/t;d.x=-e*Math.cos(r+S*s)*Math.sin(o+v*a),d.y=e*Math.cos(o+v*a),d.z=e*Math.sin(r+S*s)*Math.sin(o+v*a),f.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),y.push(S+b,1-v),_.push(c++)}u.push(_)}for(let g=0;g<n;g++)for(let _=0;_<t;_++){const v=u[g][_+1],b=u[g][_],x=u[g+1][_],S=u[g+1][_+1];(0!==g||o>0)&&p.push(v,b,S),(g!==n-1||l<Math.PI)&&p.push(b,x,S)}this.setIndex(p),this.setAttribute("position",new Ve(f,3)),this.setAttribute("normal",new Ve(m,3)),this.setAttribute("uv",new Ve(y,2))}static fromJSON(e){return new $o(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sh extends je{constructor(e=new I0(new M(-1,-1,0),new M(-1,1,0),new M(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new M,l=new M,c=new Q;let u=new M;const d=[],h=[],p=[],f=[];function y(v){u=e.getPointAt(v/t,u);const b=o.normals[v],x=o.binormals[v];for(let S=0;S<=r;S++){const w=S/r*Math.PI*2,I=Math.sin(w),z=-Math.cos(w);l.x=z*b.x+I*x.x,l.y=z*b.y+I*x.y,l.z=z*b.z+I*x.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+n*l.x,a.y=u.y+n*l.y,a.z=u.z+n*l.z,d.push(a.x,a.y,a.z)}}(function m(){for(let v=0;v<t;v++)y(v);y(!1===s?t:0),function _(){for(let v=0;v<=t;v++)for(let b=0;b<=r;b++)c.x=v/t,c.y=b/r,p.push(c.x,c.y)}(),function g(){for(let v=1;v<=t;v++)for(let b=1;b<=r;b++){const S=(r+1)*v+(b-1),w=(r+1)*v+b,I=(r+1)*(v-1)+b;f.push((r+1)*(v-1)+(b-1),S,I),f.push(S,w,I)}}()})(),this.setIndex(f),this.setAttribute("position",new Ve(d,3)),this.setAttribute("normal",new Ve(h,3)),this.setAttribute("uv",new Ve(p,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new sh((new R0[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}(class ik extends Un{constructor(e){super(),this.type="ShadowMaterial",this.color=new _e(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class Zc extends Un{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Zc.prototype.isMeshStandardMaterial=!0;class qo extends Zc{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Q(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ci(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new _e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new _e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _e(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}qo.prototype.isMeshPhysicalMaterial=!0;(class rk extends Un{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new _e(16777215),this.specular=new _e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class sk extends Un{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class ok extends Un{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;class oh extends Un{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new _e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}oh.prototype.isMeshLambertMaterial=!0;(class ak extends Un{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class lk extends Qn{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const fn={arraySlice:function(i,e,t){return fn.isTypedArray(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function e(r,s){return i[r]-i[s]}),n},sortedArray:function(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r},flattenJSON:function(i,e,t,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),t.push(o)),s=i[r++]}while(void 0!==s)},subclip:function(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let p=0;p<c.times.length;++p){const f=c.times[p]*r;if(!(f<t||f>=n)){d.push(c.times[p]);for(let m=0;m<u;++m)h.push(c.values[p*u+m])}}0!==d.length&&(c.times=fn.convertArray(d,c.times.constructor),c.values=fn.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=i.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const f=a.times.length-1;let m;if(s<=a.times[0])m=fn.arraySlice(a.values,u,d-u);else if(s>=a.times[f]){const g=f*d+u;m=fn.arraySlice(a.values,g,g+d-u)}else{const g=a.createInterpolant(),_=u,v=d-u;g.evaluate(s),m=fn.arraySlice(g.resultBuffer,_,v)}"quaternion"===l&&(new Hn).fromArray(m).normalize().conjugate().toArray(m);const y=c.times.length;for(let g=0;g<y;++g){const _=g*p+h;if("quaternion"===l)Hn.multiplyQuaternionsFlat(c.values,_,m,0,c.values,_);else{const v=p-2*h;for(let b=0;b<v;++b)c.values[_+b]-=m[b]}}}return i.blendMode=2501,i}};class oo{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,s)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,s,e)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}oo.prototype.beforeStart_=oo.prototype.copySampleValue_,oo.prototype.afterEnd_=oo.prototype.copySampleValue_;class hq extends oo{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:vc,endingEnd:vc}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case bc:s=e,a=2*t-n;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case bc:o=e,l=2*n-t;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-t)/(r-t),m=f*f,y=m*f,g=-h*y+2*h*m-h*f,_=(1+h)*y+(-1.5-2*h)*m+(-.5+h)*f+1,v=(-1-p)*y+(1.5+p)*m+.5*f,b=p*y-p*m;for(let x=0;x!==a;++x)s[x]=g*o[u+x]+_*o[c+x]+v*o[l+x]+b*o[d+x];return s}}class ck extends oo{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(n-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class pq extends oo{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ms{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fn.convertArray(t,this.TimeBufferType),this.values=fn.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:fn.convertArray(e.times,Array),values:fn.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new pq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ck(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hq(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pd:t=this.InterpolantFactoryMethodDiscrete;break;case yc:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pd;case this.InterpolantFactoryMethodLinear:return yc;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=fn.arraySlice(n,s,o),this.values=fn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&fn.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=fn.arraySlice(this.times),t=fn.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*n,h=d-n,p=d+n;for(let f=0;f!==n;++f){const m=t[d+f];if(m!==t[h+f]||m!==t[p+f]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*n,h=o*n;for(let p=0;p!==n;++p)t[h+p]=t[d+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=fn.arraySlice(e,0,o),this.values=fn.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=fn.arraySlice(this.times,0),t=fn.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ms.prototype.TimeBufferType=Float32Array,ms.prototype.ValueBufferType=Float32Array,ms.prototype.DefaultInterpolation=yc;class Kc extends ms{}Kc.prototype.ValueTypeName="bool",Kc.prototype.ValueBufferType=Array,Kc.prototype.DefaultInterpolation=Pd,Kc.prototype.InterpolantFactoryMethodLinear=void 0,Kc.prototype.InterpolantFactoryMethodSmooth=void 0;class uk extends ms{}uk.prototype.ValueTypeName="color";class ah extends ms{}ah.prototype.ValueTypeName="number";class fq extends oo{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Hn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ua extends ms{InterpolantFactoryMethodLinear(e){return new fq(this.times,this.values,this.getValueSize(),e)}}Ua.prototype.ValueTypeName="quaternion",Ua.prototype.DefaultInterpolation=yc,Ua.prototype.InterpolantFactoryMethodSmooth=void 0;class Qc extends ms{}Qc.prototype.ValueTypeName="string",Qc.prototype.ValueBufferType=Array,Qc.prototype.DefaultInterpolation=Pd,Qc.prototype.InterpolantFactoryMethodLinear=void 0,Qc.prototype.InterpolantFactoryMethodSmooth=void 0;class lh extends ms{}lh.prototype.ValueTypeName="vector";class ch{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=rr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(gq(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(ms.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=fn.getKeyframeOrder(l);l=fn.sortedArray(l,1,u),c=fn.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new ah(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,h,p,f,m){if(0!==p.length){const y=[],g=[];fn.flattenJSON(p,y,g,f),0!==y.length&&m.push(new d(h,y,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const p={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let m=0;m<h[f].morphTargets.length;m++)p[h[f].morphTargets[m]]=-1;for(const m in p){const y=[],g=[];for(let _=0;_!==h[f].morphTargets.length;++_){const v=h[f];y.push(v.time),g.push(v.morphTarget===m?1:0)}r.push(new ah(".morphTargetInfluence["+m+"]",y,g))}l=p.length*(o||1)}else{const p=".bones["+t[d].name+"]";n(lh,p+".position",h,"pos",r),n(Ua,p+".quaternion",h,"rot",r),n(lh,p+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gq(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function mq(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ah;case"vector":case"vector2":case"vector3":case"vector4":return lh;case"color":return uk;case"quaternion":return Ua;case"bool":case"boolean":return Kc;case"string":return Qc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],n=[];fn.flattenJSON(i.keys,t,n,"value"),i.times=t,i.values=n}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Jc={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};const _q=new class dk{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],f=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return f}return null}}};class gs{constructor(e){this.manager=void 0!==e?e:_q,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ao={};class lr extends gs{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Jc.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ao[e])return void ao[e].push({onLoad:t,onProgress:n,onError:r});ao[e]=[],ao[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(200===a.status||0===a.status){0===a.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=ao[e],c=a.body.getReader(),u=a.headers.get("Content-Length"),d=u?parseInt(u):0,h=0!==d;let p=0;return new ReadableStream({start(f){!function m(){c.read().then(({done:y,value:g})=>{if(y)f.close();else{p+=g.byteLength;const _=new ProgressEvent("progress",{lengthComputable:h,loaded:p,total:d});for(let v=0,b=l.length;v<b;v++){const x=l[v];x.onProgress&&x.onProgress(_)}f.enqueue(g),m()}})}()}})}throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const l=new Response(a);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>(new DOMParser).parseFromString(c,this.mimeType));case"json":return l.json();default:return l.text()}}).then(a=>{Jc.add(e,a);const l=ao[e];delete ao[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onLoad&&d.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const l=ao[e];delete ao[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onError&&d.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Km extends gs{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Jc.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Kf("img");function l(){u(),Jc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class yq extends gs{constructor(e){super(e)}load(e,t,n,r){const s=new Ud,o=new Km(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class L0 extends gs{constructor(e){super(e)}load(e,t,n,r){const s=new Vn,o=new Km(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class _s extends It{constructor(e,t=1){super(),this.type="Light",this.color=new _e(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}_s.prototype.isLight=!0;(class hk extends _s{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(It.DefaultUp),this.updateMatrix(),this.groundColor=new _e(t)}copy(e){return _s.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const pk=new Oe,fk=new M,mk=new M;class O0{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Q(512,512),this.map=null,this.mapPass=null,this.matrix=new Oe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gm,this._frameExtents=new Q(1,1),this._viewportCount=1,this._viewports=[new Xt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;fk.setFromMatrixPosition(e.matrixWorld),t.position.copy(fk),mk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(mk),t.updateMatrixWorld(),pk.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pk),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gk extends O0{constructor(){super(new Kn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Od*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}gk.prototype.isSpotLightShadow=!0;class N0 extends _s{constructor(e,t,n=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(It.DefaultUp),this.updateMatrix(),this.target=new It,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new gk}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}N0.prototype.isSpotLight=!0;const _k=new Oe,uh=new M,B0=new M;class yk extends O0{constructor(){super(new Kn(90,1,.5,500)),this._frameExtents=new Q(4,2),this._viewportCount=6,this._viewports=[new Xt(2,1,1,1),new Xt(0,1,1,1),new Xt(3,1,1,1),new Xt(1,1,1,1),new Xt(3,0,1,1),new Xt(1,0,1,1)],this._cubeDirections=[new M(1,0,0),new M(-1,0,0),new M(0,0,1),new M(0,0,-1),new M(0,1,0),new M(0,-1,0)],this._cubeUps=[new M(0,1,0),new M(0,1,0),new M(0,1,0),new M(0,1,0),new M(0,0,1),new M(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),uh.setFromMatrixPosition(e.matrixWorld),n.position.copy(uh),B0.copy(n.position),B0.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(B0),n.updateMatrixWorld(),r.makeTranslation(-uh.x,-uh.y,-uh.z),_k.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_k)}}yk.prototype.isPointLightShadow=!0;class Qm extends _s{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new yk}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Qm.prototype.isPointLight=!0;class vk extends O0{constructor(){super(new jd(-5,5,5,-5,.5,500))}}vk.prototype.isDirectionalLightShadow=!0;class V0 extends _s{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(It.DefaultUp),this.updateMatrix(),this.target=new It,this.shadow=new vk}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}V0.prototype.isDirectionalLight=!0;(class bk extends _s{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class wk extends _s{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class xk{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new M)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],n*s*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}xk.prototype.isSphericalHarmonics3=!0;class Jm extends _s{constructor(e=new xk,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Jm.prototype.isLightProbe=!0;class ys{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}(class Mk extends je{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;class Ek extends gs{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Jc.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Jc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let eg;Ek.prototype.isImageBitmapLoader=!0;class Mq extends gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new lr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);(void 0===eg&&(eg=new(window.AudioContext||window.webkitAudioContext)),eg).decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}}(class Cq extends Jm{constructor(e,t,n=1){super(void 0,n);const r=(new _e).set(e),s=(new _e).set(t),o=new M(r.r,r.g,r.b),a=new M(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class Sq extends Jm{constructor(e,t=1){super(void 0,t);const n=(new _e).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class kq{constructor(e,t,n){let r,s,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else o+=t,this._mixBufferRegion(n,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const t=this.buffer,n=this.valueSize,r=n*this._origIndex;this.binding.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Hn.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Hn.multiplyQuaternionsFlat(e,o,e,t,e,n),Hn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const H0="\\[\\]\\.:\\/",Rq=new RegExp("["+H0+"]","g"),z0="[^"+H0+"]",Pq="[^"+H0.replace("\\.","")+"]",Fq=/((?:WC+[\/:])*)/.source.replace("WC",z0),Lq=/(WCOD+)?/.source.replace("WCOD",Pq),Oq=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",z0),Nq=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",z0),Bq=new RegExp("^"+Fq+Lq+Oq+Nq+"$"),Vq=["material","materials","bones"];class Hq{constructor(e,t,n){const r=n||an.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let an=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Rq,"")}static parseTrackName(t){const n=Bq.exec(t);if(!n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Vq.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(!n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Hq,i})();an.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},an.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},an.prototype.GetterByBindingType=[an.prototype._getValue_direct,an.prototype._getValue_array,an.prototype._getValue_arrayElement,an.prototype._getValue_toArray],an.prototype.SetterByBindingTypeAndVersioning=[[an.prototype._setValue_direct,an.prototype._setValue_direct_setNeedsUpdate,an.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[an.prototype._setValue_array,an.prototype._setValue_array_setNeedsUpdate,an.prototype._setValue_array_setMatrixWorldNeedsUpdate],[an.prototype._setValue_arrayElement,an.prototype._setValue_arrayElement_setNeedsUpdate,an.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[an.prototype._setValue_fromArray,an.prototype._setValue_fromArray_setNeedsUpdate,an.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Uq{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:vc,endingEnd:vc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*n;if(l<0||0===n)return;this._startTime=null,t=n*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===n;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===n){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=bc,r.endingEnd=bc):(r.endingStart=e?this.zeroSlopeAtStart?bc:vc:2402,r.endingEnd=t?this.zeroSlopeAtEnd?bc:vc:2402)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}(class Gq extends Ao{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],p=h.name;let f=u[p];if(void 0!==f)o[d]=f;else{if(f=o[d],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,l,p));continue}f=new kq(an.create(n,p,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,l,p),o[d]=f}a[d].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ck(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o="string"==typeof e?ch.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===n)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new Uq(this,o,t,n);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const n=t||this._root,r=n.uuid,s="string"==typeof e?ch.findByName(n,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)e[n].stop();return this}update(e){const t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class U0{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new U0(void 0===this.value.clone?this.value:this.value.clone())}}(class jq extends zo{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const Fk=new Q;class eu{constructor(e=new Q(1/0,1/0),t=new Q(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Fk.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Fk.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}eu.prototype.isBox2=!0;const Yo=new M,ng=new Oe,j0=new Oe;function Nk(i){const e=[];i&&i.isBone&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,Nk(i.children[t]));return e}class Qq{constructor(){this.type="ShapePath",this.color=new _e,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Um,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(_){const v=[];for(let b=0,x=_.length;b<x;b++){const S=_[b],w=new io;w.curves=S.curves,v.push(w)}return v}function r(_,v){const b=v.length;let x=!1;for(let S=b-1,w=0;w<b;S=w++){let I=v[S],z=v[w],B=z.x-I.x,R=z.y-I.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(I=v[w],B=-B,z=v[S],R=-R),_.y<I.y||_.y>z.y)continue;if(_.y===I.y){if(_.x===I.x)return!0}else{const J=R*(_.x-I.x)-B*(_.y-I.y);if(0===J)return!0;if(J<0)continue;x=!x}}else{if(_.y!==I.y)continue;if(z.x<=_.x&&_.x<=I.x||I.x<=_.x&&_.x<=z.x)return!0}}return x}const s=ro.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,l,c;const u=[];if(1===o.length)return l=o[0],c=new io,c.curves=l.curves,u.push(c),u;let d=!s(o[0].getPoints());d=e?!d:d;const h=[],p=[];let y,g,f=[],m=0;p[m]=void 0,f[m]=[];for(let _=0,v=o.length;_<v;_++)l=o[_],y=l.getPoints(),a=s(y),a=e?!a:a,a?(!d&&p[m]&&m++,p[m]={s:new io,p:y},p[m].s.curves=l.curves,d&&m++,f[m]=[]):f[m].push({h:l,p:y[0]});if(!p[0])return n(o);if(p.length>1){let _=!1;const v=[];for(let b=0,x=p.length;b<x;b++)h[b]=[];for(let b=0,x=p.length;b<x;b++){const S=f[b];for(let w=0;w<S.length;w++){const I=S[w];let z=!0;for(let B=0;B<p.length;B++)r(I.p,p[B].p)&&(b!==B&&v.push({froms:b,tos:B,hole:w}),z?(z=!1,h[B].push(I)):_=!0);z&&h[b].push(I)}}v.length>0&&(_||(f=h))}for(let _=0,v=p.length;_<v;_++){c=p[_].s,u.push(c),g=f[_];for(let b=0,x=g.length;b<x;b++)c.holes.push(g[b].h)}return u}}const Gk=new Float32Array(1);new Int32Array(Gk.buffer),Er.create=function(i,e){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(Er.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i},Um.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},class Xq extends no{constructor(e=10,t=10,n=4473924,r=8947848){n=new _e(n),r=new _e(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,p=0,f=-a;h<=t;h++,f+=o){l.push(-a,0,f,a,0,f),l.push(f,0,-a,f,0,a);const m=h===s?n:r;m.toArray(c,p),p+=3,m.toArray(c,p),p+=3,m.toArray(c,p),p+=3,m.toArray(c,p),p+=3}const u=new je;u.setAttribute("position",new Ve(l,3)),u.setAttribute("color",new Ve(c,3)),super(u,new Qn({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class qq extends no{constructor(e){const t=Nk(e),n=new je,r=[],s=[],o=new _e(0,0,1),a=new _e(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Ve(r,3)),n.setAttribute("color",new Ve(s,3)),super(n,new Qn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");j0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(ng.multiplyMatrices(j0,a.matrixWorld),Yo.setFromMatrixPosition(ng),r.setXYZ(o,Yo.x,Yo.y,Yo.z),ng.multiplyMatrices(j0,a.parent.matrixWorld),Yo.setFromMatrixPosition(ng),r.setXYZ(o+1,Yo.x,Yo.y,Yo.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},gs.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ys.extractUrlBase(i)},gs.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},eu.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},eu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},eu.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},eu.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},sr.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},sr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},sr.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},sr.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},sr.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},Ro.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},gm.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},ii.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)},ii.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},ii.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ii.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},ii.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ii.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},Oe.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},Oe.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)},Oe.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new M).setFromMatrixColumn(this,3)},Oe.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},Oe.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Oe.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Oe.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Oe.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Oe.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},Oe.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Oe.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Oe.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Oe.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Oe.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Oe.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Oe.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Oe.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Oe.prototype.makeFrustum=function(i,e,t,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,e,n,t,r,s)},Oe.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},Js.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},Hn.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},Hn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Na.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},Na.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},Na.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},zn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},zn.prototype.barycoordFromPoint=function(i,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,e)},zn.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},zn.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},zn.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},zn.barycoordFromPoint=function(i,e,t,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zn.getBarycoord(i,e,t,n,r)},zn.normal=function(i,e,t,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zn.getNormal(i,e,t,n)},io.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},io.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new so(this,i)},io.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new rh(this,i)},Q.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},Q.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},Q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},M.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},M.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},M.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},M.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},M.prototype.getColumnFromMatrix=function(i,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,i)},M.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},M.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},M.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},M.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Xt.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},Xt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},It.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},It.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},It.prototype.translate=function(i,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,i)},It.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},It.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(It.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),qt.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(qt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Dm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Kn.prototype.setLens=function(i,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(i)},Object.defineProperties(_s.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}}),Object.defineProperties(Zt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ld},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ld)}}}),Zt.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?Ld:Fd),this},Zt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Zt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},je.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},je.prototype.addAttribute=function(i,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(i,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new Zt(arguments[1],arguments[2])))},je.prototype.addDrawCall=function(i,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,e)},je.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},je.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},je.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},je.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(je.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),zo.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?Ld:Fd),this},zo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},so.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},so.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},so.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},xm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},U0.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Un.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _e}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Qs.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}}),Kt.prototype.clearTarget=function(i,e,t,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(e,t,n)},Kt.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},Kt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Kt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Kt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Kt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Kt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Kt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Kt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Kt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Kt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Kt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Kt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Kt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Kt.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},Kt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Kt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Kt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Kt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Kt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Kt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Kt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Kt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Kt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Kt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Kt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===i?Ra:Ui}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(xI.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}}),class Tq extends It{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Mq).load(i,function(n){e.setBuffer(n)}),this},t0.prototype.updateCubeMap=function(i,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,e)},t0.prototype.clear=function(i,e,t,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,e,t,n)},Mc.crossOrigin=void 0,Mc.loadTexture=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new L0;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,t,void 0,n);return e&&(s.mapping=e),s},Mc.loadTextureCube=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new yq;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,t,void 0,n);return e&&(s.mapping=e),s},Mc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Mc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"135"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="135");class eY extends gs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new rY(t)}),this.register(function(t){return new uY(t)}),this.register(function(t){return new dY(t)}),this.register(function(t){return new sY(t)}),this.register(function(t){return new oY(t)}),this.register(function(t){return new aY(t)}),this.register(function(t){return new lY(t)}),this.register(function(t){return new cY(t)}),this.register(function(t){return new nY(t)}),this.register(function(t){return new hY(t)})}load(e,t,n,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ys.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new lr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(ys.decodeText(new Uint8Array(e,0,4))===jk){try{o[Pt.KHR_BINARY_GLTF]=new pY(e)}catch(d){return void(r&&r(d))}s=o[Pt.KHR_BINARY_GLTF].content}else s=ys.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new SY(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case Pt.KHR_MATERIALS_UNLIT:o[d]=new iY;break;case Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new gY;break;case Pt.KHR_DRACO_MESH_COMPRESSION:o[d]=new fY(l,this.dracoLoader);break;case Pt.KHR_TEXTURE_TRANSFORM:o[d]=new mY;break;case Pt.KHR_MESH_QUANTIZATION:o[d]=new _Y;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function tY(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Pt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class nY{constructor(e){this.parser=e,this.name=Pt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new _e(16777215);void 0!==l.color&&u.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new V0(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Qm(u),c.distance=d;break;case"spot":c=new N0(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class iY{constructor(){this.name=Pt.KHR_MATERIALS_UNLIT}getMaterialType(){return Gn}extendParams(e,t,n){const r=[];e.color=new _e(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(r)}}class rY{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?qo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Q(a,a)}return Promise.all(s)}}class sY{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?qo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new _e(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class oY{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?qo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class aY{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?qo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new _e(a[0],a[1],a[2]),Promise.all(s)}}class lY{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?qo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class cY{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?qo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new _e(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(l){l.encoding=Ra})),Promise.all(s)}}class uY{constructor(e){this.parser=e,this.name=Pt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=n.images[r.extensions[this.name].source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class dY{constructor(e){this.parser=e,this.name=Pt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=r.images[s.extensions[t].source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class hY{constructor(e){this.name=Pt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,h=new ArrayBuffer(u*d),p=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),u,d,p,r.mode,r.filter),h})}return null}}const jk="glTF";class pY{constructor(e){this.name=Pt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ys.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==jk)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(e,12+s,o);this.content=ys.decodeText(l)}else if(5130562===a){const l=12+s;this.body=e.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class fY{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=q0[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=q0[u]||u.toLowerCase();if(void 0!==o[u]){const h=n.accessors[e.attributes[u]];c[d]=hh[h.componentType],l[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const p in h.attributes){const f=h.attributes[p],m=l[p];void 0!==m&&(f.normalized=m)}d(h)},a,c)})})}}class mY{constructor(){this.name=Pt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class $0 extends Zc{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new _e).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class gY{constructor(){this.name=Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return $0}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new _e(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new _e(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new _e(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",o)),s.push(n.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new $0(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class _Y{constructor(){this.name=Pt.KHR_MESH_QUANTIZATION}}class Ya extends oo{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}}Ya.prototype.beforeStart_=Ya.prototype.copySampleValue_,Ya.prototype.afterEnd_=Ya.prototype.copySampleValue_,Ya.prototype.interpolate_=function(i,e,t,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=n-e,u=(t-e)/c,d=u*u,h=d*u,p=i*l,f=p-l,m=-2*h+3*d,y=h-d,g=1-m,_=y-d+u;for(let v=0;v!==o;v++)r[v]=g*s[f+v+o]+_*(s[f+v+a]*c)+m*s[p+v+o]+y*(s[p+v]*c);return r};const yY=new Hn;class vY extends Ya{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return yY.fromArray(s).normalize().toArray(s),s}}const hh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$k={9728:pn,9729:Bn,9984:1004,9985:1007,9986:1005,9987:Do},qk={33071:Tn,33648:1002,10497:Ia},Yk={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},q0={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Xo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},bY={CUBICSPLINE:void 0,LINEAR:yc,STEP:Pd};function wY(i){return void 0===i.DefaultMaterial&&(i.DefaultMaterial=new Zc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),i.DefaultMaterial}function ph(i,e,t){for(const n in t.extensions)void 0===i[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Xa(i,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function MY(i,e){if(i.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function CY(i){const e=i.extensions&&i.extensions[Pt.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+Xk(e.attributes):i.indices+":"+Xk(i.attributes)+":"+i.mode,t}function Xk(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function X0(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class SY{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tY,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},this.textureLoader=typeof createImageBitmap<"u"&&!1===/Firefox/.test(navigator.userAgent)?new Ek(this.options.manager):new L0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new lr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};ph(s,a,r),Xa(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Pt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(ys.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteOffset||0;return n.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Yk[r.type],c=hh[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;let m,y;if(p&&p!==u*l){const g=Math.floor(h/p),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let v=t.cache.get(_);v||(m=new c(a,g*p,r.count*p/u),v=new zo(m,p/u),t.cache.add(_,v)),y=new ps(v,l,h%p/u,f)}else m=null===a?new c(r.count*l):new c(a,h,r.count*l),y=new Zt(m,l,f);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,x=new(0,hh[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*Yk.SCALAR),S=new c(o[2],b,r.sparse.count*l);null!==a&&(y=new Zt(y.array.slice(),y.itemSize,y.normalized));for(let w=0,I=x.length;w<I;w++){const z=x[w];if(y.setX(z,S[w*l]),l>=2&&y.setY(z,S[w*l+1]),l>=3&&y.setZ(z,S[w*l+2]),l>=4&&y.setW(z,S[w*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,s=t.images[t.textures[e].source];let o=this.textureLoader;if(s.uri){const a=this.options.manager.getHandler(s.uri);null!==a&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const r=this,s=this.json,o=this.options,a=s.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let u=t.uri||"",d=!1;if(void 0!==t.bufferView)u=r.getDependency("bufferView",t.bufferView).then(function(p){d=!0;const f=new Blob([p],{type:t.mimeType});return u=c.createObjectURL(f),u});else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(u).then(function(p){return new Promise(function(f,m){let y=f;!0===n.isImageBitmapLoader&&(y=function(g){const _=new Vn(g);_.needsUpdate=!0,f(_)}),n.load(ys.resolveURL(p,o.path),y,void 0,m)})}).then(function(p){!0===d&&c.revokeObjectURL(u),p.flipY=!1,a.name&&(p.name=a.name);const m=(s.samplers||{})[a.sampler]||{};return p.magFilter=$k[m.magFilter]||Bn,p.minFilter=$k[m.minFilter]||Do,p.wrapS=qk[m.wrapS]||Ia,p.wrapT=qk[m.wrapT]||Ia,r.associations.set(p,{textures:e}),p}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null});return this.textureCache[l]=h,h}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then(function(s){if(void 0!==n.texCoord&&0!=n.texCoord&&!("aoMap"===t&&1==n.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[Pt.KHR_TEXTURE_TRANSFORM]){const o=void 0!==n.extensions?n.extensions[Pt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=r.associations.get(s);s=r.extensions[Pt.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),r.associations.set(s,a)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new fs,Un.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Qn,Un.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return Zc}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else if(l[Pt.KHR_MATERIALS_UNLIT]){const d=r[Pt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new _e(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.format=us,a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Gn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Q(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==s.occlusionTexture&&o!==Gn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Gn&&(a.emissive=(new _e).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Gn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(c).then(function(){let d;return d=o===$0?r[Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(d.name=s.name),d.map&&(d.map.encoding=Ra),d.emissiveMap&&(d.emissiveMap.encoding=Ra),Xa(d,s),t.associations.set(d,{materials:e}),s.extensions&&ph(r,d,s),d})}createUniqueName(e){const t=an.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Pt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Kk(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=CY(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[Pt.KHR_DRACO_MESH_COMPRESSION]?s(c):Kk(new je,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?wY(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let p=0,f=u.length;p<f;p++){const m=u[p],y=o[p];let g;const _=c[p];if(4===y.mode||5===y.mode||6===y.mode||void 0===y.mode)g=!0===s.isSkinnedMesh?new Dm(m,_):new qt(m,_),!0===g.isSkinnedMesh&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),5===y.mode?g.geometry=Qk(g.geometry,1):6===y.mode&&(g.geometry=Qk(g.geometry,2));else if(1===y.mode)g=new no(m,_);else if(3===y.mode)g=new to(m,_);else if(2===y.mode)g=new b0(m,_);else{if(0!==y.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);g=new Go(m,_)}Object.keys(g.geometry.morphAttributes).length>0&&MY(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Xa(g,s),y.extensions&&ph(r,g,y),t.assignFinalMaterial(g),d.push(g)}for(let p=0,f=d.length;p<f;p++)t.associations.set(d[p],{meshes:e,primitives:p});if(1===d.length)return d[0];const h=new eo;t.associations.set(h,{meshes:e});for(let p=0,f=d.length;p<f;p++)h.add(d[p]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Kn(Zf.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new jd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Xa(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return n.inverseBindMatrices=r,n})}loadAnimation(e){const n=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=n.channels.length;c<u;c++){const d=n.channels[c],h=n.samplers[d.sampler],p=d.target,m=void 0!==n.parameters?n.parameters[h.input]:h.input,y=void 0!==n.parameters?n.parameters[h.output]:h.output;r.push(this.getDependency("node",void 0!==p.node?p.node:p.id)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",y)),a.push(h),l.push(p)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],p=c[3],f=c[4],m=[];for(let g=0,_=u.length;g<_;g++){const v=u[g],b=d[g],x=h[g],S=p[g],w=f[g];if(void 0===v)continue;let I;switch(v.updateMatrix(),v.matrixAutoUpdate=!0,Xo[w.path]){case Xo.weights:I=ah;break;case Xo.rotation:I=Ua;break;default:I=lh}const z=v.name?v.name:v.uuid,B=void 0!==S.interpolation?bY[S.interpolation]:yc,R=[];Xo[w.path]===Xo.weights?v.traverse(function(V){V.morphTargetInfluences&&R.push(V.name?V.name:V.uuid)}):R.push(z);let J=x.array;if(x.normalized){const V=X0(J.constructor),H=new Float32Array(J.length);for(let j=0,P=J.length;j<P;j++)H[j]=J[j]*V;J=H}for(let V=0,H=R.length;V<H;V++){const j=new I(R[V]+"."+Xo[w.path],b.array,J,B);"CUBICSPLINE"===S.interpolation&&(j.createInterpolant=function(F){return new(this instanceof Ua?vY:Ya)(this.times,this.values,this.getValueSize()/3,F)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(j)}}return new ch(n.name?n.name:"animation_"+e,void 0,m)})}createNodeMesh(e){const n=this,r=this.json.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new Tm:a.length>1?new eo:1===a.length?a[0]:new It,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),Xa(l,s),s.extensions&&ph(n,l,s),void 0!==s.matrix){const c=new Oe;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],s=this,o=new eo;r.name&&(o.name=s.createUniqueName(r.name)),Xa(o,r),r.extensions&&ph(n,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(Zk(a[c],o,t,s));return Promise.all(l).then(function(){return s.associations=(u=>{const d=new Map;for(const[h,p]of s.associations)(h instanceof Un||h instanceof Vn)&&d.set(h,p);return u.traverse(h=>{const p=s.associations.get(h);null!=p&&d.set(h,p)}),d})(o),o})}}function Zk(i,e,t,n){const r=t.nodes[i];return n.getDependency("node",i).then(function(s){if(void 0===r.skin)return s;let o;return n.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=a.length;d<h;d++){const p=a[d];if(p){c.push(p);const f=new Oe;void 0!==o.inverseBindMatrices&&f.fromArray(o.inverseBindMatrices.array,16*d),u.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new Am(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(Zk(a[l],s,t,n))}return Promise.all(o)})}function Kk(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=q0[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==e.indices&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Xa(i,e),function EY(i,e,t){const n=e.attributes,r=new sr;if(void 0===n.POSITION)return;{const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new M(l[0],l[1],l[2]),new M(c[0],c[1],c[2])),a.normalized){const u=X0(hh[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new M,l=new M;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],p=h.min,f=h.max;if(void 0!==p&&void 0!==f){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(f[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(f[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(f[2]))),h.normalized){const m=X0(hh[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new Ro;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function xY(i,e,t){let n=!1,r=!1;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(void 0!==c.POSITION&&(n=!0),void 0!==c.NORMAL&&(r=!0),n&&r)break}if(!n&&!r)return Promise.resolve(i);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];if(n){const u=void 0!==c.POSITION?t.getDependency("accessor",c.POSITION):i.attributes.position;s.push(u)}if(r){const u=void 0!==c.NORMAL?t.getDependency("accessor",c.NORMAL):i.attributes.normal;o.push(u)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(a){const c=a[1];return n&&(i.morphAttributes.position=a[0]),r&&(i.morphAttributes.normal=c),i.morphTargetsRelative=!0,i})}(i,e.targets,t):i})}function Qk(i,e){let t=i.getIndex();if(null===t){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}const n=t.count-2,r=[];if(2===e)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s}class DY extends gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new lr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){let l;try{l=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),l=JSON.parse(a.substring(65,a.length-2))}const c=s.parse(l);t&&t(c)},n,r)}parse(e){return new Jk(e)}}class Jk{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function TY(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,l=0;for(let c=0;c<n.length;c++){const u=n[c];if("\n"===u)a=0,l-=s;else{const d=AY(u,r,a,l,t);a+=d.offsetX,o.push(d.path)}}return o}(e,t,this.data);for(let s=0,o=r.length;s<o;s++)Array.prototype.push.apply(n,r[s].toShapes());return n}}function AY(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const o=new Qq;let a,l,c,u,d,h,p,f;if(s.o){const m=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,g=m.length;y<g;)switch(m[y++]){case"m":a=m[y++]*e+t,l=m[y++]*e+n,o.moveTo(a,l);break;case"l":a=m[y++]*e+t,l=m[y++]*e+n,o.lineTo(a,l);break;case"q":c=m[y++]*e+t,u=m[y++]*e+n,d=m[y++]*e+t,h=m[y++]*e+n,o.quadraticCurveTo(d,h,c,u);break;case"b":c=m[y++]*e+t,u=m[y++]*e+n,d=m[y++]*e+t,h=m[y++]*e+n,p=m[y++]*e+t,f=m[y++]*e+n,o.bezierCurveTo(d,h,p,f,c,u)}}return{offsetX:s.ha*e,path:o}}Jk.prototype.isFont=!0;class He{static getOscillation(e){return Math.abs(Math.sin(e))}static getCurvedScale(e,t,n,r=4){return e+Math.pow(n-e,r)/Math.pow(t-e,r-1)}static getReversedCurve(e,t,n,r=4){return Math.pow(Math.pow(t-e,r-1)*(n-e),1/r)+e}static getScaledValue(e,t,n){return e+n/100*(t-e)}static getReversedScale(e,t,n){return(n-e)/(t-e)*100}static getTexture(e){return new Promise((t,n)=>{(new L0).load(`assets/${e}`,t,null,n)})}static getFont(e){return new Promise((t,n)=>{(new DY).load(`assets/${e}.typeface.json`,t,null,n)})}static getFile(e){return new Promise((t,n)=>{(new lr).load(`assets/${e}`,t,null,n)})}static getGLTF(e){return Ri(function*(){return new Promise((t,n)=>{(new eY).load(`assets/${e}`,r=>{const s=r.scene.children.find(l=>l.isMesh),o=s.material,a=new oh;a.color=o.color,a.map=o.map,s.material=a,t(s)},null,n)})})()}static getMassCenter(e){return e.reduce((r,s)=>r+s.m*s.x,0)/e.reduce((r,s)=>r+s.m,0)}static getGravityByCgs(e){return Math.pow(10,e)/100}static getWorldPosition(e){const t=new M;return e.getWorldPosition(t),t}static getCircularMotion(e,t){return 2*Math.PI*e/t}static getCircularMatrix(e){const t=[];for(let n=e.from;n<e.to;n+=e.space)t.push(this.getCircularVectors(n,e.slot,e.yRange));return t}static getCircularVectors(e,t,n){const r=t/e,s=[];for(let o=0,a=2*Math.PI;o<a;o+=r){const l=new M,c=o+r/2*Ea(-1,1);l.x=e*Math.cos(c),l.y=Ea(-n,n),l.z=e*Math.sin(c),s.push(l)}return s}static getDateString(e){const t=e.getMonth()+1;return`${e.getDate()}/${t}/${e.getFullYear()}`}}const Z0=11436147.983399998,ag=He.getMassCenter([{m:3.17,x:0},{m:.7,x:Z0}]),IY=[{name:"algol-a1",type:"star",parent:null,group:"algol-system",physic:{radius:1900080,mass:3.17*js,rotationPeriod:He.getCircularMotion(1900080,65),rotationSpeed:65e3,axialTilt:null,coreTemperature:null,luminosity:182},orbit:{period:247736.016,speed:He.getCircularMotion(ag,247736.016),epoch:new Date,a:ag,e:0,i:97.69,w:0,o:43.43,M:0,change:new Be(360/2.867315*$e)},surface:{type:"plasma",gravity:He.getGravityByCgs(4),minTemperature:12700,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Perseus",rightAscension:"03h 08m 10.13245s",declination:"+40\xb0 57\u2032 20.3280\u2033",apparentMagnitude:"2.12 | 3.39"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Algol",moons:null,feature:{isBinary:!0}},{name:"algol-a2",type:"star",parent:null,group:"algol-system",physic:{radius:2422080,mass:.7*js,rotationPeriod:247736.016,rotationSpeed:null,axialTilt:null,coreTemperature:null,luminosity:6.92},orbit:{period:247736.016,speed:He.getCircularMotion(Z0-ag,247736.016),epoch:new Date,a:Z0-ag,e:0,i:97.69,w:0,o:43.43,M:180,change:new Be(360/2.867315*$e)},surface:{type:"plasma",gravity:He.getGravityByCgs(3.5),minTemperature:4200,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Perseus",rightAscension:"03h 08m 10.13245s",declination:"+40\xb0 57\u2032 20.3280\u2033",apparentMagnitude:"2.12 | 3.39"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Algol",moons:null,feature:{isBinary:!0}},{name:"algol-b",type:"star",parent:null,group:"algol-system",physic:{radius:1204080,mass:1.76*js,rotationPeriod:37*Fe,rotationSpeed:null,axialTilt:null,coreTemperature:null,luminosity:10},orbit:{period:58766515.2,speed:He.getCircularMotion(2.69*ke,58766515.2),epoch:new Date("1987-05-11T17:00Z"),a:2.69*ke,e:.227,i:83.66,w:310.02,o:132.66,M:0,change:new Be(360/680.168*$e)},surface:{type:"plasma",gravity:He.getGravityByCgs(4.5),minTemperature:7200,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Perseus",rightAscension:"03h 08m 10.13245s",declination:"+40\xb0 57\u2032 20.3280\u2033",apparentMagnitude:"2.12 | 3.39"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Algol",moons:null,feature:{}}],PY=[{name:"tadmor",type:"planet",parent:"errai-a",group:"errai-system",physic:{radius:1.043*Ws,mass:1.85*xa,rotationPeriod:39022560,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:78045120,speed:He.getCircularMotion(2.05*ke,78045120),epoch:new Date("2004-08-09T12:00Z"),a:2.05*ke,e:.049,i:9.6,w:94.6,o:0,M:0,change:new Be(360/903.3*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:-9,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Cepheus",rightAscension:"23h 39m 20.852s",declination:"+77\xb0 37\u2032 56.19\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Gamma_Cephei_Ab",moons:null,feature:{}},{name:"errai-a",type:"star",parent:null,group:"errai-system",physic:{radius:3431280,mass:1.41*js,rotationPeriod:781*Fe,rotationSpeed:1630,axialTilt:null,coreTemperature:null,luminosity:10.6},orbit:new Be,surface:{type:"plasma",gravity:He.getGravityByCgs(3.18),minTemperature:4500,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Cepheus",rightAscension:"23h 39m 20.852s",declination:"+77\xb0 37\u2032 56.19\u2033",apparentMagnitude:"3.21"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Gamma_Cephei",moons:null,feature:{}},{name:"errai-b",type:"star",parent:null,group:"errai-system",physic:{radius:348e3,mass:.36*js,rotationPeriod:20*Fe,rotationSpeed:He.getCircularMotion(500*ai,20*Fe),axialTilt:null,coreTemperature:null,luminosity:1},orbit:{period:24638*Fe,speed:He.getCircularMotion(20.18*ke,24638*Fe),epoch:new Date("1991-08-08T00:00Z"),a:20.18*ke,e:.4112,i:119.3,w:161.01,o:18.04,M:180,change:new Be(360/24638*$e)},surface:{type:"plasma",gravity:null,minTemperature:3200,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Cepheus",rightAscension:"23h 39m 20.852s",declination:"+77\xb0 37\u2032 56.19\u2033",apparentMagnitude:"3.21"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Gamma_Cephei",moons:null,feature:{}}],OY=[{name:"dagon",type:"planet",parent:"fomalhaut",group:"fomalhaut-system",physic:{radius:1.2*Ws,mass:2.6*xa,rotationPeriod:10722240,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:620500*Fe,speed:He.getCircularMotion(177*ke,620500*Fe),epoch:new Date,a:177*ke,e:.87,i:-30,w:26,o:152,M:0,change:new Be(360/620500*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:null,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Piscis Austrinus",rightAscension:"22h 57m 39.0465s",declination:"\u221229\xb0 37\u2032 20.050\u2033"},ringSystem:null,belts:[],disks:[{from:20*Ws,to:40*Ws,e:0,i:0,speed:1e-7}],wiki:"https://en.wikipedia.org/wiki/Fomalhaut_b",moons:null,feature:{}},{name:"fomalhaut",type:"star",parent:null,group:"fomalhaut-system",physic:{radius:1336320,mass:2.05*js,rotationPeriod:Fe,rotationSpeed:93e3,axialTilt:null,coreTemperature:null,luminosity:17.8},orbit:new Be,surface:{type:"plasma",gravity:He.getGravityByCgs(4.21),minTemperature:8125,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Piscis Austrinus",rightAscension:"22h 57m 39.0465s",declination:"\u221229\xb0 37\u2032 20.050\u2033",apparentMagnitude:"1.16"},ringSystem:null,belts:[],disks:[{from:133*ke,to:158*ke,e:.11,i:0,speed:1e-8}],wiki:"https://en.wikipedia.org/wiki/Fomalhaut",moons:null,feature:{}}],VY=[{name:"b",type:"planet",parent:"hat-p-54",group:"hat-p-54-system",physic:{radius:.944*Ws,mass:.76*xa,rotationPeriod:164153.3904,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:328306.7808,speed:He.getCircularMotion(.04117*ke,328306.7808),epoch:new Date("2015-04-01T12:00Z"),a:.04117*ke,e:.074,i:87.04,w:0,o:0,M:0,change:new Be(360/3.799847*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:544,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Gemini",rightAscension:"06h 39m 35.53s",declination:"+25\xb0 28\u2032 57.1\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/HATNet_Project#Planets_discovered",moons:null,feature:{}},{name:"hat-p-54",type:"star",parent:null,group:"hat-p-54-system",physic:{radius:429432,mass:.645*js,rotationPeriod:He.getCircularMotion(429432,31.855),rotationSpeed:31855,axialTilt:null,coreTemperature:null,luminosity:1e-4},orbit:new Be,surface:{type:"plasma",gravity:He.getGravityByCgs(4.667),minTemperature:4115,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Gemini",rightAscension:"06h 39m 35.53s",declination:"+25\xb0 28\u2032 57.1\u2033",apparentMagnitude:"13.505"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/HATNet_Project#Planets_discovered",moons:null,feature:{}}],UY=[{name:"e",type:"planet",parent:"hr-8799",group:"hr-8799-system",physic:{radius:1.2*Ws,mass:7*xa,rotationPeriod:710035200,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:16436*Fe,speed:He.getCircularMotion(14.5*ke,16436*Fe),epoch:new Date,a:14.5*ke,e:0,i:28,w:0,o:0,M:0,change:new Be(360/16436*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:700,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Pegasus",rightAscension:"23h 07m 28.7150s",declination:"+21\xb0 08\u2032 03.302\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/HR_8799_e",moons:null,feature:{}},{name:"d",type:"planet",parent:"hr-8799",group:"hr-8799-system",physic:{radius:1.2*Ws,mass:7*xa,rotationPeriod:157788e4,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:36525*Fe,speed:He.getCircularMotion(24*ke,36525*Fe),epoch:new Date,a:24*ke,e:.04,i:28,w:0,o:0,M:120,change:new Be(360/36525*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:700,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Pegasus",rightAscension:"23h 07m 28.7150s",declination:"+21\xb0 08\u2032 03.302\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/HR_8799_d",moons:null,feature:{}},{name:"c",type:"planet",parent:"hr-8799",group:"hr-8799-system",physic:{radius:1.2*Ws,mass:7*xa,rotationPeriod:2997950400,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:69397*Fe,speed:He.getCircularMotion(38*ke,69397*Fe),epoch:new Date,a:38*ke,e:0,i:28,w:0,o:0,M:40,change:new Be(360/69397*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:700,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Pegasus",rightAscension:"23h 07m 28.7150s",declination:"+21\xb0 08\u2032 03.302\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/HR_8799_c",moons:null,feature:{}},{name:"b",type:"planet",parent:"hr-8799",group:"hr-8799-system",physic:{radius:1.2*Ws,mass:5*xa,rotationPeriod:7258248e3,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:168015*Fe,speed:He.getCircularMotion(68*ke,168015*Fe),epoch:new Date,a:68*ke,e:0,i:28,w:0,o:0,M:70,change:new Be(360/168015*$e)},surface:{type:"compressed gas",gravity:null,minTemperature:600,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Pegasus",rightAscension:"23h 07m 28.7150s",declination:"+21\xb0 08\u2032 03.302\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/HR_8799_b",moons:null,feature:{}},{name:"hr-8799",type:"star",parent:null,group:"hr-8799-system",physic:{radius:932640,mass:1.47*js,rotationPeriod:He.getCircularMotion(932640,12.6),rotationSpeed:12.6,axialTilt:null,coreTemperature:null,luminosity:4.92},orbit:new Be,surface:{type:"plasma",gravity:He.getGravityByCgs(4.35),minTemperature:7150,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Pegasus",rightAscension:"23h 07m 28.7150s",declination:"+21\xb0 08\u2032 03.302\u2033",apparentMagnitude:"5.964"},ringSystem:null,belts:[],disks:[{from:1.5*ai,to:15*ke,e:0,i:28,speed:1e-9},{from:100*ke,to:500*ke,e:0,i:28,speed:1e-9}],wiki:"https://en.wikipedia.org/wiki/HR_8799",moons:null,feature:{}}],GY=[{name:"eros",type:"asteroid",parent:"sun",group:"solar-system",physic:{radius:8.42,mass:6.687,rotationPeriod:18972,rotationSpeed:He.getCircularMotion(8420,18972),axialTilt:89,coreTemperature:null},orbit:{period:643*Fe,speed:24.36,epoch:new Date("2019-04-27T00:00Z"),a:218130489.12058067,e:.2227357205256897,i:10.82856732664407,w:178.8213598069167,o:304.3062624764607,M:47.2394600142737,change:new Be(20431.981967523523)},surface:{type:"rock",gravity:.0021,minTemperature:-46,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"7 | 15"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/433_Eros",moons:null,feature:{hasFile:!0}},{name:"gaspra",type:"asteroid",parent:"sun",group:"solar-system",physic:{radius:6.1,mass:20,rotationPeriod:25351,rotationSpeed:He.getCircularMotion(6100,25351),axialTilt:72,coreTemperature:null},orbit:{period:1200*Fe,speed:He.getCircularMotion(330572179.1198938,1200*Fe),epoch:new Date("2019-04-27T00:00Z"),a:330572179.1198938,e:.1736807246012547,i:4.107051437330751,w:129.9914720894272,o:253.0550485564201,M:52.82431593381299,change:new Be(10951.802553725145)},surface:{type:"rock",gravity:.0015,minTemperature:null,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"16.8"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/951_Gaspra",moons:null,feature:{hasFile:!0}},{name:"vesta",type:"asteroid",parent:"sun",group:"solar-system",physic:{radius:262.7,mass:259e3,rotationPeriod:19231,rotationSpeed:93.1,axialTilt:29,coreTemperature:null},orbit:{period:114544800,speed:17.88,epoch:new Date("2019-04-27T00:00Z"),a:353263089.0561149,e:.08872145950956178,i:7.141770811873426,w:150.7285412870121,o:103.810804427096,M:95.86193620017683,change:new Be(9913.743155893)},surface:{type:"rock",gravity:.25,minTemperature:-188,maxTemperature:-3,pressure:0,winds:0},observation:{apparentMagnitude:"5.1 | 8.48"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/4_Vesta",moons:null,feature:{hasFile:!0}},{name:"pallas",type:"asteroid",parent:"sun",group:"solar-system",physic:{radius:272.5,mass:211e3,rotationPeriod:28127,rotationSpeed:65,axialTilt:84,coreTemperature:null},orbit:{period:145683878.2771991,speed:17.88,epoch:new Date("2019-04-27T00:00Z"),a:414754998.51636755,e:.2303368211958249,i:34.8362344173523,w:310.0488574270735,o:173.0800627473217,M:59.69913274585711,change:new Be(7792.87326384751)},surface:{type:"rock",gravity:.21,minTemperature:-108,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"6.49 | 10.65"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/2_Pallas",moons:null,feature:{hasFile:!0}},{name:"hygiea",type:"asteroid",parent:"sun",group:"solar-system",physic:{radius:216,mass:85500,rotationPeriod:99443,rotationSpeed:He.getCircularMotion(216e3,99443),axialTilt:60,coreTemperature:null},orbit:{period:175720320,speed:16.76,epoch:new Date("2019-04-27T00:00Z"),a:469967571.9157712,e:.1124606576831153,i:3.831560031875431,w:312.3152062253607,o:283.2021668251686,M:152.1848512528665,change:new Be(6460.7541897775345)},surface:{type:"rock",gravity:.03,minTemperature:-109,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"9 | 11.97"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/10_Hygiea",moons:null,feature:{hasFile:!0}},{name:"varuna",type:"asteroid",parent:"sun",group:"solar-system",physic:{radius:450,mass:37e4,rotationPeriod:22837,rotationSpeed:He.getCircularMotion(45e4,22837),axialTilt:0,coreTemperature:null},orbit:{period:102812*Fe,speed:4.53,epoch:new Date("2019-04-27T00:00Z"),a:6399986417.244388,e:.05412638693544383,i:17.2196800924737,w:262.8750781410215,o:97.36934197769214,M:117.2237977113474,change:new Be(128.56314207261715)},surface:{type:"rock",gravity:.22,minTemperature:-230,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"20.3"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/20000_Varuna",moons:null,feature:{hasFile:!0}}],jY=[{name:"ceres",type:"dwarf",parent:"sun",group:"solar-system",physic:{radius:473,mass:939300,rotationPeriod:32667,rotationSpeed:92.61,axialTilt:4,coreTemperature:null},orbit:{period:145213583.6199723,speed:17.905,epoch:new Date("1995-01-14T00:00Z"),a:413969936.7197461,e:.07610292126891821,i:10.60069567603618,w:71.4492152612411,o:80.65851514365535,M:340.389084821267,change:new Be(7815.051427)},surface:{type:"rock",gravity:.28,minTemperature:-105,maxTemperature:-38,pressure:0,winds:0},observation:{rightAscension:"19h 24m 0s",declination:"+66.76033\xb0",apparentMagnitude:"6.64 | 9.34"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Ceres_(dwarf_planet)",moons:"0",feature:{}},{name:"pluto",type:"dwarf",parent:"sun",group:"solar-system",physic:{radius:1188.3,mass:1303e4,rotationPeriod:551857,rotationSpeed:13.11,axialTilt:122.53,coreTemperature:null},orbit:{period:7855780129.973513,speed:4.67,epoch:new Date("2000-01-01T12:00Z"),a:39.48211675*ke,e:.2488273,i:17.14001206,w:113.76497945,o:110.30393684,M:14.860122039999993,change:{a:-47266.94322637,e:517e-7,i:4818e-8,w:-.0287946,o:-.01183482,M:145.24843457}},surface:{type:"rock",gravity:.62,minTemperature:-240,maxTemperature:-218,pressure:.001,winds:37},observation:{rightAscension:"8h 52m 5s",declination:"-6.163\xb0",apparentMagnitude:"13.65 | 16.3"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Pluto",moons:"5 (Charon, Styx, Nix, Kerberos, Hydra)",feature:{}},{name:"haumea",type:"dwarf",parent:"sun",group:"solar-system",physic:{radius:816,mass:4006e3,rotationPeriod:14096,rotationSpeed:363.7,axialTilt:0,coreTemperature:null},orbit:{period:8870313292.038046,speed:4.531,epoch:new Date("2013-01-30T00:00Z"),a:6438870836.113928,e:.1957443693684682,i:28.19523270115272,w:240.6845535128259,o:121.8314278794814,M:206.206136784925,change:new Be(.003490419*$e)},surface:{type:"rock",gravity:.401,minTemperature:-223,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"17.3"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Haumea",moons:"2 (Hi\u02bbiaka, Namaka)",feature:{hasFile:!0}},{name:"makemake",type:"dwarf",parent:"sun",group:"solar-system",physic:{radius:715,mass:44e5,rotationPeriod:82176,rotationSpeed:54.7,axialTilt:0,coreTemperature:null},orbit:{period:9644390047.157366,speed:4.419,epoch:new Date("2012-07-01T00:00Z"),a:6801257074.839445,e:.1619792121558843,i:29.01234824963146,w:296.6818274666484,o:79.2970052148478,M:154.044817312303,change:new Be(.003215203*$e)},surface:{type:"rock",gravity:.5,minTemperature:-235,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"17"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Makemake",moons:"1 (S/2015)",feature:{}},{name:"eris",type:"dwarf",parent:"sun",group:"solar-system",physic:{radius:1163,mass:166e5,rotationPeriod:93240,rotationSpeed:78.4,axialTilt:0,coreTemperature:null},orbit:{period:17750260391.92296,speed:3.4338,epoch:new Date("2012-07-10T00:00Z"),a:10175876900.288914,e:.4353750016312559,i:43.8356785196811,w:150.8398380244474,o:36.05570910707882,M:202.5170507322091,change:new Be(64.1249885)},surface:{type:"rock",gravity:.82,minTemperature:-243,maxTemperature:-218,pressure:0,winds:0},observation:{apparentMagnitude:"18.7"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Eris_(dwarf_planet)",moons:"1 (Dysnomia)",feature:{}}],WY=[{name:"moon",type:"moon",parent:"earth",group:"solar-system",physic:{radius:1737.1,mass:7342e4,rotationPeriod:2360591,rotationSpeed:4.627,axialTilt:6.687,coreTemperature:null},orbit:{period:2360620.8,speed:1.022,epoch:new Date("2000-01-01T12:00Z"),a:384400,e:.0554,i:5.16,w:318.15,o:125.08,M:135.27,change:new Be(13.176358*$e)},surface:{type:"rock",gravity:1.62,minTemperature:-233,maxTemperature:123,pressure:0,winds:0},observation:{rightAscension:"17h 47m 26s",declination:"+65.64\xb0",apparentMagnitude:"-2.5 | -12.9"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Moon",moons:null,feature:{startingRotation:4.2}},{name:"phobos",type:"moon",parent:"mars",group:"solar-system",physic:{radius:11,mass:10.7,rotationPeriod:27554,rotationSpeed:3.05,axialTilt:0,coreTemperature:null},orbit:{period:27552.96,speed:2.138,epoch:new Date("1950-01-01T00:00Z"),a:9376,e:.0151,i:1.075,w:150.057,o:207.784,M:91.059,change:new Be(41202833.62685)},surface:{type:"rock",gravity:.0057,minTemperature:-40,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"11.8"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Phobos_(moon)",moons:null,feature:{hasFile:!0}},{name:"deimos",type:"moon",parent:"mars",group:"solar-system",physic:{radius:6,mass:1.5,rotationPeriod:109123,rotationSpeed:.3,axialTilt:0,coreTemperature:null},orbit:{period:109071.36,speed:1.3513,epoch:new Date("1950-01-01T00:00Z"),a:23458,e:2e-4,i:1.788,w:260.729,o:24.525,M:325.329,change:new Be(10408408.5835)},surface:{type:"rock",gravity:.003,minTemperature:-40,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"12.89"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Deimos_(moon)",moons:null,feature:{hasFile:!0}},{name:"amalthea",type:"moon",parent:"jupiter",group:"solar-system",physic:{radius:83.5,mass:2080,rotationPeriod:43043,rotationSpeed:12.189,axialTilt:0,coreTemperature:null},orbit:{period:43043,speed:26.57,epoch:new Date("1997-01-16T00:00Z"),a:181400,e:.0032,i:.38,w:155.873,o:108.946,M:185.194,change:new Be(26376057.57195)},surface:{type:"rock",gravity:.02,minTemperature:-150,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"14.1"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Amalthea_(moon)",moons:null,feature:{hasFile:!0}},{name:"io",type:"moon",parent:"jupiter",group:"solar-system",physic:{radius:1821.6,mass:89319380,rotationPeriod:152854,rotationSpeed:75,axialTilt:0,coreTemperature:null},orbit:{period:152841.6,speed:17.334,epoch:new Date("1997-01-16T00:00Z"),a:421800,e:.0041,i:.036,w:84.129,o:43.977,M:342.021,change:new Be(7427346.97795)},surface:{type:"rock",gravity:1.796,minTemperature:-183,maxTemperature:-143,pressure:0,winds:0},observation:{apparentMagnitude:"5.02"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Io_(moon)",moons:null,feature:{}},{name:"europa",type:"moon",parent:"jupiter",group:"solar-system",physic:{radius:1560.8,mass:47998440,rotationPeriod:306822,rotationSpeed:32,axialTilt:.1,coreTemperature:null},orbit:{period:306997.00254957506,speed:13.74,epoch:new Date("1997-01-16T00:00Z"),a:671100,e:.0094,i:.466,w:88.97,o:219.106,M:171.016,change:new Be(3700177.4333)},surface:{type:"rock",gravity:1.314,minTemperature:-223,maxTemperature:-148,pressure:0,winds:0},observation:{apparentMagnitude:"5.29"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Europa_(moon)",moons:null,feature:{}},{name:"ganymede",type:"moon",parent:"jupiter",group:"solar-system",physic:{radius:2634.1,mass:14819e4,rotationPeriod:618153,rotationSpeed:26.8,axialTilt:.1,coreTemperature:null},orbit:{period:618192,speed:10.88,epoch:new Date("1997-01-16T00:00Z"),a:1070400,e:.0013,i:.177,w:192.417,o:63.552,M:317.54,change:new Be(50.3176072*$e)},surface:{type:"rock",gravity:1.428,minTemperature:-203,maxTemperature:-121,pressure:0,winds:0},observation:{apparentMagnitude:"4.61"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Ganymede_(moon)",moons:null,feature:{}},{name:"callisto",type:"moon",parent:"jupiter",group:"solar-system",physic:{radius:2410.3,mass:107593800,rotationPeriod:1441931,rotationSpeed:10.5,axialTilt:0,coreTemperature:null},orbit:{period:1442016,speed:8.204,epoch:new Date("1997-01-16T00:00Z"),a:1882700,e:.0074,i:.192,w:52.643,o:298.848,M:181.408,change:new Be(787344.1572)},surface:{type:"rock",gravity:1.235,minTemperature:-193,maxTemperature:-108,pressure:0,winds:0},observation:{apparentMagnitude:"5.65"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Callisto_(moon)",moons:null,feature:{}},{name:"mimas",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:198.2,mass:37493,rotationPeriod:81389,rotationSpeed:15.3,axialTilt:0,coreTemperature:null},orbit:{period:81388.8,speed:14.28,epoch:new Date("2000-01-01T12:00Z"),a:185539,e:.0196,i:1.574,w:332.499,o:173.027,M:14.848,change:new Be(13942799.0602)},surface:{type:"rock",gravity:.064,minTemperature:-209,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"12.9"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Mimas_(moon)",moons:null,feature:{}},{name:"enceladus",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:252.1,mass:108022,rotationPeriod:118387,rotationSpeed:13.4,axialTilt:0,coreTemperature:null},orbit:{period:118368,speed:12.6,epoch:new Date("2000-01-01T12:00Z"),a:238042,e:0,i:.003,w:.076,o:342.507,M:199.686,change:new Be(9589714.2697)},surface:{type:"rock",gravity:.113,minTemperature:-240,maxTemperature:-128,pressure:0,winds:0},observation:{apparentMagnitude:"11.7"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Enceladus",moons:null,feature:{}},{name:"tethys",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:531.1,mass:617449,rotationPeriod:163106,rotationSpeed:20.5,axialTilt:0,coreTemperature:null},orbit:{period:163123.2,speed:11.35,epoch:new Date("2000-01-01T12:00Z"),a:294672,e:1e-4,i:1.091,w:45.202,o:259.842,M:243.367,change:new Be(190.6979109*$e)},surface:{type:"rock",gravity:.146,minTemperature:-187,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"10.2"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Tethys_(moon)",moons:null,feature:{}},{name:"dione",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:561.4,mass:1095452,rotationPeriod:236469,rotationSpeed:14.9,axialTilt:0,coreTemperature:null},orbit:{period:236476.8,speed:14.9,epoch:new Date("2000-01-01T12:00Z"),a:377415,e:.0022,i:.028,w:284.315,o:290.415,M:322.232,change:new Be(4801024.97055)},surface:{type:"rock",gravity:.232,minTemperature:-186,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"10.4"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Dione_(moon)",moons:null,feature:{}},{name:"rhea",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:763.8,mass:2306518,rotationPeriod:390374,rotationSpeed:12.3,axialTilt:0,coreTemperature:null},orbit:{period:390548.4943453053,speed:8.48,epoch:new Date("2000-01-01T12:00Z"),a:527068,e:2e-4,i:.333,w:241.619,o:351.042,M:179.781,change:new Be(2908686.67535)},surface:{type:"rock",gravity:.264,minTemperature:-220,maxTemperature:-174,pressure:0,winds:0},observation:{apparentMagnitude:"10"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Rhea_(moon)",moons:null,feature:{}},{name:"titan",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:2574.73,mass:13452e4,rotationPeriod:1377648,rotationSpeed:11.7,axialTilt:0,coreTemperature:null},orbit:{period:1378080,speed:5.57,epoch:new Date("2000-01-01T12:00Z"),a:1221865,e:.0288,i:.306,w:180.532,o:28.06,M:163.31,change:new Be(22.5769756*$e)},surface:{type:"rock",gravity:1.352,minTemperature:-179.5,maxTemperature:null,pressure:1.467,winds:3},observation:{apparentMagnitude:"8.2 | 9"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Titan_(moon)",moons:null,feature:{}},{name:"iapetus",type:"moon",parent:"saturn",group:"solar-system",physic:{radius:734.5,mass:1805635,rotationPeriod:6853378,rotationSpeed:.7,axialTilt:0,coreTemperature:null},orbit:{period:6854112,speed:3.26,epoch:new Date("2000-01-01T12:00Z"),a:3560854,e:.0293,i:8.298,w:271.606,o:81.105,M:201.789,change:new Be(165634.8684)},surface:{type:"rock",gravity:.223,minTemperature:-183,maxTemperature:-143,pressure:0,winds:0},observation:{apparentMagnitude:"10.2 | 11.9"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Iapetus_(moon)",moons:null,feature:{}},{name:"miranda",type:"moon",parent:"uranus",group:"solar-system",physic:{radius:235.8,mass:65900,rotationPeriod:122125,rotationSpeed:12.1,axialTilt:0,coreTemperature:null},orbit:{period:122083.2,speed:6.66,epoch:new Date("1980-01-01T00:00Z"),a:129900,e:.0013,i:4.338,w:68.312,o:326.438,M:311.33,change:new Be(9296209.0024)},surface:{type:"rock",gravity:.079,minTemperature:-213,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"15.8"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Miranda_(moon)",moons:null,feature:{}},{name:"ariel",type:"moon",parent:"uranus",group:"solar-system",physic:{radius:578.9,mass:1353e3,rotationPeriod:217728,rotationSpeed:16.706,axialTilt:0,coreTemperature:null},orbit:{period:217728,speed:5.51,epoch:new Date("1980-01-01T00:00Z"),a:190900,e:.0012,i:.041,w:115.349,o:22.394,M:39.481,change:new Be(5213501.51335)},surface:{type:"rock",gravity:.269,minTemperature:-213,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"14.4"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Ariel_(moon)",moons:null,feature:{}},{name:"umbriel",type:"moon",parent:"uranus",group:"solar-system",physic:{radius:584.7,mass:1172e3,rotationPeriod:358041.6,rotationSpeed:10.2608,axialTilt:0,coreTemperature:null},orbit:{period:358041.6,speed:4.67,epoch:new Date("1980-01-01T00:00Z"),a:266e3,e:.0039,i:.128,w:84.709,o:33.485,M:12.469,change:new Be(3170714.40835)},surface:{type:"rock",gravity:.2,minTemperature:-198,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"14.5"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Umbriel_(moon)",moons:null,feature:{}},{name:"titania",type:"moon",parent:"uranus",group:"solar-system",physic:{radius:788.4,mass:3527e3,rotationPeriod:752218.6,rotationSpeed:6.5854,axialTilt:0,coreTemperature:null},orbit:{period:752218.6,speed:3.64,epoch:new Date("1980-01-01T00:00Z"),a:436300,e:.0011,i:.079,w:284.4,o:99.771,M:24.614,change:new Be(1509326.9979)},surface:{type:"rock",gravity:.379,minTemperature:-213,maxTemperature:-184,pressure:0,winds:0},observation:{apparentMagnitude:"13.9"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Titania_(moon)",moons:null,feature:{}},{name:"oberon",type:"moon",parent:"uranus",group:"solar-system",physic:{radius:761.4,mass:3014e3,rotationPeriod:1163223.4,rotationSpeed:4.1127,axialTilt:0,coreTemperature:null},orbit:{period:1163223.4,speed:3.15,epoch:new Date("1980-01-01T00:00Z"),a:583500,e:.0014,i:.068,w:104.4,o:279.771,M:283.088,change:new Be(975991.3412)},surface:{type:"rock",gravity:.346,minTemperature:-200,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"14.1"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Oberon_(moon)",moons:null,feature:{}},{name:"galatea",type:"moon",parent:"neptune",group:"solar-system",physic:{radius:87.4,mass:2120,rotationPeriod:37043.5,rotationSpeed:14.825,axialTilt:0,coreTemperature:null},orbit:{period:37043.5,speed:10.508,epoch:new Date("2000-01-01T12:00Z"),a:61953,e:1e-4,i:.034,w:343.011,o:37.247,M:65.999,change:new Be(839.661303*$e)},surface:{type:"rock",gravity:.018,minTemperature:-220,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"21.9"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Galatea_(moon)",moons:null,feature:{hasFile:!0}},{name:"larissa",type:"moon",parent:"neptune",group:"solar-system",physic:{radius:97,mass:4200,rotationPeriod:47922,rotationSpeed:12.7179,axialTilt:0,coreTemperature:null},orbit:{period:47922,speed:9.643,epoch:new Date("2000-01-01T12:00Z"),a:73548,e:.0014,i:.205,w:249.891,o:308.127,M:166.246,change:new Be(23690473.8105)},surface:{type:"rock",gravity:.03,minTemperature:-220,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"21.5"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Larissa_(moon)",moons:null,feature:{hasFile:!0}},{name:"proteus",type:"moon",parent:"neptune",group:"solar-system",physic:{radius:210,mass:44e3,rotationPeriod:96940.8,rotationSpeed:13.611,axialTilt:0,coreTemperature:null},orbit:{period:96940.8,speed:7.623,epoch:new Date("2000-01-01T12:00Z"),a:117646,e:5e-4,i:.075,w:67.968,o:315.131,M:250.938,change:new Be(11707945.29425)},surface:{type:"rock",gravity:.07,minTemperature:-220,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"19.7"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Proteus_(moon)",moons:null,feature:{hasFile:!0}},{name:"triton",type:"moon",parent:"neptune",group:"solar-system",physic:{radius:1353.4,mass:214e5,rotationPeriod:507760,rotationSpeed:16.7,axialTilt:0,coreTemperature:null},orbit:{period:507772.8,speed:-4.39,epoch:new Date("2000-01-01T12:00Z"),a:354759,e:0,i:156.865,w:66.142,o:177.608,M:352.257,change:new Be(2235890.1287)},surface:{type:"rock",gravity:.779,minTemperature:-235.2,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"13.47"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Triton_(moon)",moons:null,feature:{}},{name:"charon",type:"moon",parent:"pluto",group:"solar-system",physic:{radius:606,mass:1586e3,rotationPeriod:551857,rotationSpeed:6.9,axialTilt:0,coreTemperature:null},orbit:{period:551836.8,speed:.21,epoch:new Date("2000-01-01T12:00Z"),a:19591,e:2e-4,i:.08,w:146.106,o:26.928,M:131.07,change:new Be(56.362521*$e)},surface:{type:"rock",gravity:.288,minTemperature:-220,maxTemperature:null,pressure:0,winds:0},observation:{apparentMagnitude:"16.8"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Charon_(moon)",moons:null,feature:{}}],YY=[...GY,...jY,{name:"mercury",type:"planet",parent:"sun",group:"solar-system",physic:{radius:2439.7,mass:33011e4,rotationPeriod:5067014,rotationSpeed:3,axialTilt:0,coreTemperature:null},orbit:{period:7600530.072509143,speed:47.362,epoch:new Date("2000-01-01T12:00Z"),a:.38709927*ke,e:.20563593,i:7.00497902,w:29.12703035,o:48.33076593,M:174.79252722,change:{a:37e-8*ke,e:1906e-8,i:-.00594749,w:.2858177,o:-.12534081,M:149472.51363486}},surface:{type:"rock",gravity:3.7,minTemperature:-173,maxTemperature:427,pressure:0,winds:0},observation:{rightAscension:"18h 44m 2s",declination:"+61.45\xb0",apparentMagnitude:"\u22122.48 | 7.25"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Mercury_(planet)",moons:"0",feature:{}},{name:"venus",type:"planet",parent:"sun",group:"solar-system",physic:{radius:6051.8,mass:48675e5,rotationPeriod:20997360,rotationSpeed:1.81,axialTilt:177.36,coreTemperature:null},orbit:{period:19414229.862794317,speed:35.02,epoch:new Date("2000-01-01T12:00Z"),a:.72333566*ke,e:.00677672,i:3.39467605,w:54.92262462999999,o:76.67984255,M:50.37663232,change:{a:39e-7*ke,e:-4107e-8,i:-7889e-7,w:.28037747,o:-.27769418,M:58517.812704}},surface:{type:"rock",gravity:8.87,minTemperature:462,maxTemperature:null,pressure:92,winds:300},observation:{rightAscension:"18h 11m 2s",declination:"+67.16\xb0",apparentMagnitude:"\u22124.92 | \u22122.98"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Venus",moons:"0",feature:{hasClouds:!0}},{name:"earth",type:"planet",parent:"sun",group:"solar-system",physic:{radius:6371,mass:597237e4,rotationPeriod:86164,rotationSpeed:465.1,axialTilt:23.439,coreTemperature:6e3},orbit:{period:31558187.5955489,speed:29.78,epoch:new Date("2000-01-01T12:00Z"),a:1.00000261*ke,e:.01671123,i:-1531e-8,w:102.93768193,o:0,M:-2.4731102699999923,change:{a:840.740033334,e:-4392e-8,i:-.01294668,w:.32327364,o:0,M:35999.049176169996}},surface:{type:"rock",gravity:9.807,minTemperature:-98,maxTemperature:57,pressure:1,winds:408},observation:null,ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Earth",moons:"1 (The Moon)",feature:{hasClouds:!0,startingRotation:.2}},{name:"mars",type:"planet",parent:"sun",group:"solar-system",physic:{radius:3389.5,mass:64171e4,rotationPeriod:88643,rotationSpeed:241.17,axialTilt:25.19,coreTemperature:1230},orbit:{period:59355911.04324522,speed:24.007,epoch:new Date("2000-01-01T12:00Z"),a:1.52371034*ke,e:.0933941,i:1.84969142,w:-73.5031685,o:49.55953891,M:19.390197540000003,change:{a:1847e-8*ke,e:7882e-8,i:-.00813131,w:.73698431,o:-.29257343,M:19139.85827411}},surface:{type:"rock",gravity:3.72,minTemperature:-143,maxTemperature:20,pressure:.009,winds:108},observation:{rightAscension:"21h 10m 44s",declination:"+52.8865\xb0",apparentMagnitude:"\u22122.94 | 1.86"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Mars",moons:"2 (Phobos, Deimos)",feature:{startingRotation:3.7}},{name:"jupiter",type:"planet",parent:"sun",group:"solar-system",physic:{radius:69911,mass:18982e8,rotationPeriod:35730,rotationSpeed:12600,axialTilt:3.13,coreTemperature:24e3},orbit:{period:374521663.52729654,speed:13.07,epoch:new Date("2000-01-01T12:00Z"),a:5.202887*ke,e:.04838624,i:1.30439695,w:-85.74542926000001,o:100.47390909,M:19.66796068,change:{a:-11607e-8*ke,e:-13253e-8,i:-.00183714,w:.007835619999999988,o:.20469106,M:3034.5336010700003}},surface:{type:"compressed gas",gravity:24.79,minTemperature:-108,maxTemperature:null,pressure:1,winds:644},observation:{rightAscension:"17h 52m 14s",declination:"+64.495\xb0",apparentMagnitude:"\u22122.94 | -1.66"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Jupiter",moons:"79 (Ganymede, Callisto, Io, Europa, Amalthea, Thebe, Metis, Adrastea and more)",feature:{startingRotation:4.8}},{name:"saturn",type:"planet",parent:"sun",group:"solar-system",physic:{radius:58232,mass:56834e7,rotationPeriod:38138,rotationSpeed:9870,axialTilt:26.73,coreTemperature:11700},orbit:{period:929406897.6513327,speed:9.68,epoch:new Date("2000-01-01T12:00Z"),a:9.53667594*ke,e:.05386179,i:2.48599187,w:-21.063546169999995,o:113.66242448,M:-42.64463408,change:{a:-.0012506*ke,e:-50991e-8,i:.00193609,w:-.13029421999999996,o:-.28867794,M:1222.9125941700001}},surface:{type:"compressed gas",gravity:10.44,minTemperature:-139,maxTemperature:null,pressure:1.4,winds:1800},observation:{rightAscension:"2h 42m 21s",declination:"+83.537\xb0",apparentMagnitude:"\u22120.55 | 1.17"},ringSystem:{color:"#403d32",layers:[{from:73800,to:92e3,space:650,slot:2e3,yRange:5},{from:92e3,to:117500,space:600,slot:1e3,yRange:5},{from:122200,to:136800,space:700,slot:2e3,yRange:5},{from:140210,to:140700,space:500,slot:1e3,yRange:5}]},belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Saturn",moons:"82 (Titan, Rhea, Iapetus, Dione, Tethys, Enceladus, Mimas and more)",feature:{}},{name:"uranus",type:"planet",parent:"sun",group:"solar-system",physic:{radius:25362,mass:8681e7,rotationPeriod:62064,rotationSpeed:2590,axialTilt:97.77,coreTemperature:4982},orbit:{period:2652738599.60764,speed:6.8,epoch:new Date("2000-01-01T12:00Z"),a:19.18916464*ke,e:.04725744,i:.77263783,w:96.93735127000001,o:74.01692503,M:142.28382821000002,change:{a:-.00196176*ke,e:-4397e-8,i:-.00242939,w:.36564692,o:.04240589,M:428.07397504}},surface:{type:"compressed gas",gravity:8.69,minTemperature:-197.2,maxTemperature:null,pressure:1,winds:860},observation:{rightAscension:"17h 9m 15s",declination:"-15.175\xb0",apparentMagnitude:"5.38 | 6.03"},ringSystem:{color:"#2e3638",layers:[{from:44720,to:44730,space:100,slot:500,yRange:5},{from:45670,to:45680,space:100,slot:500,yRange:5},{from:47630,to:47635,space:100,slot:300,yRange:5},{from:48290,to:48300,space:100,slot:300,yRange:5},{from:51e3,to:52e3,space:200,slot:300,yRange:5}]},belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Uranus",moons:"27 (Titania, Oberon, Umbriel, Ariel, Miranda and more)",feature:{}},{name:"neptune",type:"planet",parent:"sun",group:"solar-system",physic:{radius:24622,mass:102413e6,rotationPeriod:57996,rotationSpeed:2680,axialTilt:28.32,coreTemperature:7e3},orbit:{period:5203658914.600073,speed:5.43,epoch:new Date("2000-01-01T12:00Z"),a:30.06992276*ke,e:.00859048,i:1.77004347,w:-86.81946347000002,o:131.78422574,M:-100.08479196,change:{a:26291e-8*ke,e:5105e-8,i:35372e-8,w:-.317328,o:-.00508664,M:218.78186789}},surface:{type:"compressed gas",gravity:11.15,minTemperature:-201,maxTemperature:null,pressure:1,winds:2100},observation:{rightAscension:"19h 57m 20s",declination:"+42.950\xb0",apparentMagnitude:"7.67 | 8"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/Neptune",moons:"14 (Triton, Proteus, Nereid, Larissa, Galatea, Despina and more)",feature:{}},...WY,{name:"sun",type:"star",parent:null,group:"solar-system",physic:{radius:695700,mass:19885e11,rotationPeriod:2164320,rotationSpeed:1997,axialTilt:7.155,coreTemperature:15e6,luminosity:1},orbit:new Be,surface:{type:"plasma",gravity:274,minTemperature:5500,maxTemperature:null,pressure:868e-6,winds:null},observation:null,ringSystem:null,belts:[{name:"asteroid",size:25,speed:6.25e-8,layers:[{from:27e7,to:3e8,space:3e6,slot:7e7,yRange:3e7},{from:3e8,to:49e7,space:3e6,slot:4e7,yRange:3e7},{from:49e7,to:62e7,space:3e6,slot:7e7,yRange:3e7}]},{name:"kuiper",size:100,speed:5/(40*ke),layers:[{from:5e9,to:55e8,space:1e7,slot:7e8,yRange:3e8},{from:55e8,to:6e9,space:1e7,slot:5e8,yRange:4e8},{from:6e9,to:7e9,space:1e7,slot:4e8,yRange:5e8},{from:7e9,to:75e8,space:1e7,slot:5e8,yRange:3e8},{from:75e8,to:8e9,space:1e7,slot:8e8,yRange:1e8}]}],disks:[],wiki:"https://en.wikipedia.org/wiki/Sun",moons:null,feature:{}}],KY=[{name:"b",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:1.121*Ca,mass:1.017*Ma,rotationPeriod:130539.718368,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:130539.718368,speed:He.getCircularMotion(.01154775*ke,130539.718368),epoch:new Date,a:.01154775*ke,e:.00622,i:89.56,w:0,o:0,M:0,change:new Be(8696939.247252904)},surface:{type:"rock",gravity:.812*Sa,minTemperature:118,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1b",moons:null,feature:{hasClouds:!0}},{name:"c",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:1.095*Ca,mass:1.156*Ma,rotationPeriod:209244.164544,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:209244.164544,speed:He.getCircularMotion(.01581512*ke,209244.164544),epoch:new Date,a:.01581512*ke,e:.00654,i:89.7,w:0,o:0,M:100,change:new Be(5425699.696209541)},surface:{type:"rock",gravity:.966*Sa,minTemperature:61.65,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1c",moons:null,feature:{hasClouds:!0}},{name:"d",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:.784*Ca,mass:.297*Ma,rotationPeriod:349916.4576,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:349916.4576,speed:He.getCircularMotion(.02228038*ke,349916.4576),epoch:new Date,a:.02228038*ke,e:.00837,i:89.89,w:0,o:0,M:50,change:new Be(360/4.049959*$e)},surface:{type:"rock",gravity:.483*Sa,minTemperature:8.95,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1d",moons:null,feature:{hasClouds:!0}},{name:"e",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:.91*Ca,mass:.772*Ma,rotationPeriod:526957.3152,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:526957.3152,speed:He.getCircularMotion(.02928285*ke,526957.3152),epoch:new Date,a:.02928285*ke,e:.0051,i:89.736,w:0,o:0,M:160,change:new Be(360/6.099043*$e)},surface:{type:"rock",gravity:.93*Sa,minTemperature:-27.05,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1e",moons:null,feature:{}},{name:"f",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:1.046*Ca,mass:.934*Ma,rotationPeriod:9.205585*Fe,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:9.205585*Fe,speed:He.getCircularMotion(.03853361*ke,9.205585*Fe),epoch:new Date,a:.03853361*ke,e:.01007,i:89.719,w:0,o:0,M:300,change:new Be(360/9.205585*$e)},surface:{type:"rock",gravity:.62*Sa,minTemperature:-54,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1f",moons:null,feature:{}},{name:"g",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:1.148*Ca,mass:1.148*Ma,rotationPeriod:1067426.4672,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:1067426.4672,speed:He.getCircularMotion(.04687692*ke,1067426.4672),epoch:new Date,a:.04687692*ke,e:.00208,i:89.721,w:0,o:0,M:220,change:new Be(360/12.354473*$e)},surface:{type:"rock",gravity:.871*Sa,minTemperature:-78.65,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1g",moons:null,feature:{}},{name:"h",type:"planet",parent:"trappist-1",group:"trappist-1-system",physic:{radius:.773*Ca,mass:.331*Ma,rotationPeriod:18.767953*Fe,rotationSpeed:null,axialTilt:null,coreTemperature:null},orbit:{period:18.767953*Fe,speed:He.getCircularMotion(.06193488*ke,18.767953*Fe),epoch:new Date,a:.06193488*ke,e:.00567,i:89.796,w:0,o:0,M:90,change:new Be(360/18.767953*$e)},surface:{type:"rock",gravity:.555*Sa,minTemperature:-103.95,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1h",moons:null,feature:{}},{name:"trappist-1",type:"star",parent:null,group:"trappist-1-system",physic:{radius:84216,mass:.089*js,rotationPeriod:284688,rotationSpeed:He.getCircularMotion(121*ai,284688),axialTilt:null,coreTemperature:null,luminosity:522e-6},orbit:new Be,surface:{type:"plasma",gravity:He.getGravityByCgs(5.227),minTemperature:2237,maxTemperature:null,pressure:null,winds:null},observation:{constellation:"Aquarius",rightAscension:"23h 06m 29.283s",declination:"\u221205\xb0 02\u2032 28.59\u2033",apparentMagnitude:"18.798"},ringSystem:null,belts:[],disks:[],wiki:"https://en.wikipedia.org/wiki/TRAPPIST-1",moons:null,feature:{}}],fh=new Map([["solar-system",YY],["algol-system",IY],["fomalhaut-system",OY],["trappist-1-system",KY],["hr-8799-system",UY],["errai-system",PY],["hat-p-54-system",VY]]);class QY{init(){var e=this;return Ri(function*(){return He.getTexture("background.png").then(t=>{const u=[...e.getSide(1e19,-1e19,null,null),...e.getSide(1e19,1e19,null,null),...e.getSide(1e19,null,-1e19,null),...e.getSide(1e19,null,1e19,null),...e.getSide(1e19,null,null,-1e19),...e.getSide(1e19,null,null,1e19)],d=(new je).setFromPoints(u),h=new fs({map:t,size:8,blending:2,transparent:!0,sizeAttenuation:!1,opacity:.4});e.model3D=new Go(d,h),e.model3D.name="background"})})()}dispose(){const e=this.model3D.material;e.map.dispose(),e.dispose(),this.model3D.geometry.dispose()}getSide(e,t,n,r){const s=[];for(let o=0;o<250;o++){const a=new M;a.x=t||Zf.randFloatSpread(2*e),a.y=n||Zf.randFloatSpread(2*e),a.z=r||Zf.randFloatSpread(2*e),s.push(a)}return s}}class JY extends so{constructor(e,t={}){const n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new je;const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class mh{constructor(){this.system=[],this.beltMap=new Map,this.disks=[]}init(e,t){var n=this;return Ri(function*(){return n.data=e,n.model3D=new It,n.model3D.name=n.data.name,n.offset=new It,n.offset.name="offset",n.offset.applyQuaternion(n.getOrientation()),n.model3D.add(n.offset),n.addShape().then(()=>n.addClouds()).then(()=>n.addRingSystem()).then(()=>n.addBelts()).then(()=>n.addDisks()).then(()=>n.addTrack()).then(()=>n.addLabel(t)).then(()=>n.addAxesLine()).then(()=>n.addMassCenter())})()}dispose(){const e=this.shape.material;if(e.map.dispose(),e.dispose(),this.shape.geometry.dispose(),this.clouds){const t=this.clouds.material;t.map.dispose(),t.dispose(),this.clouds.geometry.dispose()}this.ringSystem&&(this.ringSystem.material.dispose(),this.ringSystem.geometry.dispose()),this.beltMap.forEach(t=>{const n=t.material;n.map.dispose(),n.dispose(),t.geometry.dispose()}),this.disks.forEach(t=>{const n=t.material;n.map.dispose(),n.dispose(),t.geometry.dispose()}),this.track&&(this.track.material.dispose(),this.track.geometry.dispose()),this.label&&(this.label.material.dispose(),this.label.geometry.dispose())}animate(e){this.shape.scale.setScalar(e.scale),e.rotation&&(this.shape.rotation.y=this.getRotationMotion(e.date));const t=this.getEllipticalMotion(e.date);this.offset.position.copy(t),this.clouds&&e.rotation&&(this.clouds.rotation.y+=ni(this.cloudsSpeedY/(2*this.data.physic.radius)*360*e.speed/60),this.clouds.rotation.z+=ni(this.cloudsSpeedZ/(2*this.data.physic.radius)*360*e.speed/60)),this.data.belts.forEach(r=>{const s=this.beltMap.get(r.name);s.rotation.y+=r.speed*e.speed/60;const o="ontouchstart"in window?1:Math.pow(e.scale,2);s.material.size=r.size*o}),this.data.disks.forEach((r,s)=>{this.disks[s].rotation.z-=r.speed*e.speed/60});const n="moon"===this.data.type?e.cameraDistanceRatio>8&&e.cameraDistanceRatio<100:e.cameraDistanceRatio>100;if(this.label){const r=e.cameraDistance/(8e3*e.scale);this.label.scale.set(r,r,r/8),this.label.visible=n}this.track&&(this.track.visible=n),this.axes.visible=e.showAxes,this.massCenter.visible=!0===this.data.feature.isBinary&&e.showMassCenter}addShape(){var e=this;return Ri(function*(){let t;return t=e.data.feature.hasFile?He.getGLTF(`systems/${e.data.group}/${e.data.name}.gltf`):He.getTexture(`systems/${e.data.group}/${e.data.name}.jpg`).then(n=>{const r=new $o(e.data.physic.radius,100,100),s="star"===e.data.type?new Gn({map:n}):new oh({map:n});return new qt(r,s)}),t.then(n=>{e.shape=n,e.shape.name="shape",e.offset.add(e.shape)})})()}addClouds(){var e=this;return Ri(function*(){return e.data.feature.hasClouds?He.getTexture(`systems/${e.data.group}/${e.data.name}-clouds.jpg`).then(t=>{const r=new $o(1.02*e.data.physic.radius,100,100),s=new oh({map:t,alphaMap:t,transparent:!0});e.clouds=new qt(r,s),e.clouds.name="clouds",e.shape.add(e.clouds),e.cloudsSpeedY=Ea(.6,1.5),e.cloudsSpeedZ=Ea(.35,.5)}):Promise.resolve()})()}addRingSystem(){if(!this.data.ringSystem)return;const e=this.data.ringSystem.layers.reduce((r,s)=>r.concat(He.getCircularMatrix(s)),[]).reduce((r,s)=>r.concat(s),[]),t=(new je).setFromPoints(e),n=new fs({color:this.data.ringSystem.color,size:1,transparent:!0,sizeAttenuation:!1});this.ringSystem=new Go(t,n),this.ringSystem.name="ring-system",this.shape.add(this.ringSystem)}addBelts(){var e=this;return Ri(function*(){const t=e.data.belts.map(n=>He.getTexture(`systems/${e.data.group}/${e.data.name}-${n.name}.png`).then(r=>{const s=n.layers.reduce((c,u)=>c.concat(He.getCircularMatrix(u)),[]).reduce((c,u)=>c.concat(u),[]),o=(new je).setFromPoints(s),a=new fs({map:r,size:1,transparent:!0,sizeAttenuation:!0}),l=new Go(o,a);l.name=n.name,e.beltMap.set(n.name,l),e.model3D.add(l)}));return Promise.all(t)})()}addDisks(){var e=this;return Ri(function*(){const t=e.data.disks.map((n,r)=>He.getTexture(`systems/${e.data.group}/${e.data.name}-disk-${r+1}.jpg`).then(s=>{const o=new ih(.9*n.from,1.1*n.to,100),a=new Gn({map:s,alphaMap:s,side:2,blending:2,transparent:!0,depthWrite:!1}),l=new qt(o,a);l.position.x=-n.to*n.e,l.rotation.x=ni(90+n.i),l.name="disk",e.disks.push(l),e.offset.add(l)}));return Promise.all(t)})()}addTrack(){if(!this.data.orbit.a)return;const e=(new Date).getTime(),t=this.data.orbit.period,n=t/1e3,r=[];for(let c=0,u=t;c<u;c+=n){const d=new Date(e+1e3*c),h=this.getEllipticalMotion(d);r.push(h)}const s=new D0(r),a=new sh(s,r.length,.003*this.data.orbit.a,32,!0),l=new Gn({color:"#FFF",opacity:.15,transparent:!0,depthWrite:!1});this.track=new qt(a,l),this.track.name="track",this.model3D.add(this.track)}addLabel(e){const t=new JY(this.data.name,{font:e}),n=new Gn({color:"#DDD"});this.label=new qt(t,n),this.label.rotateX(ni(-90)),this.label.position.setX(1.5*this.data.physic.radius),this.label.name="label",this.shape.add(this.label)}addAxesLine(){const e=1.5*this.data.physic.radius,t=[new M(0,-e,0),new M(0,e,0)],n=(new je).setFromPoints(t),r=new Qn({color:"#DDD"});this.axes=new to(n,r),this.axes.name="axes",this.shape.add(this.axes)}addMassCenter(){const e=new $o(.07*this.data.physic.radius,40,40),t=new Gn({color:"#F00"});this.massCenter=new qt(e,t),this.massCenter.name="mass-center",this.model3D.add(this.massCenter)}getEllipticalMotion(e){const t=this.data.orbit,n=(e.getTime()-t.epoch.getTime())/31536e8;let r=t.a,s=t.e,o=ni(t.i),a=ni(t.w)-ni(90),l=ni(t.o)+ni(90),c=ni(t.M);const u=t.change||new Be;r+=u.a*n,s+=u.e*n,o+=ni(u.i)*n,a+=ni(u.w)*n,l+=ni(u.o)*n,c+=ni(u.M)*n;let d=c,h=d,p=!0;for(let b=1;b<10&&p;b++)d=c+s*Math.sin(d),p=Math.abs(h-d)>1e-10,h=d;const f=r*(Math.cos(d)-s),m=r*Math.sin(d)*Math.sqrt(1-Math.pow(s,2));let y=Math.cos(a)*f-Math.sin(a)*m,g=Math.sin(a)*f+Math.cos(a)*m,_=Math.sin(o)*y;y=Math.cos(o)*y;const v=y;return y=Math.cos(l)*v-Math.sin(l)*g,g=Math.sin(l)*v+Math.cos(l)*g,y=Co(y,8),g=Co(g,8),_=Co(_,8),new M(y,_,-g)}getRotationMotion(e){if(!this.data.physic.rotationPeriod)return 0;const t=Date.UTC(2e3,0,1,12,0,0),n=(e.getTime()-t)/1e3,r=2*Math.PI/this.data.physic.rotationPeriod;return(this.data.feature.startingRotation||0)+n*r}getOrientation(){const e=this.data.orbit,t=new It;t.rotation.z=ni(this.data.physic.axialTilt);const n=new It;n.rotation.x=ni(e.i),n.rotation.y=-ni(e.w),n.add(t);const r=new It;r.rotation.y=ni(e.o),r.add(n),r.updateMatrixWorld(!0);const s=new Hn;return t.getWorldQuaternion(s),s}}const K0={type:"change"},Q0={type:"start"},J0={type:"end"};class eX extends Ao{constructor(e,t){super(),void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const n=this;this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.target=new M;const s=1e-6,o=new M;let a=1,l=-1,c=-1,u=0,d=0,h=0;const p=new M,f=new Q,m=new Q,y=new M,g=new Q,_=new Q,v=new Q,b=new Q,x=[],S={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const U=n.domElement.getBoundingClientRect(),le=n.domElement.ownerDocument.documentElement;n.screen.left=U.left+window.pageXOffset-le.clientLeft,n.screen.top=U.top+window.pageYOffset-le.clientTop,n.screen.width=U.width,n.screen.height=U.height};const w=function(){const U=new Q;return function(he,Re){return U.set((he-n.screen.left)/n.screen.width,(Re-n.screen.top)/n.screen.height),U}}(),I=function(){const U=new Q;return function(he,Re){return U.set((he-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-Re))/n.screen.width),U}}();function z(U){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(U.pointerId),n.domElement.addEventListener("pointermove",B),n.domElement.addEventListener("pointerup",R)),function ye(U){x.push(U)}(U),"touch"===U.pointerType?function ie(U){if(1===(xt(U),x.length))l=3,m.copy(I(x[0].pageX,x[0].pageY)),f.copy(m);else{l=4;const le=x[0].pageX-x[1].pageX,he=x[0].pageY-x[1].pageY;d=u=Math.sqrt(le*le+he*he),v.copy(w((x[0].pageX+x[1].pageX)/2,(x[0].pageY+x[1].pageY)/2)),b.copy(v)}n.dispatchEvent(Q0)}(U):function j(U){if(-1===l)switch(U.button){case n.mouseButtons.LEFT:l=0;break;case n.mouseButtons.MIDDLE:l=1;break;case n.mouseButtons.RIGHT:l=2;break;default:l=-1}const le=-1!==c?c:l;0!==le||n.noRotate?1!==le||n.noZoom?2===le&&!n.noPan&&(v.copy(w(U.pageX,U.pageY)),b.copy(v)):(g.copy(w(U.pageX,U.pageY)),_.copy(g)):(m.copy(I(U.pageX,U.pageY)),f.copy(m)),n.dispatchEvent(Q0)}(U))}function B(U){!1!==n.enabled&&("touch"===U.pointerType?function Y(U){if(1===(xt(U),x.length))f.copy(m),m.copy(I(U.pageX,U.pageY));else{const le=function oe(U){return S[(U.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}(U),he=U.pageX-le.x,Re=U.pageY-le.y;d=Math.sqrt(he*he+Re*Re),b.copy(w((U.pageX+le.x)/2,(U.pageY+le.y)/2))}}(U):function P(U){const le=-1!==c?c:l;0!==le||n.noRotate?1!==le||n.noZoom?2===le&&!n.noPan&&b.copy(w(U.pageX,U.pageY)):_.copy(w(U.pageX,U.pageY)):(f.copy(m),m.copy(I(U.pageX,U.pageY)))}(U))}function R(U){!1!==n.enabled&&("touch"===U.pointerType?function ee(U){switch(x.length){case 0:l=-1;break;case 1:l=3,m.copy(I(U.pageX,U.pageY)),f.copy(m);break;case 2:l=4,m.copy(I(U.pageX-f.pageX,U.pageY-f.pageY)),f.copy(m)}n.dispatchEvent(J0)}(U):function F(){l=-1,n.dispatchEvent(J0)}(),fe(U),0===x.length&&(n.domElement.releasePointerCapture(U.pointerId),n.domElement.removeEventListener("pointermove",B),n.domElement.removeEventListener("pointerup",R)))}function J(U){fe(U)}function V(U){!1!==n.enabled&&(window.removeEventListener("keydown",V),-1===c&&(U.code!==n.keys[0]||n.noRotate?U.code!==n.keys[1]||n.noZoom?U.code===n.keys[2]&&!n.noPan&&(c=2):c=1:c=0))}function H(){!1!==n.enabled&&(c=-1,window.addEventListener("keydown",V))}function q(U){if(!1!==n.enabled&&!0!==n.noZoom){switch(U.preventDefault(),U.deltaMode){case 2:g.y-=.025*U.deltaY;break;case 1:g.y-=.01*U.deltaY;break;default:g.y-=25e-5*U.deltaY}n.dispatchEvent(Q0),n.dispatchEvent(J0)}}function ge(U){!1!==n.enabled&&U.preventDefault()}function fe(U){delete S[U.pointerId];for(let le=0;le<x.length;le++)if(x[le].pointerId==U.pointerId)return void x.splice(le,1)}function xt(U){let le=S[U.pointerId];void 0===le&&(le=new Q,S[U.pointerId]=le),le.set(U.pageX,U.pageY)}this.rotateCamera=function(){const U=new M,le=new Hn,he=new M,Re=new M,Qe=new M,K=new M;return function(){K.set(m.x-f.x,m.y-f.y,0);let me=K.length();me?(p.copy(n.object.position).sub(n.target),he.copy(p).normalize(),Re.copy(n.object.up).normalize(),Qe.crossVectors(Re,he).normalize(),Re.setLength(m.y-f.y),Qe.setLength(m.x-f.x),K.copy(Re.add(Qe)),U.crossVectors(K,p).normalize(),me*=n.rotateSpeed,le.setFromAxisAngle(U,me),p.applyQuaternion(le),n.object.up.applyQuaternion(le),y.copy(U),h=me):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),p.copy(n.object.position).sub(n.target),le.setFromAxisAngle(y,h),p.applyQuaternion(le),n.object.up.applyQuaternion(le)),f.copy(m)}}(),this.zoomCamera=function(){let U;4===l?(U=u/d,u=d,n.object.isPerspectiveCamera?p.multiplyScalar(U):n.object.isOrthographicCamera?(n.object.zoom/=U,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(U=1+(_.y-g.y)*n.zoomSpeed,1!==U&&U>0&&(n.object.isPerspectiveCamera?p.multiplyScalar(U):n.object.isOrthographicCamera?(n.object.zoom/=U,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?g.copy(_):g.y+=(_.y-g.y)*this.dynamicDampingFactor)},this.panCamera=function(){const U=new Q,le=new M,he=new M;return function(){if(U.copy(b).sub(v),U.lengthSq()){if(n.object.isOrthographicCamera){const K=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;U.x*=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,U.y*=K}U.multiplyScalar(p.length()*n.panSpeed),he.copy(p).cross(n.object.up).setLength(U.x),he.add(le.copy(n.object.up).setLength(U.y)),n.object.position.add(he),n.target.add(he),n.staticMoving?v.copy(b):v.add(U.subVectors(b,v).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!n.noZoom||!n.noPan)&&(p.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,p.setLength(n.maxDistance)),g.copy(_)),p.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,p.setLength(n.minDistance)),g.copy(_)))},this.update=function(){p.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,p),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>s&&(n.dispatchEvent(K0),o.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(o.distanceToSquared(n.object.position)>s||a!==n.object.zoom)&&(n.dispatchEvent(K0),o.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=-1,c=-1,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),p.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(K0),o.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",ge),n.domElement.removeEventListener("pointerdown",z),n.domElement.removeEventListener("pointercancel",J),n.domElement.removeEventListener("wheel",q),n.domElement.removeEventListener("pointermove",B),n.domElement.removeEventListener("pointerup",R),window.removeEventListener("keydown",V),window.removeEventListener("keyup",H)},this.domElement.addEventListener("contextmenu",ge),this.domElement.addEventListener("pointerdown",z),this.domElement.addEventListener("pointercancel",J),this.domElement.addEventListener("wheel",q,{passive:!1}),window.addEventListener("keydown",V),window.addEventListener("keyup",H),this.handleResize(),this.update()}}class tX{constructor(e,t){this.lastOffset=new M,this.engineState=e,this.state=new eX(e.camera,t),this.state.rotateSpeed="ontouchstart"in window?1:2.5,this.state.noPan=!0}animate(){this.state.target=He.getWorldPosition(this.engineState.aster.data.feature.isBinary&&this.engineState.anchorMassCenter?this.engineState.aster.model3D:this.engineState.aster.offset);const n=this.state.target.clone().sub(this.lastOffset);this.engineState.camera.position.add(n),this.lastOffset=this.state.target.clone();const s=this.engineState.scale*this.engineState.aster.data.physic.radius;this.state.minDistance=2.5*s,this.engineState.camera.near=s/100,this.engineState.camera.updateProjectionMatrix(),this.zoomMotion&&this.initialMotion(),this.state.update()}moveToAster(e,t=new M(0,0,1),n=4.5){const r=this.engineState.asterMap.get(e);this.engineState.aster=r,this.engineState.camera.up.set(0,1,0);const s=He.getWorldPosition(r.offset),a=t.multiplyScalar(r.data.physic.radius*n);this.engineState.camera.position.copy(s).sub(a),this.lastOffset=s}dispose(){this.state.dispose()}getDistance(){return this.engineState.camera.position.clone().sub(this.state.target).length()}zoom(e,t){const n=this.getDistance(),r=Math.abs(e)/n,s=this.engineState.camera.position,o=s.clone().sub(this.state.target),a=o.clone().multiplyScalar(r),l=t?o.clone().sub(a):a.clone().sub(o);t?s.sub(l):s.add(l)}play(){this.zoomMotion=1}initialMotion(){this.state.enabled=!1;const e=(this.state.maxDistance-this.state.minDistance)/70;this.zoomMotion+=e/60/2;const t=He.getCurvedScale(0,e,this.zoomMotion);this.zoom(this.state.minDistance+t,!1),this.zoomMotion>=e&&(this.zoomMotion=void 0,this.state.enabled=!0)}}class tu extends qt{constructor(){super(tu.Geometry,new Gn({opacity:0,transparent:!0})),this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new M,t=new M,n=new Uo(new Uint8Array(768),16,16,us);n.minFilter=pn,n.magFilter=pn,n.wrapS=Tn,n.wrapT=Tn;const r=new Uo(new Uint8Array(768),16,16,us);r.minFilter=pn,r.magFilter=pn,r.wrapS=Tn,r.wrapT=Tn;const s=tu.Geometry,o=new Bo({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}",fragmentShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );\n\n\t\t\t\t}",depthTest:!0,depthWrite:!1,transparent:!1}),a=new Bo({uniforms:{map:{value:n},scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\t\t\t\tattribute vec2 uv;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUV = uv;\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}",fragmentShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform sampler2D map;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = texture2D( map, vUV );\n\n\t\t\t\t}",depthTest:!1,depthWrite:!1,transparent:!1}),l=new qt(s,o),c=[],u=gh.Shader,d=new Bo({uniforms:{map:{value:null},occlusionMap:{value:r},color:{value:new _e(16777215)},scale:{value:new Q},screenPosition:{value:new M}},vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:2,transparent:!0,depthWrite:!1}),h=new qt(s,d);this.addElement=function(g){c.push(g)};const p=new Q,f=new Q,m=new eu,y=new Xt;this.onBeforeRender=function(g,_,v){g.getCurrentViewport(y);const x=y.z/2,S=y.w/2;let w=16/y.w;if(p.set(w*(y.w/y.z),w),m.min.set(y.x,y.y),m.max.set(y.x+(y.z-16),y.y+(y.w-16)),t.setFromMatrixPosition(this.matrixWorld),t.applyMatrix4(v.matrixWorldInverse),!(t.z>0)&&(e.copy(t).applyMatrix4(v.projectionMatrix),f.x=y.x+e.x*x+x-8,f.y=y.y+e.y*S+S-8,m.containsPoint(f))){g.copyFramebufferToTexture(f,n);let I=o.uniforms;I.scale.value=p,I.screenPosition.value=e,g.renderBufferDirect(v,null,s,o,l,null),g.copyFramebufferToTexture(f,r),I=a.uniforms,I.scale.value=p,I.screenPosition.value=e,g.renderBufferDirect(v,null,s,a,l,null);const z=2*-e.x,B=2*-e.y;for(let R=0,J=c.length;R<J;R++){const V=c[R],H=d.uniforms;H.color.value.copy(V.color),H.map.value=V.texture,H.screenPosition.value.x=e.x+z*V.distance,H.screenPosition.value.y=e.y+B*V.distance,w=V.size/y.w,H.scale.value.set(w*(y.w/y.z),w),d.uniformsNeedUpdate=!0,g.renderBufferDirect(v,null,s,d,h,null)}}},this.dispose=function(){o.dispose(),a.dispose(),d.dispose(),n.dispose(),r.dispose();for(let g=0,_=c.length;g<_;g++)c[g].texture.dispose()}}}tu.prototype.isLensflare=!0;let ew,gh=(()=>{class i{constructor(t,n=1,r=0,s=new _e(16777215)){this.texture=t,this.size=n,this.distance=r,this.color=s}}return i.Shader={uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\tprecision highp float;\n\n\t\tuniform vec3 screenPosition;\n\t\tuniform vec2 scale;\n\n\t\tuniform sampler2D occlusionMap;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUV;\n\t\tvarying float vVisibility;\n\n\t\tvoid main() {\n\n\t\t\tvUV = uv;\n\n\t\t\tvec2 pos = position.xy;\n\n\t\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\n\n\t\t\tvVisibility =        visibility.r / 9.0;\n\t\t\tvVisibility *= 1.0 - visibility.g / 9.0;\n\t\t\tvVisibility *=       visibility.b / 9.0;\n\n\t\t\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D map;\n\t\tuniform vec3 color;\n\n\t\tvarying vec2 vUV;\n\t\tvarying float vVisibility;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texture = texture2D( map, vUV );\n\t\t\ttexture.a *= vVisibility;\n\t\t\tgl_FragColor = texture;\n\t\t\tgl_FragColor.rgb *= color;\n\n\t\t}"},i})();tu.Geometry=function(){const i=new je,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),t=new zo(e,5);return i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new ps(t,3,0,!1)),i.setAttribute("uv",new ps(t,2,3,!1)),i}();class nX extends mh{constructor(){super(...arguments),this.lensflareSizes=[1100,200,300,250]}init(e,t){var n=()=>super.init,r=this;return Ri(function*(){return n().call(r,e,t).then(()=>r.addCorona()).then(()=>r.addFlare()).then(()=>r.addLight())})()}dispose(){super.dispose();const e=this.corona.material;e.map.dispose(),e.dispose(),this.corona.geometry.dispose(),this.flare.material.dispose(),this.flare.geometry.dispose(),this.lensflare.dispose()}animate(e){this.corona.scale.setScalar(e.scale),this.flare.scale.setScalar(e.scale);const t=new Hn;e.camera.getWorldQuaternion(t),this.corona.up=new M(0,1,0).applyQuaternion(t).normalize(),this.corona.lookAt(e.camera.position),this.flare.material.uniforms.time.value+=1/60,this.flare.up=new M(0,1,0).applyQuaternion(t).normalize(),this.flare.lookAt(e.camera.position);const r=3828e5*Math.sqrt(this.data.physic.luminosity)/e.camera.position.length();this.lensflareElement.size=this.lensflareSizes[0]*r,this.shape.visible=e.scale>50||"star"===e.aster.data.type&&e.cameraDistanceRatio<150,this.flare.visible=this.shape.visible,this.lensflare.visible=!this.shape.visible&&e.showGlare,super.animate(e)}addCorona(){var e=this;return Ri(function*(){return He.getTexture(`systems/${e.data.group}/${e.data.name}-corona.jpg`).then(t=>{const n=new qc(2.6*e.data.physic.radius,100),r=new Gn({map:t,alphaMap:t,blending:2,depthWrite:!1});e.corona=new qt(n,r),e.corona.name="corona",e.offset.add(e.corona)})})()}addFlare(){var e=this;return Ri(function*(){const t=1.045*e.data.physic.radius,n={vertex:null,fragment:null},r=new Array(200).fill(null).map(()=>{const o=Ea(0,1),a=Math.round(Ea(0,1))?1:-1;return new Q(o,a)}),s=`#define SECTORS_LENGTH ${r.length}\n`;return He.getFile("star-flare.vert").then(o=>n.vertex=o).then(()=>He.getFile("star-flare.frag")).then(o=>n.fragment=o).then(()=>{const o=new Qs({uniforms:{radius:{value:t},variation:{value:.013},sectors:{value:r},time:{value:0}},vertexShader:s+n.vertex,fragmentShader:s+n.fragment,transparent:!0,blending:2}),a=new qc(t,300);e.flare=new qt(a,o),e.flare.name="flare",e.offset.add(e.flare)})})()}addLight(){var e=this;return Ri(function*(){return e.light=new Qm("#FFF",3,1e11,1),e.lensflare=new tu,e.lensflare.name="lensflare",He.getTexture(`systems/${e.data.group}/${e.data.name}-glare.jpg`).then(t=>e.lensflareElement=new gh(t,e.lensflareSizes[0],0,e.light.color)).then(()=>He.getTexture("lensflare.jpg")).then(t=>{e.lensflare.addElement(e.lensflareElement),e.lensflare.addElement(new gh(t,e.lensflareSizes[1],.8)),e.lensflare.addElement(new gh(t,e.lensflareSizes[2],.9)),e.lensflare.addElement(new gh(t,e.lensflareSizes[3],1)),e.light.add(e.lensflare),e.offset.add(e.light)})})()}}class iX{constructor(e){this.state=new E6,this.factoryMap=new Map([["star",()=>new nX],["planet",()=>new mh],["dwarf",()=>new mh],["moon",()=>new mh],["asteroid",()=>new mh]]),this.host=e,this.webGLRenderer=new Kt({powerPreference:"high-performance"}),this.webGLRenderer.setPixelRatio(window.devicePixelRatio),this.webGLRenderer.physicallyCorrectLights=!0,this.host.appendChild(this.webGLRenderer.domElement),this.animate(),this.update(),this.resizeListener=()=>setTimeout(()=>this.update(),100),window.addEventListener("resize",this.resizeListener)}createSystem(e,t=null){var n=this;return Ri(function*(){return n.state.scene&&n.destroySystem(),n.state.scene=new xm,n.state.asterMap=new Map,n.state.camera=new Kn(40,n.host.offsetWidth/n.host.offsetHeight,1,1e20),n.state.camera.position.set(0,0,1),n.control=new tX(n.state,n.webGLRenderer.domElement),He.getFont("droid_sans_mono_regular").then(r=>n.loadAsters(e,t,r)).then(()=>{const r=Array.from(n.state.asterMap.values()),s=Math.max.apply(Math,r.map(o=>o.data.orbit.a));n.control.state.maxDistance=4*s,n.update()})})()}destroySystem(){this.state.asterMap.forEach(e=>e.dispose()),this.state.asterMap.clear(),this.state.background.dispose(),this.state.scene=void 0,this.state.camera=void 0,this.state.aster=void 0}destroy(){this.destroySystem(),this.control.dispose(),window.removeEventListener("resize",this.resizeListener),window.cancelAnimationFrame(this.animationId)}resetState(){this.state.rotation=!0,this.state.anchorMassCenter=!1,this.state.scale=1,this.state.speed=1,this.state.showAxes=!1,this.state.showGlare=!0,this.state.showMassCenter=!1,this.state.date=new Date;const t=Array.from(this.state.asterMap.values()).find(n=>"star"===n.data.type);this.control.moveToAster(t.data.name,new M(0,0,-1),8)}update(){this.webGLRenderer.setSize(this.host.offsetWidth,this.host.offsetHeight),this.state.camera&&(this.state.camera.aspect=this.host.offsetWidth/this.host.offsetHeight,this.state.camera.updateProjectionMatrix())}animate(){this.animationId=window.requestAnimationFrame(()=>this.animate());const e=this.state.date.getMilliseconds();this.state.date.setMilliseconds(e+1e3*this.state.speed/60),this.state.date=new Date(this.state.date),this.state.scene&&this.state.aster&&(this.updateCameraDistance(),this.state.asterMap.forEach(t=>t.animate(this.state)),this.state.scene.updateMatrixWorld(!0),this.control.animate(),this.webGLRenderer.render(this.state.scene,this.state.camera))}loadAsters(e,t,n){var r=this;return Ri(function*(){let s=0;const o=Math.round(100/(e.length+1)),a=()=>{s+=o,s>100&&(s=100),t&&t(s)},l=[];let c=Promise.resolve();return function T6(i,e){if("number"!=typeof e||e<1)throw new Error('jackknife: called "chunks" with invalid chunkSize.');const t=[];for(let n=0;n<i.length;n+=e)t.push(i.slice(n,n+e));return t}(e,4).forEach(u=>{const d=[];u.forEach(h=>{const p=r.factoryMap.get(h.type)();l.push(p),d.push(p.init(h,n).then(()=>a()))}),c=c.then(()=>Promise.all(d))}),r.state.background=new QY,c=c.then(()=>r.state.background.init().then(()=>a())),c.then(()=>{l.forEach(d=>{const h=l.find(p=>p.data.name===d.data.parent);h&&(h.offset.add(d.model3D),h.system.push(d))});const u=l.filter(d=>!d.data.parent).map(d=>d.model3D);l.forEach(d=>r.state.asterMap.set(d.data.name,d)),r.state.scene.add(...u),r.state.scene.add(r.state.background.model3D)})})()}updateCameraDistance(){const e=this.state.aster.data,t="moon"===e.type?this.state.asterMap.get(e.parent):this.state.aster,n=He.getWorldPosition(this.state.aster.shape);this.state.cameraDistance=this.state.camera.position.distanceTo(n),this.state.cameraDistanceRatio=this.state.cameraDistance/t.data.physic.radius}}try{ew=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ew=!1}let nu,ui=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function A8(i){return i===z1}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ew)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)($(lv))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const eR=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function tR(){if(nu)return nu;if("object"!=typeof document||!document)return nu=new Set(eR),nu;let i=document.createElement("input");return nu=new Set(eR.filter(e=>(i.setAttribute("type",e),i.type===e))),nu}let _h,Za,tw;function iu(i){return function rX(){if(null==_h&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>_h=!0}))}finally{_h=_h||!1}return _h}()?i:!!i.capture}function sX(){if(null==Za){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Za=!1,Za;if("scrollBehavior"in document.documentElement.style)Za=!0;else{const i=Element.prototype.scrollTo;Za=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Za}function yh(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function Ka(i){return i.composedPath?i.composedPath()[0]:i.target}function nw(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class lX extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ml;return this._value}next(e){super.next(this._value=e)}}function cr(...i){let e=i[i.length-1];return gl(e)?(i.pop(),$g(i,e)):Yg(i)}function Fi(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Zo(){}function cg(i,e,t){return function(r){return r.lift(new yX(i,e,t))}}class yX{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new vX(e,this.nextOrObserver,this.error,this.complete))}}class vX extends En{constructor(e,t,n,r){super(e),this._tapNext=Zo,this._tapError=Zo,this._tapComplete=Zo,this._tapError=n||Zo,this._tapComplete=r||Zo,uo(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Zo,this._tapError=t.error||Zo,this._tapComplete=t.complete||Zo)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class bX extends gt{constructor(e,t){super()}schedule(e,t=0){return this}}class rw extends bX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let nR=(()=>{class i{constructor(t,n=i.now){this.SchedulerAction=t,this.now=n}schedule(t,n=0,r){return new this.SchedulerAction(this,t).schedule(r,n)}}return i.now=()=>Date.now(),i})();class Ms extends nR{constructor(e,t=nR.now){super(e,()=>Ms.delegate&&Ms.delegate!==this?Ms.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Ms.delegate&&Ms.delegate!==this?Ms.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const sw=new Ms(rw);function ow(i,e=sw){return t=>t.lift(new wX(i,e))}class wX{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new xX(e,this.dueTime,this.scheduler))}}class xX extends En{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(MX,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function MX(i){i.debouncedNext()}function Gi(i,e){return function(n){return n.lift(new CX(i,e))}}class CX{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new SX(e,this.predicate,this.thisArg))}}class SX extends En{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const EX=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})(),iR=new cn(i=>i.complete());function rR(i){return i?function DX(i){return new cn(e=>i.schedule(()=>e.complete()))}(i):iR}function si(i){return e=>0===i?rR():e.lift(new TX(i))}class TX{constructor(e){if(this.total=e,this.total<0)throw new EX}call(e,t){return t.subscribe(new AX(e,this.total))}}class AX extends En{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function sR(i){return e=>e.lift(new IX(i))}class IX{constructor(e){this.total=e}call(e,t){return t.subscribe(new kX(e,this.total))}}class kX extends En{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function oR(i,e){return t=>t.lift(new RX(i,e))}class RX{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new PX(e,this.compare,this.keySelector))}}class PX extends En{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:r}=this;n=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}function ln(i){return e=>e.lift(new FX(i))}class FX{constructor(e){this.notifier=e}call(e,t){const n=new LX(e),r=_l(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class LX extends yl{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,n,r,s){this.seenValue=!0,this.complete()}notifyComplete(){}}function wt(i){return null!=i&&"false"!=`${i}`}function Cs(i,e=0){return function OX(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function ug(i){return Array.isArray(i)?i:[i]}function jn(i){return null==i?"":"string"==typeof i?i:`${i}px`}function co(i){return i instanceof mt?i.nativeElement:i}let aR=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),BX=(()=>{class i{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,n)=>this._cleanupObserver(n))}observe(t){const n=co(t);return new cn(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const n=new Je,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:n,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:n,stream:r}=this._observedElements.get(t);n&&n.disconnect(),r.complete(),this._observedElements.delete(t)}}}return i.\u0275fac=function(t){return new(t||i)($(aR))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),lR=(()=>{class i{constructor(t,n,r){this._contentObserver=t,this._elementRef=n,this._ngZone=r,this.event=new Pe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=wt(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Cs(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ow(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(C(BX),C(mt),C(tt))},i.\u0275dir=Ee({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),aw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[aR]}),i})();const cR={};class HX{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new zX(e,this.resultSelector))}}class zX extends yl{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(cR),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const r=e[n];this.add(_l(this,r,r,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,s){const o=this.values,l=this.toRespond?o[n]===cR?--this.toRespond:this.toRespond:0;o[n]=t,0===l&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function lw(...i){return function UX(){return Ax(1)}()(cr(...i))}function ur(...i){const e=i[i.length-1];return gl(e)?(i.pop(),t=>lw(i,t,e)):t=>lw(i,t)}const uR=new Set;let ru,GX=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):WX}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function jX(i){if(!uR.has(i))try{ru||(ru=document.createElement("style"),ru.setAttribute("type","text/css"),document.head.appendChild(ru)),ru.sheet&&(ru.sheet.insertRule(`@media ${i} {body{ }}`,0),uR.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)($(ui))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function WX(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let cw=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new Je}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return dR(ug(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=function VX(...i){let e=null,t=null;return gl(i[i.length-1])&&(t=i.pop()),"function"==typeof i[i.length-1]&&(e=i.pop()),1===i.length&&fl(i[0])&&(i=i[0]),Yg(i,t).lift(new HX(e))}(dR(ug(t)).map(o=>this._registerQuery(o).observable));return s=lw(s.pipe(si(1)),s.pipe(sR(1),ow(0))),s.pipe(Wn(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new cn(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(ur(n),Wn(({matches:o})=>({query:t,matches:o})),ln(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)($(GX),$(tt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dR(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const tl_Medium="(min-width: 960px) and (max-width: 1279.98px)",tl_Large="(min-width: 1280px) and (max-width: 1919.98px)";function dg(i,e){return(i.getAttribute(e)||"").match(/\S+/g)||[]}const pR="cdk-describedby-message",hg="cdk-describedby-host";let uw=0,YX=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+uw++,this._document=t,this._id=Rs(cc)+"-"+uw++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;const s=dw(n,r);"string"!=typeof n?(fR(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){var s;if(!n||!this._isElementNode(t))return;const o=dw(n,r);if(this._isElementDescribedByMessage(t,o)&&this._removeMessageReference(t,o),"string"==typeof n){const a=this._messageRegistry.get(o);a&&0===a.referenceCount&&this._deleteMessageElement(o)}0===(null===(s=this._messagesContainer)||void 0===s?void 0:s.childNodes.length)&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){var t;const n=this._document.querySelectorAll(`[${hg}="${this._id}"]`);for(let r=0;r<n.length;r++)this._removeCdkDescribedByReferenceIds(n[r]),n[r].removeAttribute(hg);null===(t=this._messagesContainer)||void 0===t||t.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){const r=this._document.createElement("div");fR(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(dw(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){var n,r;null===(n=this._messageRegistry.get(t))||void 0===n||null===(r=n.messageElement)||void 0===r||r.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const n=dg(t,"aria-describedby").filter(r=>0!=r.indexOf(pR));t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){const r=this._messageRegistry.get(n);(function $X(i,e,t){const n=dg(i,e);n.some(r=>r.trim()==t.trim())||(n.push(t.trim()),i.setAttribute(e,n.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(hg,this._id),r.referenceCount++}_removeMessageReference(t,n){const r=this._messageRegistry.get(n);r.referenceCount--,function qX(i,e,t){const r=dg(i,e).filter(s=>s!=t.trim());r.length?i.setAttribute(e,r.join(" ")):i.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(hg)}_isElementDescribedByMessage(t,n){const r=dg(t,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(t){return new(t||i)($(lt),$(ui))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dw(i,e){return"string"==typeof i?`${e||""}/${i}`:i}function fR(i,e){i.id||(i.id=`${pR}-${e}-${uw++}`)}class XX extends class mR{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Je,this._typeaheadSubscription=gt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Je,this.change=new Je,e instanceof ld&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(cg(t=>this._pressedLetters.push(t)),ow(e),Gi(()=>this._pressedLetters.length>0),Wn(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Fi(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof ld?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let Mh=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function QX(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function KX(i){try{return i.frameElement}catch{return null}}(function oZ(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===_R(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=_R(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function rZ(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function sZ(i){return!function eZ(i){return function nZ(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function JX(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function tZ(i){return function iZ(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||gR(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)($(ui))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function gR(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function _R(i){if(!gR(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class aZ{constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(si(1)).subscribe(e)}}let Ch=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new aZ(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)($(Mh),$(tt),$(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),lZ=(()=>{class i{constructor(t,n,r){this._elementRef=t,this._focusTrapFactory=n,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=wt(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=wt(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const n=t.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=yh(),this.focusTrap.focusInitialElementWhenReady()}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Ch),C(lt))},i.\u0275dir=Ee({type:i,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[yn]}),i})();function yR(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function vR(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const cZ=new ue("cdk-input-modality-detector-options"),uZ={ignoreKeys:[18,17,224,91,16]},su=iu({passive:!0,capture:!0});let dZ=(()=>{class i{constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new lX(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;null!==(a=this._options)&&void 0!==a&&null!==(l=a.ignoreKeys)&&void 0!==l&&l.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ka(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(yR(o)?"keyboard":"mouse"),this._mostRecentTarget=Ka(o))},this._onTouchstart=o=>{vR(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ka(o))},this._options={...uZ,...s},this.modalityDetected=this._modality.pipe(sR(1)),this.modalityChanged=this.modalityDetected.pipe(oR()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,su),r.addEventListener("mousedown",this._onMousedown,su),r.addEventListener("touchstart",this._onTouchstart,su)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,su),document.removeEventListener("mousedown",this._onMousedown,su),document.removeEventListener("touchstart",this._onTouchstart,su))}}return i.\u0275fac=function(t){return new(t||i)($(ui),$(tt),$(lt),$(cZ,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hZ=new ue("liveAnnouncerElement",{providedIn:"root",factory:function pZ(){return null}}),fZ=new ue("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let mZ=(()=>{class i{constructor(t,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,n;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(n=this._currentResolve)||void 0===n||n.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(t){return new(t||i)($(hZ,8),$(tt),$(lt),$(fZ,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const gZ=new ue("cdk-focus-monitor-default-options"),pg=iu({passive:!0,capture:!0});let Dr=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Je,this._rootNodeFocusAndBlurListener=a=>{for(let c=Ka(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,n=!1){const r=co(t);if(!this._platform.isBrowser||1!==r.nodeType)return cr(null);const s=function aX(i){if(function oX(){if(null==tw){const i=typeof document<"u"?document.head:null;tw=!(!i||!i.createShadowRoot&&!i.attachShadow)}return tw}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Je,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const n=co(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=co(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!(null==t||!t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=Ka(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,pg),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,pg)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ln(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pg),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pg),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)($(tt),$(ui),$(dZ),$(lt,8),$(gZ,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_Z=(()=>{class i{constructor(t,n){this._elementRef=t,this._focusMonitor=n,this._focusOrigin=null,this.cdkFocusChange=new Pe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Dr))},i.\u0275dir=Ee({type:i,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),i})();const wR="cdk-high-contrast-black-on-white",xR="cdk-high-contrast-white-on-black",hw="cdk-high-contrast-active";let MR=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=Rs(cw).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(hw,wR,xR),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(hw,wR):2===n&&t.add(hw,xR)}}}return i.\u0275fac=function(t){return new(t||i)($(ui),$(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),pw=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)($(MR))},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[aw]}),i})();function fw(i,e,t,n){return uo(t)&&(n=t,t=void 0),n?fw(i,e,t).pipe(Wn(r=>fl(r)?n(...r):n(r))):new cn(r=>{CR(i,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function CR(i,e,t,n,r){let s;if(function bZ(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){const o=i;i.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function vZ(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){const o=i;i.on(e,t),s=()=>o.off(e,t)}else if(function yZ(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){const o=i;i.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(let o=0,a=i.length;o<a;o++)CR(i[o],e,t,n,r)}n.add(s)}new class xZ extends Ms{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,s=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,n){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw n}}}(class wZ extends rw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let CZ=1;const SZ=Promise.resolve(),fg={};function SR(i){return i in fg&&(delete fg[i],!0)}const ER={setImmediate(i){const e=CZ++;return fg[e]=!0,SZ.then(()=>SR(e)&&i()),e},clearImmediate(i){SR(i)}};new class DZ extends Ms{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,s=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,n){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw n}}}(class EZ extends rw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=ER.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(ER.clearImmediate(t),e.scheduled=void 0)}});class IZ{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new kZ(e,this.durationSelector))}}class kZ extends yl{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const n=_l(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,n,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function DR(i){return!fl(i)&&i-parseFloat(i)+1>=0}function PZ(i){const{index:e,period:t,subscriber:n}=i;if(n.next(e),!n.closed){if(-1===t)return n.complete();i.index=e+1,this.schedule(i,t)}}function TR(i,e=sw){return function AZ(i){return function(t){return t.lift(new IZ(i))}}(()=>function RZ(i=0,e,t){let n=-1;return DR(e)?n=Number(e)<1?1:Number(e):gl(e)&&(t=e),gl(t)||(t=sw),new cn(r=>{const s=DR(i)?i:+i-t.now();return t.schedule(PZ,s,{index:0,period:n,subscriber:r})})}(i,e))}const FZ=new ue("cdk-dir-doc",{providedIn:"root",factory:function LZ(){return Rs(lt)}}),OZ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Tr=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new Pe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function NZ(i){var e;const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&null!==(e=navigator)&&void 0!==e&&e.language?OZ.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)($(FZ,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Sh=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})(),AR=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new Je,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new cn(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(TR(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):cr()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(Gi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=co(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>fw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)($(tt),$(ui),$(lt,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mw=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new Je,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(TR(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)($(ui),$(tt),$(lt,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Eh=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})(),IR=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Sh,Eh,Sh,Eh]}),i})();class gw{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class ou extends gw{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class _w extends gw{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class HZ extends gw{constructor(e){super(),this.element=e instanceof mt?e.nativeElement:e}}class yw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof ou?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof _w?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof HZ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class zZ extends yw{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||gi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let au=(()=>{class i extends yw{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Pe,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=n.createComponent(s,n.length,t.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(C(Vl),C(Vi),C(lt))},i.\u0275dir=Ee({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[We]}),i})(),nl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})();class GZ{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new jZ(e,this.predicate,this.inclusive))}}class jZ extends En{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}const kR=sX();class WZ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=jn(-this._previousScrollPosition.left),e.style.top=jn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),kR&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),kR&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class $Z{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class RR{enable(){}disable(){}attach(){}}function vw(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function PR(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class qZ{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();vw(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let YZ=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new RR,this.close=o=>new $Z(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new WZ(this._viewportRuler,this._document),this.reposition=o=>new qZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(t){return new(t||i)($(AR),$(mw),$(tt),$(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class mg{constructor(e){if(this.scrollStrategy=new RR,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class XZ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let FR=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)($(lt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ZZ=(()=>{class i extends FR{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)($(lt),$(tt,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),KZ=(()=>{class i extends FR{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ka(s)},this._clickListener=s=>{const o=Ka(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)($(lt),$(ui),$(tt,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gg=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||nw()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),nw()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)($(lt),$(ui))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class lu{constructor(e,t,n,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Je,this._attachments=new Je,this._detachments=new Je,this._locationChanges=gt.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Je,this._outsidePointerEvents=new Je,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(si(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=jn(this._config.width),e.height=jn(this._config.height),e.minWidth=jn(this._config.minWidth),e.minHeight=jn(this._config.minHeight),e.maxWidth=jn(this._config.maxWidth),e.maxHeight=jn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=ug(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(ln(kr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const LR="cdk-overlay-connected-position-bounding-box",QZ=/([A-Za-z%]+)$/;class OR{constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Je,this._resizeSubscription=gt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(LR),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,n,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,n)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&il(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(LR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==n.originX?o:a}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=BR(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,p=a+s.height-n.height,f=this._subtractOverflows(s.width,0-o,o+s.width-n.width),m=this._subtractOverflows(s.height,h,p),y=f*m;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:f==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,o=NR(this._overlayRef.getConfig().minHeight),a=NR(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=BR(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),c=Math.max(s.left-n.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new XZ(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=n.height-e.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const p=Math.min(n.bottom-e.y+n.top,e.y),f=this._lastBoundingBoxSize.height;s=2*p,o=e.y-p,s>f&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-f/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=n.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=n.right-e.x;else{const p=Math.min(n.right-e.x+n.left,e.x),f=this._lastBoundingBoxSize.width;u=2*p,d=e.x-p,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-f/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=jn(n.height),r.top=jn(n.top),r.bottom=jn(n.bottom),r.width=jn(n.width),r.left=jn(n.left),r.right=jn(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=jn(s)),o&&(r.maxWidth=jn(o))}this._lastBoundingBoxSize=n,il(this._boundingBox.style,r)}_resetBoundingBoxStyles(){il(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){il(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();il(n,this._getExactOverlayY(t,e,u)),il(n,this._getExactOverlayX(t,e,u))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=jn(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=jn(o.maxWidth):s&&(n.maxWidth="")),il(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=jn(s.y),r}_getExactOverlayX(e,t,n){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=jn(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:PR(e,n),isOriginOutsideView:vw(e,n),isOverlayClipped:PR(t,n),isOverlayOutsideView:vw(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ug(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof mt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function il(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function NR(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(QZ);return t&&"px"!==t?null:parseFloat(e)}return i||null}function BR(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const VR="cdk-global-overlay-wrapper";class JZ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(VR),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let p="",f="",m="";l?m="flex-start":"center"===u?(m="center",h?f=d:p=d):h?"left"===u||"end"===u?(m="flex-end",p=d):("right"===u||"start"===u)&&(m="flex-start",f=d):"left"===u||"start"===u?(m="flex-start",p=d):("right"===u||"end"===u)&&(m="flex-end",f=d),e.position=this._cssPosition,e.marginLeft=l?"0":p,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":f,t.justifyContent=m,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(VR),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let eK=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new JZ}flexibleConnectedTo(t){return new OR(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)($(mw),$(lt),$(ui),$(gg))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tK=0,dr=(()=>{class i{constructor(t,n,r,s,o,a,l,c,u,d,h,p){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=p}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new mg(t);return o.direction=o.direction||this._directionality.value,new lu(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+tK++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ud)),new zZ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)($(YZ),$(gg),$(Vl),$(eK),$(ZZ),$(gi),$(tt),$(lt),$(Tr),$(Mv),$(KZ),$(tr,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const nK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],HR=new ue("cdk-connected-overlay-scroll-strategy");let zR=(()=>{class i{constructor(t){this.elementRef=t}}return i.\u0275fac=function(t){return new(t||i)(C(mt))},i.\u0275dir=Ee({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),UR=(()=>{class i{constructor(t,n,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=gt.EMPTY,this._attachSubscription=gt.EMPTY,this._detachSubscription=gt.EMPTY,this._positionSubscription=gt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Pe,this.positionChange=new Pe,this.attach=new Pe,this.detach=new Pe,this.overlayKeydown=new Pe,this.overlayOutsideClick=new Pe,this._templatePortal=new _w(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=wt(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=wt(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=wt(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=wt(t)}get push(){return this._push}set push(t){this._push=wt(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=nK);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!Fi(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new mg({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof zR?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function UZ(i,e=!1){return t=>t.lift(new GZ(i,e))}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(C(dr),C(zr),C(Vi),C(HR),C(Tr,8))},i.\u0275dir=Ee({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[yn]}),i})();const rK={provide:HR,deps:[dr],useFactory:function iK(i){return()=>i.scrollStrategies.reposition()}};let cu=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[dr,rK],imports:[Sh,nl,IR,IR]}),i})();function bw(i){return new cn(e=>{let t;try{t=i()}catch(r){return void e.error(r)}return(t?vu(t):rR()).subscribe(e)})}function sK(i,e){}class Dh{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let ww=(()=>{class i extends yw{constructor(t,n,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),n}attachTemplatePortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let n=null;if("string"==typeof t?n=this._document.querySelector(t):"boolean"==typeof t?n=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(n=t),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=yh(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=yh();return t===n||t.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=yh())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Ch),C(lt,8),C(Dh),C(Mh),C(tt),C(lu),C(Dr))},i.\u0275cmp=Ct({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,n){if(1&t&&rn(au,7),2&t){let r;ot(r=at())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,n){2&t&&st("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[We],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&be(0,sK,0,0,"ng-template",0)},dependencies:[au],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class xw{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Je,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!Fi(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const GR=new ue("DialogScrollStrategy"),oK=new ue("DialogData"),aK=new ue("DefaultDialogConfig"),cK={provide:GR,deps:[dr],useFactory:function lK(i){return()=>i.scrollStrategies.block()}};let uK=0,Mw=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._ariaHiddenElements=new Map,this.afterAllClosed=bw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ur(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,n){(n={...this._defaultOptions||new Dh,...n}).id=n.id||"cdk-dialog-"+uK++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new xw(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(t,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Cw(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){Cw(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),Cw(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const n=new mg({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachContainer(t,n,r){var s;const o=r.injector||(null===(s=r.viewContainerRef)||void 0===s?void 0:s.injector),a=[{provide:Dh,useValue:r},{provide:xw,useValue:n},{provide:lu,useValue:t}];let l;r.container?"function"==typeof r.container?l=r.container:(l=r.container.type,a.push(...r.container.providers(r))):l=ww;const c=new ou(l,r.viewContainerRef,gi.create({parent:o||this._injector,providers:a}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,n,r,s){if(t instanceof zr){const o=this._createInjector(s,n,r,void 0);let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new _w(t,null,a,o))}else{const o=this._createInjector(s,n,r,this._injector),a=r.attachComponentPortal(new ou(t,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(t,n,r,s){var o;const a=t.injector||(null===(o=t.viewContainerRef)||void 0===o?void 0:o.injector),l=[{provide:oK,useValue:t.data},{provide:xw,useValue:n}];return t.providers&&("function"==typeof t.providers?l.push(...t.providers(n,t,r)):l.push(...t.providers)),t.direction&&(!a||!a.get(Tr,null,Ke.Optional))&&l.push({provide:Tr,useValue:{value:t.direction,change:cr()}}),gi.create({parent:a||s,providers:l})}_removeOpenDialog(t,n){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(t){return new(t||i)($(dr),$(gi),$(aK,8),$(i,12),$(gg),$(GR))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();function Cw(i,e){let t=i.length;for(;t--;)e(i[t])}let jR=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[Mw,cK],imports:[cu,nl,pw,nl]}),i})();function dK(i,e){if(1&i&&ve(0,"mat-pseudo-checkbox",4),2&i){const t=de();G("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function hK(i,e){if(1&i&&(T(0,"span",5),L(1),A()),2&i){const t=de();O(1),Nt("(",t.group.label,")")}}const pK=["*"];let qR=(()=>{class i{}return i.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",i.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",i.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",i.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",i})(),YR=(()=>{class i{}return i.COMPLEX="375ms",i.ENTERING="225ms",i.EXITING="195ms",i})();const mK=new ue("mat-sanity-checks",{providedIn:"root",factory:function fK(){return!0}});let Lt=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!nw()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)($(MR),$(mK,8),$(lt))},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Sh,Sh]}),i})();function _g(i){return class extends i{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=wt(e)}}}function uu(i,e){return class extends i{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function du(i){return class extends i{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=wt(e)}}}function Sw(i,e=0){return class extends i{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Cs(t):this.defaultTabIndex}}}function XR(i){return class extends i{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}const gK=new ue("MAT_DATE_LOCALE",{providedIn:"root",factory:function _K(){return Rs(os)}});class Jn{constructor(){this._localeChanges=new Je,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}sameDate(e,t){if(e&&t){let n=this.isValid(e),r=this.isValid(t);return n&&r?!this.compareDate(e,t):n==r}return e==t}clampDate(e,t,n){return t&&this.compareDate(e,t)<0?t:n&&this.compareDate(e,n)>0?n:e}}const rl=new ue("mat-date-formats"),yK=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Ew(i,e){const t=Array(i);for(let n=0;n<i;n++)t[n]=e(n);return t}let ZR=(()=>{class i extends Jn{constructor(t,n){super(),this.useUtcForDisplay=!1,super.setLocale(t)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){const n=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return Ew(12,r=>this._format(n,new Date(2017,r,1)))}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Ew(31,n=>this._format(t,new Date(2017,0,n+1)))}getDayOfWeekNames(t){const n=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return Ew(7,r=>this._format(n,new Date(2017,0,r+1)))}getYearName(t){const n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(n,t)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,n,r){let s=this._createDateWithOverflow(t,n,r);return s.getMonth(),s}today(){return new Date}parse(t,n){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,n){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...n,timeZone:"utc"});return this._format(r,t)}addCalendarYears(t,n){return this.addCalendarMonths(t,12*n)}addCalendarMonths(t,n){let r=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+n,this.getDate(t));return this.getMonth(r)!=((this.getMonth(t)+n)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(t,n){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+n)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(yK.test(t)){let n=new Date(t);if(this.isValid(n))return n}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,n,r){const s=new Date;return s.setFullYear(t,n,r),s.setHours(0,0,0,0),s}_2digit(t){return("00"+t).slice(-2)}_format(t,n){const r=new Date;return r.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t.format(r)}}return i.\u0275fac=function(t){return new(t||i)($(gK,8),$(ui))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const vK={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let bK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[{provide:Jn,useClass:ZR}]}),i})(),wK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[{provide:rl,useValue:vK}],imports:[bK]}),i})(),Dw=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),KR=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Lt,Lt]}),i})();class CK{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const QR={enterDuration:225,exitDuration:150},Tw=iu({passive:!0}),JR=["mousedown","touchstart"],e2=["mouseup","mouseleave","touchend","touchcancel"];class EK{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=co(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...QR,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function DK(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),p=d.transitionDuration,f="none"===d.transitionProperty||"0s"===p||"0s, 0s"===p,m=new CK(this,u,n,f);u.style.transform="scale3d(1, 1, 1)",m.state=0,n.persistent||(this._mostRecentTransientRipple=m);let y=null;return!f&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const g=()=>this._finishRippleTransition(m),_=()=>this._destroyRipple(m);u.addEventListener("transitionend",g),u.addEventListener("transitioncancel",_),y={onTransitionEnd:g,onTransitionCancel:_}}),this._activeRipples.set(m,y),(f||!c)&&this._finishRippleTransition(m),m}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...QR,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=co(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(JR))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(e2),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){var t;const n=null!==(t=this._activeRipples.get(e))&&void 0!==t?t:null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=yR(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!vR(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Tw)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(JR.forEach(e=>{this._triggerElement.removeEventListener(e,this,Tw)}),this._pointerUpEventsRegistered&&e2.forEach(e=>{this._triggerElement.removeEventListener(e,this,Tw)}))}}const TK=new ue("mat-ripple-global-options");let sl=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new EK(this,n,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(tt),C(ui),C(TK,8),C(tr,8))},i.\u0275dir=Ee({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&Vt("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Ah=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Lt,Lt]}),i})(),t2=(()=>{class i{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(t){return new(t||i)(C(tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,n){2&t&&Vt("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),i})(),Aw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Lt]}),i})();const n2=new ue("MAT_OPTION_PARENT_COMPONENT"),r2=new ue("MatOptgroup");let AK=0;class IK{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let kK=(()=>{class i{constructor(t,n,r,s){this._element=t,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+AK++,this.onSelectionChange=new Pe,this._stateChanges=new Je}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=wt(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Fi(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new IK(this,t))}}return i.\u0275fac=function(t){Wl()},i.\u0275dir=Ee({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),s2=(()=>{class i extends kK{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(xn),C(n2,8),C(r2,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,n){1&t&&we("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&t&&(Bs("id",n.id),st("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),Vt("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[We],ngContentSelectors:pK,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,n){1&t&&(er(),be(0,dK,1,2,"mat-pseudo-checkbox",0),T(1,"span",1),bn(2),A(),be(3,hK,2,1,"span",2),ve(4,"div",3)),2&t&&(G("ngIf",n.multiple),O(3),G("ngIf",n.group&&n.group._inert),O(1),G("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[sl,wr,t2],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),i})();function o2(i,e,t){if(t.length){let n=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}let a2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Ah,ls,Lt,Aw]}),i})();function PK(i,e){}const FK={bottomSheetState:Us("state",[zi("void, hidden",$t({transform:"translateY(100%)"})),zi("visible",$t({transform:"translateY(0%)"})),bi("visible => void, visible => hidden",Mf([ki(`${YR.COMPLEX} ${qR.ACCELERATION_CURVE}`),bd("@*",vd(),{optional:!0})])),bi("void => visible",Mf([ki(`${YR.EXITING} ${qR.DECELERATION_CURVE}`),bd("@*",vd(),{optional:!0})]))])};let LK=(()=>{class i extends ww{constructor(t,n,r,s,o,a,l,c,u,d){super(t,n,r,s,o,a,l,d),this._changeDetectorRef=u,this._animationState="void",this._animationStateChanged=new Pe,this._breakpointSubscription=c.observe([tl_Medium,tl_Large,"(min-width: 1920px)"]).subscribe(()=>{this._toggleClass("mat-bottom-sheet-container-medium",c.isMatched(tl_Medium)),this._toggleClass("mat-bottom-sheet-container-large",c.isMatched(tl_Large)),this._toggleClass("mat-bottom-sheet-container-xlarge",c.isMatched("(min-width: 1920px)"))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(t){"visible"===t.toState&&this._trapFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_captureInitialFocus(){}_toggleClass(t,n){this._elementRef.nativeElement.classList.toggle(t,n)}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Ch),C(lt,8),C(Dh),C(Mh),C(tt),C(lu),C(cw),C(xn),C(Dr))},i.\u0275cmp=Ct({type:i,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(t,n){1&t&&Ku("@state.start",function(s){return n._onAnimationStart(s)})("@state.done",function(s){return n._onAnimationDone(s)}),2&t&&(st("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-label",n._config.ariaLabel),Ju("@state",n._animationState))},features:[We],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&be(0,PK,0,0,"ng-template",0)},dependencies:[au],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[FK.bottomSheetState]}}),i})(),l2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[jR,Lt,nl,Lt]}),i})();const Iw=new ue("MatBottomSheetData");class OK{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.ariaModal=!0,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}}class yg{constructor(e,t,n){this._ref=e,this._afterOpened=new Je,this.containerInstance=n,this.disableClose=t.disableClose,n._animationStateChanged.pipe(Gi(r=>"done"===r.phaseName&&"visible"===r.toState),si(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Gi(r=>"done"===r.phaseName&&"hidden"===r.toState),si(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),e.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),kr(this.backdropClick(),this.keydownEvents().pipe(Gi(r=>27===r.keyCode))).subscribe(r=>{!this.disableClose&&("keydown"!==r.type||!Fi(r))&&(r.preventDefault(),this.dismiss())})}get instance(){return this._ref.componentInstance}dismiss(e){!this.containerInstance||(this.containerInstance._animationStateChanged.pipe(Gi(t=>"start"===t.phaseName),si(1)).subscribe(t=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},t.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=e,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}}const NK=new ue("mat-bottom-sheet-default-options");let BK=(()=>{class i{constructor(t,n,r,s){this._overlay=t,this._parentBottomSheet=r,this._defaultOptions=s,this._bottomSheetRefAtThisLevel=null,this._dialog=n.get(Mw)}get _openedBottomSheetRef(){const t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}open(t,n){const r={...this._defaultOptions||new OK,...n};let s;return this._dialog.open(t,{...r,disableClose:!0,maxWidth:"100%",container:LK,scrollStrategy:r.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:s}),providers:(o,a,l)=>(s=new yg(o,r,l),[{provide:yg,useValue:s},{provide:Iw,useValue:r.data}])}),s.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===s&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>{var o;return null===(o=s.containerInstance)||void 0===o?void 0:o.enter()}),this._openedBottomSheetRef.dismiss()):s.containerInstance.enter(),this._openedBottomSheetRef=s,s}dismiss(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}}return i.\u0275fac=function(t){return new(t||i)($(dr),$(gi),$(i,12),$(NK,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:l2}),i})();const c2=["mat-button",""],u2=["*"],zK=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],UK=uu(_g(du(class{constructor(i){this._elementRef=i}})));let Ar=(()=>{class i extends UK{constructor(t,n,r){super(t),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of zK)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,n){t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Dr),C(tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,n){if(1&t&&rn(sl,5),2&t){let r;ot(r=at())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,n){2&t&&(st("disabled",n.disabled||null),Vt("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[We],attrs:c2,ngContentSelectors:u2,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,n){1&t&&(er(),T(0,"span",0),bn(1),A(),ve(2,"span",1)(3,"span",2)),2&t&&(O(2),Vt("mat-button-ripple-round",n.isRoundButton||n.isIconButton),G("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[sl],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),GK=(()=>{class i extends Ar{constructor(t,n,r,s){super(n,t,r),this._ngZone=s,this._haltDisabledEvents=o=>{this.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return i.\u0275fac=function(t){return new(t||i)(C(Dr),C(mt),C(tr,8),C(tt,8))},i.\u0275cmp=Ct({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,n){2&t&&(st("tabindex",n.disabled?-1:n.tabIndex)("disabled",n.disabled||null)("aria-disabled",n.disabled.toString()),Vt("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[We],attrs:c2,ngContentSelectors:u2,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,n){1&t&&(er(),T(0,"span",0),bn(1),A(),ve(2,"span",1)(3,"span",2)),2&t&&(O(2),Vt("mat-button-ripple-round",n.isRoundButton||n.isIconButton),G("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[sl],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),kw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Ah,Lt,Lt]}),i})();function WK({error:i,subscriber:e}){e.error(i)}function d2(...i){if(1===i.length){const e=i[0];if(fl(e))return vg(e,null);if(Wg(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return vg(t.map(n=>e[n]),t)}}if("function"==typeof i[i.length-1]){const e=i.pop();return vg(i=1===i.length&&fl(i[0])?i[0]:i,null).pipe(Wn(t=>e(...t)))}return vg(i,null)}function vg(i,e){return new cn(t=>{const n=i.length;if(0===n)return void t.complete();const r=new Array(n);let s=0,o=0;for(let a=0;a<n;a++){const l=vu(i[a]);let c=!1;t.add(l.subscribe({next:u=>{c||(c=!0,o++),r[a]=u},error:u=>t.error(u),complete:()=>{s++,(s===n||!c)&&(o===n&&t.next(e?e.reduce((u,d,h)=>(u[d]=r[h],u),{}):r),t.complete())}}))}})}class qK{constructor(e){this.selector=e}call(e,t){return t.subscribe(new YK(e,this.selector,this.caught))}}class YK extends yl{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const n=new qh(this,void 0,void 0);this.add(n);const r=_l(this,t,void 0,void 0,n);r!==n&&this.add(r)}}}class ZK{constructor(e){this.callback=e}call(e,t){return t.subscribe(new KK(e,this.callback))}}class KK extends En{constructor(e,t){super(e),this.add(new gt(t))}}class JK{}class Ko{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ko?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ko;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ko?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class eQ{encodeKey(e){return h2(e)}encodeValue(e){return h2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const nQ=/%(\d[a-f0-9])/gi,iQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function h2(i){return encodeURIComponent(i).replace(nQ,(e,t)=>{var n;return null!==(n=iQ[t])&&void 0!==n?n:e})}function bg(i){return`${i}`}class Qo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new eQ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tQ(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(bg):[bg(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Qo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(bg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(bg(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rQ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function p2(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function f2(i){return typeof Blob<"u"&&i instanceof Blob}function m2(i){return typeof FormData<"u"&&i instanceof FormData}class Ih{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function sQ(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ko),this.context||(this.context=new rQ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Qo,this.urlWithParams=t}serializeBody(){return null===this.body?null:p2(this.body)||f2(this.body)||m2(this.body)||function oQ(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m2(this.body)?null:f2(this.body)?this.body.type||null:p2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),u)),new Ih(n,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var di=(()=>((di=di||{})[di.Sent=0]="Sent",di[di.UploadProgress=1]="UploadProgress",di[di.ResponseHeader=2]="ResponseHeader",di[di.DownloadProgress=3]="DownloadProgress",di[di.Response=4]="Response",di[di.User=5]="User",di))();class Rw extends class aQ{constructor(e,t=200,n="OK"){this.headers=e.headers||new Ko,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=di.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Rw({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Pw(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let _2=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof Ih)s=t;else{let l,c;l=r.headers instanceof Ko?r.headers:new Ko(r.headers),r.params&&(c=r.params instanceof Qo?r.params:new Qo({fromObject:r.params})),s=new Ih(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=cr(s).pipe(function QK(i,e){return qg(i,e,1)}(l=>this.handler.handle(l)));if(t instanceof Ih||"events"===r.observe)return o;const a=o.pipe(Gi(l=>l instanceof Rw));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Wn(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Wn(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Wn(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Wn(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Qo).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,Pw(r,n))}post(t,n,r={}){return this.request("POST",t,Pw(r,n))}put(t,n,r={}){return this.request("PUT",t,Pw(r,n))}}return i.\u0275fac=function(t){return new(t||i)($(JK))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const cQ=["*"];let wg;function kh(i){var e;return(null===(e=function uQ(){if(void 0===wg&&(wg=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(wg=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return wg}())||void 0===e?void 0:e.createHTML(i))||i}function y2(i){return Error(`Unable to find icon with the name "${i}"`)}function v2(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function b2(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class ol{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let xg=(()=>{class i{constructor(t,n,r,s){this._httpClient=t,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,s){return this._addSvgIconConfig(t,n,new ol(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,s){const o=this._sanitizer.sanitize(Ut.HTML,r);if(!o)throw b2(r);const a=kh(o);return this._addSvgIconConfig(t,n,new ol("",a,s))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new ol(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const s=this._sanitizer.sanitize(Ut.HTML,n);if(!s)throw b2(n);const o=kh(s);return this._addSvgIconSetConfig(t,new ol("",o,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(Ut.RESOURCE_URL,t);if(!n)throw v2(t);const r=this._cachedIconsByUrl.get(n);return r?cr(Mg(r)):this._loadSvgIconFromConfig(new ol(t,null)).pipe(cg(s=>this._cachedIconsByUrl.set(n,s)),Wn(s=>Mg(s)))}getNamedSvgIcon(t,n=""){const r=w2(n,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):function jK(i,e){return new cn(e?t=>e.schedule(WK,0,{error:i,subscriber:t}):t=>t.error(i))}(y2(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?cr(Mg(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Wn(n=>Mg(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);if(r)return cr(r);const s=n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(function $K(i){return function(t){const n=new qK(i),r=t.lift(n);return n.caught=r}}(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Ut.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),cr(null)})));return d2(s).pipe(Wn(()=>{const o=this._extractIconWithNameFromAnySet(t,n);if(!o)throw y2(t);return o}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(cg(n=>t.svgText=n),Wn(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?cr(null):this._fetchIcon(t).pipe(cg(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const s=t.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(kh("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString(kh("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){var n;const{url:r,options:s}=t,o=null!==(n=s?.withCredentials)&&void 0!==n&&n;if(!this._httpClient)throw function dQ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Ut.RESOURCE_URL,r);if(!a)throw v2(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Wn(u=>kh(u)),function XK(i){return e=>e.lift(new ZK(i))}(()=>this._inProgressUrlFetches.delete(a)),kx());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(w2(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,t);if(s)return pQ(s)?new ol(s.url,null,s.options):new ol(s,null)}}}return i.\u0275fac=function(t){return new(t||i)($(_2,8),$(jv),$(lt,8),$(Fs))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Mg(i){return i.cloneNode(!0)}function w2(i,e){return i+":"+e}function pQ(i){return!(!i.url||!i.options)}const fQ=uu(class{constructor(i){this._elementRef=i}}),mQ=new ue("MAT_ICON_DEFAULT_OPTIONS"),gQ=new ue("mat-icon-location",{providedIn:"root",factory:function _Q(){const i=Rs(lt),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),x2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],yQ=x2.map(i=>`[${i}]`).join(", "),vQ=/^url\(['"]?#(.*?)['"]?\)$/;let Jo=(()=>{class i extends fQ{constructor(t,n,r,s,o,a){super(t),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=gt.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=wt(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),n.forEach(r=>t.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(yQ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)x2.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(vQ):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(si(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(xg),Is("aria-hidden"),C(gQ),C(Fs),C(mQ,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,n){2&t&&(st("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),Vt("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[We],ngContentSelectors:cQ,decls:1,vars:0,template:function(t,n){1&t&&(er(),bn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),bQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Lt,Lt]}),i})();const wQ=["tooltip"],M2="tooltip-panel",C2=iu({passive:!0}),S2=new ue("mat-tooltip-scroll-strategy"),SQ={provide:S2,deps:[dr],useFactory:function CQ(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},EQ=new ue("mat-tooltip-default-options",{providedIn:"root",factory:function DQ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let TQ=(()=>{class i{constructor(t,n,r,s,o,a,l,c,u,d,h,p){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=d,this._defaultOptions=h,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Je,this._scrollStrategy=u,this._document=p,h&&(h.position&&(this.position=h.position),h.touchGestures&&(this.touchGestures=h.touchGestures)),d.change.pipe(ln(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){var n;t!==this._position&&(this._position=t,this._overlayRef)&&(this._updatePosition(this._overlayRef),null===(n=this._tooltipInstance)||void 0===n||n.show(0),this._overlayRef.updatePosition())}get disabled(){return this._disabled}set disabled(t){this._disabled=wt(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Cs(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Cs(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(ln(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,C2)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){var n;if(this.disabled||!this.message||this._isTooltipVisible())return void(null===(n=this._tooltipInstance)||void 0===n||n._cancelPendingAnimations());const r=this._createOverlay();this._detach(),this._portal=this._portal||new ou(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(ln(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(t):(n._cancelPendingAnimations(),this._detach()))}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){var t;if(this._overlayRef)return this._overlayRef;const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(ln(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${M2}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(ln(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(ln(this._destroyed)).subscribe(()=>{var s;return null===(s=this._tooltipInstance)||void 0===s?void 0:s._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe(ln(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!Fi(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),null!==(t=this._defaultOptions)&&void 0!==t&&t.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(si(1),ln(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:r,originY:s}=t;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${M2}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{var r;const s=n.relatedTarget;(!s||null===(r=this._overlayRef)||void 0===r||!r.overlayElement.contains(s))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,C2)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,r=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(t){Wl()},i.\u0275dir=Ee({type:i,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Fw=(()=>{class i extends TQ{constructor(t,n,r,s,o,a,l,c,u,d,h,p){super(t,n,r,s,o,a,l,c,u,d,h,p),this._tooltipComponent=IQ}}return i.\u0275fac=function(t){return new(t||i)(C(dr),C(mt),C(AR),C(Vi),C(tt),C(ui),C(YX),C(Dr),C(S2),C(Tr,8),C(EQ,8),C(lt))},i.\u0275dir=Ee({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[We]}),i})(),AQ=(()=>{class i{constructor(t,n){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Je,this._animationsDisabled="NoopAnimations"===n}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return i.\u0275fac=function(t){return new(t||i)(C(xn),C(tr,8))},i.\u0275dir=Ee({type:i}),i})(),IQ=(()=>{class i extends AQ{constructor(t,n,r){super(t,r),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return i.\u0275fac=function(t){return new(t||i)(C(xn),C(cw),C(tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(t,n){if(1&t&&rn(wQ,7),2&t){let r;ot(r=at())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,n){1&t&&we("mouseleave",function(s){return n._handleMouseLeave(s)}),2&t&&ma("zoom",n.isVisible()?1:null)},features:[We],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,n){if(1&t&&(T(0,"div",0,1),we("animationend",function(s){return n._handleAnimationEnd(s)}),Fn(2,"async"),L(3),A()),2&t){let r;Vt("mat-tooltip-handset",null==(r=od(2,4,n._isHandset))?null:r.matches),G("ngClass",n.tooltipClass),O(3),en(n.message)}},dependencies:[fd,B1],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),i})(),kQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[SQ],imports:[pw,ls,cu,Lt,Lt,Eh]}),i})();function RQ(i,e){if(1&i&&(T(0,"small",1),L(1),ve(2,"i",2),A()),2&i){const t=de();G("matTooltip",t.earthTimes+" times greater than the Earth"),O(1),Nt(" ",t.earthTimes," ")}}function PQ(i,e){if(1&i&&(T(0,"small",1),L(1),ve(2,"i",3),A()),2&i){const t=de();G("matTooltip",t.jupiterTimes+" times greater than Jupiter"),O(1),Nt(" ",t.jupiterTimes," ")}}function FQ(i,e){if(1&i&&(T(0,"small",1),L(1),ve(2,"i",4),A()),2&i){const t=de();G("matTooltip",t.sunTimes+" times greater than the Sun"),O(1),Nt(" ",t.sunTimes," ")}}let LQ=(()=>{class i{constructor(){this.decimalPipe=new gf("en-EN")}ngOnInit(){const t=fh.get("solar-system").find(l=>"earth"===l.name),n=fh.get("solar-system").find(l=>"jupiter"===l.name),r=fh.get("solar-system").find(l=>"sun"===l.name),s=Ed(t,this.reference),o=Ed(n,this.reference),a=Ed(r,this.reference);this.earthTimes=this.decimalPipe.transform(this.value/s,"1.0-3"),("0"===this.earthTimes||"\u221e"===this.earthTimes)&&(this.earthTimes=null),this.jupiterTimes=this.decimalPipe.transform(this.value/o,"1.0-3"),("0"===this.jupiterTimes||"\u221e"===this.jupiterTimes)&&(this.jupiterTimes=null),this.sunTimes=this.decimalPipe.transform(this.value/a,"1.0-3"),("0"===this.sunTimes||this.sunTimes.includes("\u221e"))&&(this.sunTimes=null)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-compare"]],inputs:{value:"value",reference:"reference"},decls:3,vars:3,consts:[[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"icon-earth"],[1,"icon-jupiter"],[1,"icon-sun"]],template:function(t,n){1&t&&(be(0,RQ,3,2,"small",0),be(1,PQ,3,2,"small",0),be(2,FQ,3,2,"small",0)),2&t&&(G("ngIf",n.earthTimes),O(1),G("ngIf",n.jupiterTimes),O(1),G("ngIf",n.sunTimes))},dependencies:[wr,Fw],styles:["[_nghost-%COMP%]{display:block}small[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0}),i})(),OQ=(()=>{class i{transform(t){let n="hours",r=Math.abs(t/3600);return r>36&&(r/=24,n="Earth days"),r>365&&(r/=365,n="Earth years"),r=Co(r,1),`${r} ${n}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=hi({name:"period",type:i,pure:!0}),i})(),NQ=(()=>{class i{transform(t){let r,s,n=15;const o=t.toString().split(".");return t<1?(s=o[1].length-1,r=t*Math.pow(10,s),n-=s):(s=o[0].length-1,r=t/Math.pow(10,s),n+=s),r=Co(r,1),`${r} x 10^${n} Kg`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=hi({name:"mass",type:i,pure:!0}),i})();function BQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",15),L(3," Rotation Speed"),A(),T(4,"span",9),L(5),Fn(6,"number"),ve(7,"app-compare",13),A()()),2&i){const t=de();O(5),Nt(" ",yi(6,2,t.asterData.physic.rotationSpeed,"1.0-1")," m/s "),O(2),G("value",t.asterData.physic.rotationSpeed)}}function VQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",16),L(3," Sidereal Day"),A(),T(4,"span",9),L(5),Fn(6,"period"),A()()),2&i){const t=de();O(5),en(od(6,1,t.asterData.physic.rotationPeriod))}}function HQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",17),L(3," Axial Tilt"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de();O(5),Nt("",t.asterData.physic.axialTilt,"\xb0")}}function zQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",18),L(3," Core Temp."),A(),T(4,"span",9),L(5),Fn(6,"number"),A()()),2&i){const t=de();O(5),Nt("",yi(6,1,t.asterData.physic.coreTemperature,"1.0-0")," \xb0C")}}function UQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",19),L(3," Moons"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de();O(5),en(t.asterData.moons)}}function GQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",20),L(3," Year"),A(),T(4,"span",9),L(5),Fn(6,"period"),A()()),2&i){const t=de(2);O(5),en(od(6,1,t.asterData.orbit.period))}}function jQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",21),L(3," Orbital Speed"),A(),T(4,"span",9),L(5),Fn(6,"number"),ve(7,"app-compare",22),A()()),2&i){const t=de(2);O(5),Nt(" ",yi(6,2,t.asterData.orbit.speed,"1.0-3")," Km/s "),O(2),G("value",t.asterData.orbit.speed)}}function WQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",23),L(3," SemiMajor Axis"),A(),T(4,"span",9),L(5),Fn(6,"number"),ve(7,"app-compare",24),A()()),2&i){const t=de(2);O(5),Nt(" ",yi(6,2,t.asterData.orbit.a,"1.0-1")," Km "),O(2),G("value",t.asterData.orbit.a)}}function $Q(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",25),L(3," Eccentricity"),A(),T(4,"span",9),L(5),Fn(6,"number"),A()()),2&i){const t=de(2);O(5),en(yi(6,1,t.asterData.orbit.e,"1.0-3"))}}function qQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",26),L(3," Inclination"),A(),T(4,"span",9),L(5),Fn(6,"number"),A()()),2&i){const t=de(2);O(5),Nt("",yi(6,1,t.asterData.orbit.i,"1.0-3"),"\xb0")}}function YQ(i,e){if(1&i&&(T(0,"section")(1,"h4"),L(2,"Orbital data"),A(),be(3,GQ,7,3,"p",14),be(4,jQ,8,5,"p",14),be(5,WQ,8,5,"p",14),be(6,$Q,7,4,"p",14),be(7,qQ,7,4,"p",14),A()),2&i){const t=de();O(3),G("ngIf",t.asterData.orbit.period),O(1),G("ngIf",t.asterData.orbit.speed),O(1),G("ngIf",t.asterData.orbit.a),O(1),G("ngIf",t.asterData.orbit.e),O(1),G("ngIf",t.asterData.orbit.i)}}function XQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",27),L(3," Type"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de(2);O(5),en(t.asterData.surface.type)}}function ZQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",28),L(3," Gravity"),A(),T(4,"span",9),L(5),Fn(6,"number"),ve(7,"app-compare",29),A()()),2&i){const t=de(2);O(5),Nt(" ",yi(6,2,t.asterData.surface.gravity,"1.0-3")," m/s^2 "),O(2),G("value",t.asterData.surface.gravity)}}function KQ(i,e){if(1&i&&(T(0,"span"),L(1),Fn(2,"number"),A()),2&i){const t=de(3);O(1),Nt(" | ",yi(2,1,t.asterData.surface.maxTemperature,"1.0-0")," \xb0C ")}}function QQ(i,e){1&i&&(T(0,"small"),L(1,"(1 bar lev.)"),A())}function JQ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",18),L(3," Temperature"),A(),T(4,"span",9),L(5),Fn(6,"number"),be(7,KQ,3,4,"span",14),be(8,QQ,2,0,"small",14),A()()),2&i){const t=de(2);O(5),Nt(" ",yi(6,3,t.asterData.surface.minTemperature,"1.0-0")," \xb0C "),O(2),G("ngIf",t.asterData.surface.maxTemperature),O(1),G("ngIf","compressed gas"===t.asterData.surface.type)}}function eJ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",30),L(3," Surface Pres."),A(),T(4,"span",9),L(5),Fn(6,"number"),A()()),2&i){const t=de(2);O(5),Nt(" ",yi(6,1,t.asterData.surface.pressure,"1.0-3")," bar ")}}function tJ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",31),L(3," Winds (max)"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de(2);O(5),Nt("",t.asterData.surface.winds," Km/h")}}function nJ(i,e){if(1&i&&(T(0,"section")(1,"h4"),L(2,"Surface data"),A(),be(3,XQ,6,1,"p",14),be(4,ZQ,8,5,"p",14),be(5,JQ,9,6,"p",14),be(6,eJ,7,4,"p",14),be(7,tJ,6,1,"p",14),A()),2&i){const t=de();O(3),G("ngIf",t.asterData.surface.type),O(1),G("ngIf",t.asterData.surface.gravity),O(1),G("ngIf",t.asterData.surface.minTemperature),O(1),G("ngIf",t.asterData.surface.pressure),O(1),G("ngIf",t.asterData.surface.winds)}}function iJ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",32),L(3," Constellation "),A(),T(4,"span",9),L(5),A()()),2&i){const t=de(2);O(5),en(t.asterData.observation.constellation)}}function rJ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",33),L(3," Right Ascension"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de(2);O(5),en(t.asterData.observation.rightAscension)}}function sJ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",34),L(3," Declination"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de(2);O(5),en(t.asterData.observation.declination)}}function oJ(i,e){if(1&i&&(T(0,"p")(1,"span",7),ve(2,"i",35),L(3," App. Magnitude"),A(),T(4,"span",9),L(5),A()()),2&i){const t=de(2);O(5),en(t.asterData.observation.apparentMagnitude)}}function aJ(i,e){if(1&i&&(T(0,"section")(1,"h4"),L(2,"Observation data"),A(),be(3,iJ,6,1,"p",14),be(4,rJ,6,1,"p",14),be(5,sJ,6,1,"p",14),be(6,oJ,6,1,"p",14),A()),2&i){const t=de();O(3),G("ngIf",t.asterData.observation.constellation),O(1),G("ngIf",t.asterData.observation.rightAscension),O(1),G("ngIf",t.asterData.observation.declination),O(1),G("ngIf",t.asterData.observation.apparentMagnitude)}}let lJ=(()=>{class i{constructor(t,n){this.engine=t,this.bottomSheetRef=n}ngOnInit(){this.asterData=this.engine.state.aster.data}close(){this.bottomSheetRef.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(C(Iw),C(yg))},i.\u0275cmp=Ct({type:i,selectors:[["app-datasheet"]],decls:50,vars:20,consts:[[1,"title"],["mat-raised-button","","color","primary","target","_blank",3,"href"],[1,"text"],["mat-raised-button","","color","warn",3,"click"],[1,"scrollable"],[1,"info"],[1,"grid"],[1,"label"],[1,"icon-star-empty"],[1,"value"],[1,"icon-globe-1"],["reference","physic.radius",3,"value"],[1,"icon-balance-scale"],["reference","physic.mass",3,"value"],[4,"ngIf"],[1,"icon-gauge"],[1,"icon-clock"],[1,"icon-compass"],[1,"icon-temperatire"],[1,"icon-globe-outline"],[1,"icon-calendar"],[1,"icon-circle-notch"],["reference","orbit.speed",3,"value"],[1,"icon-resize-horizontal"],["reference","orbit.a",3,"value"],[1,"icon-dot-circled"],[1,"icon-resize-full-circle"],[1,"icon-picture"],[1,"icon-grav"],["reference","surface.gravity",3,"value"],[1,"icon-down"],[1,"icon-cloud-wind"],[1,"icon-star-circled"],[1,"icon-loop-alt"],[1,"icon-ccw"],[1,"icon-sun-inv"]],template:function(t,n){1&t&&(T(0,"div",0)(1,"a",1)(2,"span",2),L(3,"Wikipedia"),A(),T(4,"mat-icon"),L(5,"bookmark_border"),A()(),T(6,"span"),L(7),A(),T(8,"button",3),we("click",function(){return n.close()}),T(9,"span",2),L(10,"Close panel"),A(),T(11,"mat-icon"),L(12,"close"),A()()(),T(13,"div",4)(14,"div",5),L(15,"All values are mean and approximated"),A(),T(16,"div",6)(17,"section")(18,"h4"),L(19,"Physical data"),A(),T(20,"p")(21,"span",7),ve(22,"i",8),L(23," Type"),A(),T(24,"span",9),L(25),A()(),T(26,"p")(27,"span",7),ve(28,"i",10),L(29," Diameter"),A(),T(30,"span",9),L(31),Fn(32,"number"),ve(33,"app-compare",11),A()(),T(34,"p")(35,"span",7),ve(36,"i",12),L(37," Mass"),A(),T(38,"span",9),L(39),Fn(40,"mass"),ve(41,"app-compare",13),A()(),be(42,BQ,8,5,"p",14),be(43,VQ,7,3,"p",14),be(44,HQ,6,1,"p",14),be(45,zQ,7,4,"p",14),be(46,UQ,6,1,"p",14),A(),be(47,YQ,8,5,"section",14),be(48,nJ,8,5,"section",14),be(49,aJ,7,4,"section",14),A()()),2&t&&(O(1),G("href",n.asterData.wiki,Ol),O(6),en(n.asterData.name),O(18),en(n.asterData.type),O(6),Nt(" ",yi(32,15,2*n.asterData.physic.radius,"1.0-1")," Km "),O(2),G("value",n.asterData.physic.radius),O(6),Nt(" ",od(40,18,n.asterData.physic.mass)," "),O(2),G("value",n.asterData.physic.mass),O(1),G("ngIf",n.asterData.physic.rotationSpeed&&("solar-system"===n.asterData.group||"star"===n.asterData.type)),O(1),G("ngIf",n.asterData.physic.rotationPeriod&&("solar-system"===n.asterData.group||"star"===n.asterData.type)),O(1),G("ngIf",null!==n.asterData.physic.axialTilt),O(1),G("ngIf",n.asterData.physic.coreTemperature),O(1),G("ngIf",n.asterData.moons),O(1),G("ngIf",n.asterData.orbit.period),O(1),G("ngIf",n.asterData.surface.type),O(1),G("ngIf",n.asterData.observation))},dependencies:[wr,Ar,GK,Jo,LQ,gf,OQ,NQ],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.title[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:20px;justify-content:space-between;margin-bottom:10px;margin-top:5px;min-height:50px;text-transform:capitalize}.title[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{width:23%}h4[_ngcontent-%COMP%]{color:#ccc;margin-bottom:15px;margin-top:0}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;font-feature-settings:"smcp";font-variant:small-caps;font-family:Roboto}.label[_ngcontent-%COMP%]{width:40%;display:inline-block;vertical-align:top;font-size:14px;opacity:.7}.label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px;margin-right:2px;vertical-align:middle}.value[_ngcontent-%COMP%]{width:60%;display:inline-block;vertical-align:top;font-size:16px}small[_ngcontent-%COMP%]{font-size:80%;text-transform:uppercase;white-space:nowrap}.info[_ngcontent-%COMP%]{font-size:13px;font-feature-settings:normal;font-variant:normal;margin-bottom:15px}.scrollable[_ngcontent-%COMP%]{flex-grow:1;overflow:auto;padding-right:15px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-gap:25px;padding:10px 0}@media all and (min-width: 750px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media all and (max-width: 450px){.title[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:none}.label[_ngcontent-%COMP%], .value[_ngcontent-%COMP%]{width:100%;margin-bottom:5px}}'],changeDetection:0}),i})();function cJ(i,e){}const hu={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},uJ={dialogContainer:Us("dialogContainer",[zi("void, exit",$t({opacity:0,transform:"scale(0.7)"})),zi("enter",$t({transform:"none"})),bi("* => enter",Mf([ki("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",$t({transform:"none",opacity:1})),bd("@*",vd(),{optional:!0})]),hu),bi("* => void, * => exit",Mf([ki("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",$t({opacity:0})),bd("@*",vd(),{optional:!0})]),hu)])};class Cg{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=hu.params.enterAnimationDuration,this.exitAnimationDuration=hu.params.exitAnimationDuration}}let dJ=(()=>{class i extends ww{constructor(t,n,r,s,o,a,l,c){super(t,n,r,s,o,a,l,c),this._animationStateChanged=new Pe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Ch),C(lt,8),C(Cg),C(Mh),C(tt),C(lu),C(Dr))},i.\u0275cmp=Ct({type:i,selectors:[["ng-component"]],features:[We],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),hJ=(()=>{class i extends dJ{constructor(t,n,r,s,o,a,l,c,u){super(t,n,r,s,o,a,l,u),this._changeDetectorRef=c,this._state="enter"}_onAnimationDone({toState:t,totalTime:n}){"enter"===t?this._openAnimationDone(n):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:n})}_onAnimationStart({toState:t,totalTime:n}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||hu.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||hu.params.exitAnimationDuration}}}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Ch),C(lt,8),C(Cg),C(Mh),C(tt),C(lu),C(xn),C(Dr))},i.\u0275cmp=Ct({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,n){1&t&&Ku("@dialogContainer.start",function(s){return n._onAnimationStart(s)})("@dialogContainer.done",function(s){return n._onAnimationDone(s)}),2&t&&(Bs("id",n._config.id),st("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Ju("@dialogContainer",n._getAnimationState()))},features:[We],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&be(0,cJ,0,0,"ng-template",0)},dependencies:[au],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[uJ.dialogContainer]}}),i})();class Sg{constructor(e,t,n){this._ref=e,this._containerInstance=n,this._afterOpened=new Je,this._beforeClosed=new Je,this._state=0,this.disableClose=t.disableClose,this.id=e.id,n._animationStateChanged.pipe(Gi(r=>"opened"===r.state),si(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Gi(r=>"closed"===r.state),si(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),kr(this.backdropClick(),this.keydownEvents().pipe(Gi(r=>27===r.keyCode&&!this.disableClose&&!Fi(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),E2(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Gi(t=>"closing"===t.state),si(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function E2(i,e,t){return i._closeInteractionType=e,i.close(t)}const D2=new ue("MatDialogData"),pJ=new ue("mat-dialog-default-options"),T2=new ue("mat-dialog-scroll-strategy"),mJ={provide:T2,deps:[dr],useFactory:function fJ(i){return()=>i.scrollStrategies.block()}};let gJ=0,_J=(()=>{class i{constructor(t,n,r,s,o,a,l,c,u,d){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._idPrefix="mat-dialog-",this.afterAllClosed=bw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ur(void 0))),this._scrollStrategy=a,this._dialog=n.get(Mw)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,n){let r;(n={...this._defaultOptions||new Cg,...n}).id=n.id||`${this._idPrefix}${gJ++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Cg,useValue:n},{provide:Dh,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>{var c;return r=new this._dialogRefConstructor(o,n,l),r.updatePosition(null===(c=n)||void 0===c?void 0:c.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}]}});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let n=t.length;for(;n--;)t[n].close()}}return i.\u0275fac=function(t){Wl()},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),pu=(()=>{class i extends _J{constructor(t,n,r,s,o,a,l,c){super(t,n,s,a,l,o,Sg,hJ,D2,c)}}return i.\u0275fac=function(t){return new(t||i)($(dr),$(gi),$(Mv,8),$(pJ,8),$(T2),$(i,12),$(gg),$(tr,8))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),yJ=0,Lw=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=A2(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const n=t._matDialogClose||t._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(t){E2(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(t){return new(t||i)(C(Sg,8),C(mt),C(pu))},i.\u0275dir=Ee({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,n){1&t&&we("click",function(s){return n._onButtonClick(s)}),2&t&&st("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[yn]}),i})(),Ow=(()=>{class i{constructor(t,n,r){this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-"+yJ++}ngOnInit(){this._dialogRef||(this._dialogRef=A2(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(t){return new(t||i)(C(Sg,8),C(mt),C(pu))},i.\u0275dir=Ee({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,n){2&t&&Bs("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})();function A2(i,e){let t=i.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(n=>n.id===t.id):null}let vJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[pu,mJ],imports:[jR,cu,nl,Lt,Lt]}),i})(),bJ=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-help"]],decls:110,vars:0,consts:[["mat-dialog-title",""],["type","button","mat-icon-button","","mat-dialog-close","","tabindex","-1"],[1,"content"],["href","https://ssd.jpl.nasa.gov/?planet_pos","target","_blank"],["href","mailto:areaweb80@gmail.com"],["href","https://nasa3d.arc.nasa.gov","target","_blank"],["href","https://sbn.psi.edu/pds/","target","_blank"],["href","http://www.celestiamotherlode.net","target","_blank"]],template:function(t,n){1&t&&(T(0,"h2",0),L(1," What I'm seeing? "),T(2,"button",1)(3,"mat-icon"),L(4,"close"),A()()(),T(5,"div",2)(6,"section")(7,"p"),L(8," Welcome to "),T(9,"b"),L(10,"Collapsar!"),A(),ve(11,"br"),L(12," With this project you can examine many "),T(13,"b"),L(14,"planetary systems"),A(),L(15,", including the Solar system. "),A(),T(16,"p"),L(17,"For each aster you can view:"),A(),T(18,"ul")(19,"li"),L(20,"the "),T(21,"b"),L(22,"real size"),A()(),T(23,"li"),L(24,"the "),T(25,"b"),L(26,"real distance"),A(),L(27," from its orbital center"),A(),T(28,"li"),L(29,"the "),T(30,"b"),L(31,"revolution path"),A(),L(32," around its orbital center"),A(),T(33,"li"),L(34,"the "),T(35,"b"),L(36,"rotation speed"),A(),L(37," on own axis (sidereal day)"),A(),T(38,"li"),L(39,"the "),T(40,"b"),L(41,"surface details"),A(),L(42," at a short distance"),A()(),T(43,"p"),L(44," Futhermore, increasing the scale of the asters you can compare their size in the system. "),A()(),T(45,"section")(46,"h3"),L(47,"Orbits"),A(),T(48,"p"),L(49," As for the solar system, the orbit of the planets (including Pluto) is "),T(50,"b"),L(51,"realistic"),A(),L(52," and based on the computation of Keplerian elements with the approximation errors showed at the following link: "),T(53,"a",3),L(54,"approximation table"),A(),L(55,"."),ve(56,"br"),L(57," The ephemeris are provied by NASA JPL website and they are valid in the range years "),T(58,"b"),L(59,"1800-2050"),A(),L(60,". The orbit of the dwarf planets and moons are "),T(61,"b"),L(62,"not reliable"),A(),L(63,", based only on the mean motion computation (mean anomaly provided by NASA). "),A()(),T(64,"section")(65,"h3"),L(66,"Surfaces"),A(),T(67,"p"),L(68," The surface of the solar system asters can be completely or partially "),T(69,"b"),L(70,"fictional"),A(),L(71," due to the currently unavailable data collected by space agencies. All the other systems have fictional textures obviously. "),A()(),T(72,"section")(73,"h3"),L(74,"Rotations"),A(),T(75,"p"),L(76," The rotation speed of the exoplanets is "),T(77,"b"),L(78,"fictional"),A(),L(79,", useful only for the rotation animation. "),A()(),T(80,"section")(81,"h3"),L(82,"Help me to improve the universe"),A(),T(83,"p"),L(84," If you find a scientific mistake, please "),T(85,"b"),L(86,"report"),A(),L(87," to my email address "),T(88,"a",4),L(89,"areaweb80@gmail.com"),A(),L(90,". Any contribution to the improvement of this project is appreciated. "),A()(),T(91,"section")(92,"h3"),L(93,"Credits and disclaimer"),A(),T(94,"p"),L(95,"Textures and 3D models are provided by:"),A(),T(96,"ul")(97,"li")(98,"a",5),L(99,"NASA 3D Resources"),A()(),T(100,"li")(101,"a",6),L(102,"NASA Planetary Data System"),A()(),T(103,"li")(104,"a",7),L(105,"Celestia Motherlode and relative authors"),A()()(),T(106,"p"),L(107," The author of this project is not responsible for the accuracy of the displayed informations. "),A()(),T(108,"section"),L(109," \xa9 2017-2021 Luca"),A()())},dependencies:[Ar,Lw,Ow,Jo],styles:[".content[_ngcontent-%COMP%]{height:80vh;max-height:400px;overflow:auto}h3[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:15px}a[_ngcontent-%COMP%]{color:#ddd}"],changeDetection:0}),i})();const wJ=[{name:"Algol System's tour",steps:[{message:"\n          <b>Algol</b> is a triple star system located in the constellation of <b>Perseus</b>.\n          The core of the system is formed by a <b>binary star</b> with a semi major axis of 9 million km.\n        ",action:i=>{i.control.moveToAster("algol-a1",new M(-1,0,0),110),i.state.date=new Date("2024-10-05"),i.state.anchorMassCenter=!0,i.state.speed=5e4}},{message:"\n          The third star, Algol-B, orbits the center of mass at <b>2.7 AU</b> in <b>680 earth days</b> (1.9 earth years).\n        ",action:i=>{i.control.moveToAster("algol-b",new M(-1,0,1),1e3),i.state.date=new Date("2024-11-01"),i.state.rotation=!1,i.state.speed=1e6}},{message:"\n          Algol-A is an <b>eclipsing binary</b> where the main A1 is regularly eclipsed by the less bright A2.\n          The magnitude changes from 2.12 to 3.39 every <b>3 earth days</b> for a period of <b>10 hours</b>.\n          The short distance between A1 and A2 triggers a <b>mass transfer</b>.\n        ",action:i=>{i.control.moveToAster("algol-a1",new M(-.1,-.7,-.1),20),i.state.date=new Date("2020-01-01"),i.state.rotation=!0,i.state.showMassCenter=!0,i.state.speed=5e4}}]}],xJ=[{name:"Errai System's tour",steps:[{message:"\n          <b>Errai</b> is a double star system located in the constellation of <b>Cepheus</b>.\n          The main star, <b>Errai-A</b>, is an <b>orange subgiant</b> while <b>Errai-B</b> is a <b>red dwarf</b> that orbits Errai-A at about <b>20 AU</b> in a period of <b>67 years</b>.\n          Errai system will become the new <b>Pole Star</b> in the year <b>3000</b>.\n        ",action:i=>{i.control.moveToAster("errai-a",new M(-1,0,1),300),i.state.speed=1e6,i.state.date=new Date("2024-11-01")}},{message:"\n          An exoplanet, <b>Tadmor</b>, has been confirmed to orbit around Errai-A at a distance of <b>2 AU</b> in a period of <b>2.5 years</b>.\n        ",action:i=>{i.control.moveToAster("errai-a",new M(-.4,-1,.5),500),i.state.speed=5e6,i.state.date=new Date("2028-01-01")}},{message:"\n          It is a <b>gas planet</b> similar in size to Jupiter but with a <b>mass double</b> compared to it.\n          This world receives the light of <b>2 suns</b>.\n        ",photo:"assets/photos/tadmor-sky.jpg",action:i=>{i.control.moveToAster("tadmor",new M(-1,0,0),6),i.state.speed=2e6,i.state.date=new Date("2025-07-01")}}]}],MJ=[{name:"Fomalhaut System's tour",steps:[{message:"\n          <b>Fomalhaut</b> is the brightest star in the <b>Piscis Austrinus</b>.\n          It is a <b>white star</b> similar to Sirius and Vega.\n          The best time for its observation in the northern hemisphere is between <b>August</b> and <b>December</b>.\n        ",action:i=>{i.control.moveToAster("fomalhaut"),i.state.speed=1e3}},{message:"\n          The best-known Fomalhaut's feature is an <b>extensive circumstellar disk</b> of gas and dust.\n          The disk extends up to <b>209 AU</b>.\n        ",photo:"assets/photos/fomalhaut-disk.jpg",action:i=>{i.control.moveToAster("fomalhaut",new M(0,-.3,1),37e3)}},{message:"\n          In recent years, the presence of an <b>exoplanet</b> has been debated several times. Its name is <b>Dagon</b>.\n          The planet was initially identified as a <b>shepherd planet</b> of the inner belt.\n          To justify the planet's high brightness, the presence of a disc of debris has been assumed.\n        ",photo:"assets/photos/dagon-orbit.jpg",action:i=>{i.control.moveToAster("dagon",new M(0,-.8,1),70),i.state.date=new Date("2090-01-01"),i.state.speed=3e6}},{message:"\n          In a 2013 measurement, the planet has shown itself with an <b>extremely eccentric</b> orbit (0.8) which brings it to the outside of the belt.\n        ",action:i=>{i.control.moveToAster("fomalhaut",new M(0,-.1,1),5e4),i.state.speed=1e6}},{message:"\n          NASA said the planet could potentially face <b>destruction</b> as it passes through an area of the belt rich in debris over the next 20 years.\n        ",action:i=>{i.control.moveToAster("dagon",new M(-.3,.2,-1),1e5),i.state.date=new Date("2090-01-01"),i.state.speed=1e8,i.state.rotation=!1}}]}],CJ=[{name:"Hat P 54 System's tour",steps:[{message:"\n          <b>Hat P 54</b> is a star located in the constellation of <b>Gemini</b>.\n          It has <b>2/3</b> of the Sun's <b>size</b> and <b>mass</b>.\n          The surface temperature is about <b>4000 \xb0C</b>.\n        ",action:i=>{i.control.moveToAster("hat-p-54",new M(0,0,1),5),i.state.speed=100}},{message:"\n          The exoplanet <b>Hat P 54 B</b> orbits around the star with an orbit inclination of <b>87 degress</b>.\n          Its <b>size</b> and <b>mass</b> are very similar to <b>Jupiter</b>.\n          It is thought to be a <b>gas planet</b>.\n        ",action:i=>{i.control.moveToAster("b",new M(1,1,0),4),i.state.date=new Date("2020-10-04T13:00:00"),i.state.speed=1e4}},{message:"\n          The exoplanet orbits at just <b>6 million km</b> from the star.\n          It takes only <b>4 earth days</b> to complete the revolution.\n          The surface estimated temperature is about <b>540 \xb0C</b>.\n        ",action:i=>{i.control.moveToAster("b",new M(1,1,.4),80)}}]}],SJ=[{name:"HR 8799 System's tour",steps:[{message:"\n          <b>HR 8799</b> is a white star visible in the constellation of <b>Pegasus</b>.\n          It is a very young star, 30 million years old, with a <b>size</b> and <b>mass</b> slightly higher of the Sun.\n        ",action:i=>{i.control.moveToAster("hr-8799")}},{message:"\n          Around the star orbits one of the <b>most massive asteroid belt</b> known.\n          The belt start from a <b>hot inner disk</b> extending up to <b>15 AU</b> where <b>rocky planets</b> could form.\n        ",action:i=>{i.control.moveToAster("hr-8799",new M(0,-1,.5),5e3)}},{message:"\n          It continues with a <b>huge disk</b> of small grains extending up to <b>2000 AU</b>.\n          The belt is similar in features to the <b>Kuiper's belt</b> of the Solar System.\n        ",action:i=>{i.control.moveToAster("hr-8799",new M(0,-.6,.5),1e5)}},{message:"\n          <b>4 gas exoplanets</b> are orbiting in the system.\n          The names of planets are <b>inverse</b> respect their distance from the star (e, d, c and b).\n          Their orbits are <b>very large</b>: a year of the closest planet lasts <b>45 earth years</b>; the furthest planet completes its orbit in <b>460 earth years</b>.\n        ",action:i=>{i.control.moveToAster("hr-8799",new M(0,-1,.2),4e4)}},{message:"\n          The planets have a <b>very high mass</b>, about <b>10 times</b> bigger than the Jupiter's mass.\n          This feature places them at the <b>edge</b> between a planet and a <b>brown dwarf star</b>.\n        ",action:i=>{i.control.moveToAster("d"),i.state.speed=5e7,i.state.date=new Date("2047-01-01")}}]}],EJ=[{name:"Planets features",steps:[{message:"\n          <b>Mercury</b> is the <b>closest</b> planet to the Sun and the <b>smallest</b> of the system.\n          It has <b>1/3</b> of the Earth's <b>distance</b> from the Sun and it has <b>1/3</b> of the Earth's <b>size</b>.\n        ",photo:"assets/photos/inner-system-sizes.jpg",action:i=>{i.control.moveToAster("mercury"),i.state.speed=6e4,i.state.date=new Date("2020-07-01")}},{message:"\n          It has <b>no moons</b> and <b>no atmosphere</b>.\n          Its rotation is very slow and it causes an extreme <b>temperature range</b>: the sunny hemisphere reaches <b>427 \xb0C</b> and the shady hemisphere reaches <b>-173 \xb0C</b>.\n        ",action:i=>{}},{message:"\n          <b>Venus</b> is the hottest planet of the Solar System.\n          Its size is like Earth and it has <b>no moons</b>.\n          The surface has been shaped by the <b>volcanic activities</b> of the past.\n          About <b>1500</b> medium-large inactive <b>volcanoes</b> are been detected on the surface.\n        ",photo:"assets/photos/venus-probe.jpg",action:i=>{i.control.moveToAster("venus"),i.state.date=new Date("2020-05-15"),i.state.speed=500}},{message:'\n          The most relevant trait of the planet is the <b>dense atmosphere</b> by carbon dioxide that creates a <b>huge greenhouse effect</b>. It causes a constant temperature of <b>462 \xb0C</b> and a pressure <b>92 times</b> greater than the Earth (like being 1 km deep in the ocean).\n          The soviet lander "Venera 13", designed as a bathyscaphe, lasted only a <b>couple of hours</b>.\n          The lander had the time to take a picture.\n        ',photo:"assets/photos/venus-surface.jpg",action:i=>{}},{message:"\n          <b>The Earth</b>, our home.\n          The minimum temperature recorded on our planet was <b>-98 \xb0C</b> in Antarctica in 2013 and the maximum temperature was <b>56.7 \xb0C</b> in 1913 at Furnace Creek (Death Valley).\n        ",action:i=>{i.control.moveToAster("earth"),i.state.date=new Date("2020-05-01T16:00:00"),i.state.speed=150}},{message:"\n          The highest point of our planet is the <b>Mount Everest</b>, almost <b>8.8 km</b> high.\n          The lowest point is located in the <b>Mariana Trench</b>, in the Pacific Ocean at a depth of <b>11 km</b>.\n          The fastest wind ever recorded comes from <b>Hurricane Olivia</b> which in 1996 blew at <b>408 km/h</b>.\n        ",action:i=>{}},{message:"\n          <b>Mars</b>, the red planet.\n          Its color is due to the large amount of <b>iron oxide</b> on the surface.\n        ",photo:"assets/photos/mars-surface.jpg",action:i=>{i.control.moveToAster("mars"),i.state.date=new Date("2020-02-02T12:00:00"),i.state.speed=300}},{message:"\n          Mars has the <b>half size</b> of the Earth and it has about <b>1/3</b> of the Earth's gravity.\n          The temperature range is from <b>-143 \xb0C</b> to <b>20 \xb0C</b>.\n          Among the most interesting places there are the <b>Valles Marineris</b>, a <b>4000 km</b> long canyon, and the <b>Olympus Mons</b>, a huge shield volcano with <b>21 km</b> of height and <b>600 km</b> wide.\n        ",photo:"assets/photos/mars-mons.jpg",action:i=>{}},{message:"\n          The biggest planet, <b>Jupiter</b>.\n          The Jupiter's diameter is <b>10 times</b> bigger than the Earth and it is the first of the four <b>gas giant planets</b>.\n          This category of planet doesn't have a <b>solid surface</b>.\n        ",photo:"assets/photos/jupiter-compare.jpg",action:i=>{i.control.moveToAster("jupiter"),i.state.speed=100,i.state.date=new Date("2021-06-01T08:00:00")}},{message:"\n          The main traits of Jupiter are the <b>striped atmosphere</b> and the <b>giant storm</b> in the southern hemisphere (called the Great Red Spot).\n          The atmosphere is composed mainly of <b>hydrogen</b> and <b>helium</b>, it would have become the <b>second sun</b> in our system if it had gained more mass.\n          <b>79 moons</b> orbit around the giant planet.\n        ",action:i=>{}},{message:"\n          The lord of the rings, <b>Saturn</b>.\n          Saturn is the most recognizable planet thanks to its rings that reach a diameter of <b>275,000 km</b>, 2/3 of the Earth-Moon distance.\n        ",photo:"assets/photos/saturn-rings.jpg",action:i=>{i.control.moveToAster("saturn",new M(0,0,-1)),i.state.speed=1,i.state.date=new Date("2029-01-01")}},{message:"\n          Saturn is the second planet by size, it is <b>9 times</b> bigger than the Earth.\n          The distance from the Sun is <b>10 times</b> greater than the Earth. The surface temperature of the gas planet reach <b>-139 \xb0C</b>.\n          <b>82 moons</b> orbit around the planet.\n        ",action:i=>{}},{message:"\n          <b>Uranus</b> is the <b>seventh planet</b> of the Solar System.\n          Its diameter is <b>4 times</b> greater than the Earth.\n          The main traits of the gas planet are the inclination of <b>98 degrees</b> and its thin <b>ice rings</b>.\n        ",photo:"assets/photos/uranus-axis.jpg",action:i=>{i.control.moveToAster("uranus",new M(-1,0,0)),i.state.date=new Date("2040-01-01")}},{message:"\n          The Sun's distance is <b>19 times</b> greater than the Earth. The surface temperature is <b>-197 \xb0C</b>.\n          Due to the low internal heat radiation, Uranus reaches <b>-224 \xb0C</b> in the tropopause which makes it the <b>coldest</b> planet in the Solar System.\n          The planet was explored by the Voyager 2 probe which took <b>8.5 years</b> to reach it.\n          <b>27 moons</b> orbit around the planet.\n        ",action:i=>{}},{message:"\n          <b>Neptune</b>, the blue planet.\n          Its color is due to the presence of <b>methane</b> in the atmosphere. It's the last of the gas giant planets.\n          The Sun's distance is <b>30 times</b> greater than the Earth, the surface temperature reach <b>-201 \xb0C</b>.\n          Neptune's <b>diameter</b> is like the diameter of Uranus.\n          The planet owns <b>14 moons</b>.\n        ",action:i=>{i.control.moveToAster("neptune"),i.state.date=new Date("1998-01-01")}},{message:"\n          The planet was explored in 1989 by the probe Voyager 2 which detected a <b>great dark spot</b> in the atmosphere.\n          The spot was an anticyclone blowing at a speed of <b>2100 km/h</b>, the <b>strongest winds</b> of the Solar System.\n        ",photo:"assets/photos/neptune-spot.jpg",action:i=>{}}]},{name:"Days and Years of the Planets",steps:[{message:"\n          In the <b>inner Solar System</b>, the planets have different sidereal day length (rotation speed).\n          <b>Earth</b> and <b>Mars</b> have a similar value: <b>24</b> and <b>25 hours</b> respectively.\n          <b>Mercury</b> and <b>Venus</b> have a very long sidereal day length:\n          <b>58 earth days</b> for the smallest planet, even <b>243 earth days</b> for Venus.\n          <small>Time speed: 1 real second \u2243 8 hours</small>\n        ",action:i=>{i.control.moveToAster("sun"),i.state.camera.position.set(0,6e8,1),i.state.speed=28e3}},{message:"\n          To observe the rotation of the two slow planets it's necessary to accelerate the time extremely.\n          <small>Time speed: 1 real second \u2243 9 earth days</small>\n        ",action:i=>{i.state.camera.position.set(0,6e8,1),i.state.speed=8e5}},{message:"\n          The revolution time (year) of the planets depends on their <b>distance</b> from the Sun.\n          <b>Mercury</b> has a year long <b>88 earth days</b> and <b>Venus</b> follows with <b>225 earth days</b>.\n          <b>Mars</b> needs <b>687 earth days</b>, almost <b>2 earth years</b>.\n          <small>Time speed: 1 real second \u2243 9 earth days</small>\n          <small>Rotations are disabled</small>\n        ",action:i=>{i.state.camera.position.set(0,6e8,1),i.state.rotation=!1}},{message:"\n          In the <b>outer Solar System</b>, the planets have a sidereal day length slightly shorter than the Earth.\n          <b>Jupiter</b> is the fastest with a value of <b>10 hours</b>.\n          <b>Saturn</b> follows with <b>11 hours</b>, <b>Neptune</b> with <b>16 hours</b> and lastly <b>Uranus</b> with <b>17 hours</b>.\n          <small>Time speed: 1 real second \u2243 3 hours</small>\n        ",action:i=>{i.state.rotation=!0,i.state.camera.position.set(0,15e9,1),i.state.speed=1e4}},{message:"\n          The revolution time of these planets is very long due to their <b>distance</b> from the Sun.\n          <b>Jupiter</b> needs <b>12 earth years</b> and <b>Saturn</b> takes <b>30 earth years</b>.\n          More distant, <b>Uranus</b> needs <b>84 earth years</b> and <b>Neptune</b> closes with <b>165 earth years</b>!\n          <small>Time speed: 1 real second \u2243 2 earth years</small>\n          <small>Rotations are disabled</small>\n        ",action:i=>{i.state.rotation=!1,i.state.camera.position.set(0,15e9,1),i.state.speed=7e7}}]},{name:"Moons fly-by",noLightMode:!0,steps:[{message:"\n          The <b>Moon</b>, our charming satellite.\n          The Moon is in <b>synchronous rotation</b>, it always turns the <b>same face</b> towards the Earth.\n          It orbits at an average distance of <b>380,000 km</b>.\n          The Moon acts on the <b>tides</b> and the <b>stability</b> of the Earth's rotation axis.\n        ",action:i=>{i.control.moveToAster("moon",new M(-1,0,0)),i.state.date=new Date("2021-02-24"),i.state.speed=1e3}},{message:"\n          The visible surface of the Moon is characterized by approximately <b>300,000 impact craters</b>.\n          The largest lunar crater is the <b>South Pole-Aitken basin</b> in the southern part of the hidden face.\n          The crater's diameter is about <b>2,500 km</b> and the depth is <b>13 km</b>.\n        ",photo:"assets/photos/moon-crater.jpg",action:i=>{}},{message:"\n          <b>Phobos</b>, the major Mars's moon.\n          It is the <b>closest moon</b> to its planet than the other moons of the Solar System.\n          It has an orbit of less than <b>6000 km</b> from the surface of Mars.\n          Phobos completes its orbit in just <b>7,5 hours</b>, 3 turns in a day in the Mars's sky.\n        ",action:i=>{i.control.moveToAster("phobos",new M(1,-.4,.6),8),i.state.date=new Date("2020-10-15T16:00:00"),i.state.speed=70}},{message:"\n          It's a very <b>small moon</b> with <b>27 km</b> on the longer side.\n          The 8km diameter <b>Stickney Crater</b> is the most prominent trait of Phobos.\n        ",photo:"assets/photos/phobos-crater.jpg",action:i=>{i.control.moveToAster("phobos",new M(1,-.4,.6),4),i.state.date=new Date("2020-10-15T20:00:00"),i.state.speed=100}},{message:"\n          <b>Io</b>, the volcanic Jupiter's moon.\n          It is the most <b>geologically active</b> moon of the Solar System with over <b>400 active volcanoes</b>.\n          Many volcanoes produce plumes that reach <b>500 km</b> in height.\n        ",photo:"assets/photos/io-vulcan.jpg",action:i=>{i.control.moveToAster("io",new M(0,0,1),5),i.state.date=new Date("2020-10-15"),i.state.speed=500}},{message:"\n          The iced Jupiter's moon, <b>Europa</b>.\n          Its surface is streaked with few craters and it is the <b>smoothest</b> in the Solar System.\n          The Galileo probe detected in 1997 a water plume of a geyser.\n          It proves the existence of an <b>ocean of water</b> under the iced surface.\n        ",photo:"assets/photos/europa-structure.jpg",action:i=>{i.control.moveToAster("europa",new M(1,0,1),3),i.state.date=new Date("2021-08-03T10:00:00"),i.state.speed=500}},{message:"\n          The king of the satellites, <b>Ganymede</b>.\n          Ganymede is the <b>biggest</b> of the Solar System's moons. It is 26% bigger than the planet <b>Mercury</b>.\n          It is the only moon in the Solar System to have a magnetic field.\n        ",photo:"assets/photos/ganymede-compare.jpg",action:i=>{i.control.moveToAster("ganymede",new M(1,0,0)),i.state.date=new Date("2020-10-16T11:00:00"),i.state.speed=1e3}},{message:"\n          The moon of water geysers, <b>Enceladus</b>.\n          It's a small moon of about <b>500 km</b> of diameter.\n          In 2005, the Cassini probe detected a <b>plume of water</b> in the south pole.\n          It proves the presence of a <b>liquid ocean</b> under the iced surface as happened for the Jupiter's moon Europe.\n          Enceladus is one of the <b>most reflective</b> bodies of the Solar System due to its iced surface, which it's the cause of a temperature range from <b>-240 \xb0C</b> to <b>-128 \xb0C</b>.\n        ",photo:"assets/photos/enceladus-geyser.jpg",action:i=>{i.control.moveToAster("enceladus",new M(-.3,-.2,1)),i.state.date=new Date("2021-12-01T21:00:00"),i.state.speed=200}},{message:"\n          <b>Titan</b>, the moon with an atmosphere.\n          It's the only moon in the Solar System with a <b>dense atmosphere</b>, based on nitrogen and methane.\n          This atmosphere provide the <b>seasons</b>, methane <b>winds</b> and <b>rains</b>.\n          In 2005, the lander <b>Huygens</b> taked a <b>picture</b> from 2 km altitude during the landing:\n        ",photo:"assets/photos/titan-surface.jpg",action:i=>{i.control.moveToAster("titan",new M(1,0,0)),i.state.date=new Date("2020-10-15"),i.state.speed=100}},{message:"\n          <b>Titania</b>, the biggest Uranus's moon.\n          Its surface is characterized by <b>enormous canyons</b> up to 1,500 km long, 50 km wide and 5 km deep.\n          Uranus appears in the Titania's sky <b>20 times</b> bigger than the Moon seen from the Earth.\n        ",photo:"assets/photos/titania-canyon.jpg",action:i=>{i.control.moveToAster("titania",new M(0,0,-1)),i.state.date=new Date("2020-11-04T09:00:00"),i.state.speed=1e3}},{message:"\n          <b>Triton</b>, the retrograde moon.\n          It's the only moon that orbits with a <b>retrograde motion</b> (clockwise) which, combined with its composition, suggests it's a Kuiper Belt's object <b>captured</b> by Neptune's gravity.\n          Triton's surface temperature reaches <b>-235 \xb0C</b>.\n          It's the biggest Neptune's moon and it orbits <b>350,000 km</b> from Neptune, slightly less than the Earth-Moon distance. The Voyager 2 probe took this photo during its overflight:\n        ",photo:"assets/photos/triton-distance.jpg",action:i=>{i.control.moveToAster("triton",new M(1,.4,.7),3.5),i.state.date=new Date("2020-10-18T10:00:00"),i.state.speed=800}}]}],Eg=new M(0,-.9,.5),DJ=[{name:"Trappist-1 System's tour",steps:[{message:"\n          <b>Trappist-1</b> is an ultracold red dwarf observable in the constellation of <b>Aquarius</b>.\n          Compared to the Sun, Trappist-1 has:\n          - <b>12%</b> of the <b>radius</b>\n          - <b>44%</b> of the <b>surface temperature</b>\n          - <b>8%</b> of the <b>mass</b>, just above the limit that allows to ignite <b>nuclear fusion</b>.\n        ",action:i=>{i.control.moveToAster("trappist-1"),i.state.speed=3e3}},{message:'\n          <b>Seven rocky exoplanets</b> have been discovered in the system named form "b" to "h".\n          A <b>research</b> based on the planets low density and the star chemical analysis was concluded in <b>2018</b>.\n          The researchers claimed that the planets may have a <b>rich atmosphere</b> and would be composed largely of <b>water</b>.\n        ',photo:"assets/photos/trappist-1-system.jpg",action:i=>{i.control.moveToAster("trappist-1",new M(0,0,-1),400),i.state.speed=8e3}},{message:'\n          Planets "<b>b</b>" and "<b>c</b>" are subject to a <b>greenhouse effect</b>, like Venus.\n          They are very hot and they probably don\'t have <b>liquid water</b> on the surface.\n        ',action:i=>{i.control.moveToAster("b",Eg.clone()),i.state.speed=700,i.state.date=new Date("2020-10-03T03:00:00")}},{message:'\n          Planets "<b>d</b>" is subject to greater debate.\n          It orbits on the <b>inner edge</b> of the habitable zone and it could be subject to a greenhouse effect like other inner planets.\n          The oceans could be evaporated during its formation but a small quantity of <b>water</b> may have persisted on the surface.\n        ',action:i=>{i.control.moveToAster("d",Eg.clone()),i.state.speed=1e3,i.state.date=new Date("2020-10-14T10:00:00")}},{message:'\n          Planet "<b>e</b>" has been identified as the best candidate for the <b>presence of life</b>.\n          it is in the <b>habitable zone</b> and some studies have stated that the probability of an <b>ocean</b> that exists on the surface is very high.\n        ',action:i=>{i.control.moveToAster("e",Eg.clone()),i.state.speed=5e3,i.state.date=new Date("2020-10-07T08:00:00")}},{message:'\n          Planets "<b>f</b>", "<b>g</b>" and "<b>h</b>" are distant from their star causing a <b>very low surface temperatures</b>.\n          These planets probably have an <b>icy surface</b>.\n        ',action:i=>{i.control.moveToAster("g",Eg.clone()),i.state.speed=1e4,i.state.date=new Date("2020-10-15")}}]}],TJ=new Map([["solar-system",EJ],["algol-system",wJ],["errai-system",xJ],["fomalhaut-system",MJ],["hat-p-54-system",CJ],["hr-8799-system",SJ],["trappist-1-system",DJ]]);let I2=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(C(da),C(mt))},i.\u0275dir=Ee({type:i}),i})(),al=(()=>{class i extends I2{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Pn(i)))(n||i)}}(),i.\u0275dir=Ee({type:i,features:[We]}),i})();const Li=new ue("NgValueAccessor"),IJ={provide:Li,useExisting:Rt(()=>Nw),multi:!0},RJ=new ue("CompositionEventMode");let Nw=(()=>{class i extends I2{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function kJ(){const i=as()?as().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(C(da),C(mt),C(RJ,8))},i.\u0275dir=Ee({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&we("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[At([IJ]),We]}),i})();function ea(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function R2(i){return null!=i&&"number"==typeof i.length}const oi=new ue("NgValidators"),ta=new ue("NgAsyncValidators"),FJ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bw{static min(e){return function P2(i){return e=>{if(ea(e.value)||ea(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function F2(i){return e=>{if(ea(e.value)||ea(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return function L2(i){return ea(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function O2(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function N2(i){return ea(i.value)||FJ.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function B2(i){return e=>ea(e.value)||!R2(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function V2(i){return e=>R2(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function H2(i){if(!i)return Dg;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(ea(n.value))return null;const r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return $2(e)}static composeAsync(e){return q2(e)}}function Dg(i){return null}function z2(i){return null!=i}function U2(i){return Up(i)?vu(i):i}function G2(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function j2(i,e){return e.map(t=>t(i))}function W2(i){return i.map(e=>function LJ(i){return!i.validate}(e)?e:t=>e.validate(t))}function $2(i){if(!i)return null;const e=i.filter(z2);return 0==e.length?null:function(t){return G2(j2(t,e))}}function Vw(i){return null!=i?$2(W2(i)):null}function q2(i){if(!i)return null;const e=i.filter(z2);return 0==e.length?null:function(t){return d2(j2(t,e).map(U2)).pipe(Wn(G2))}}function Hw(i){return null!=i?q2(W2(i)):null}function Y2(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function X2(i){return i._rawValidators}function Z2(i){return i._rawAsyncValidators}function zw(i){return i?Array.isArray(i)?i:[i]:[]}function Tg(i,e){return Array.isArray(i)?i.includes(e):i===e}function K2(i,e){const t=zw(e);return zw(i).forEach(r=>{Tg(t,r)||t.push(r)}),t}function Q2(i,e){return zw(e).filter(t=>!Tg(i,t))}class J2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Oi extends J2{get formDirective(){return null}get path(){return null}}class Ss extends J2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Uw=(()=>{class i extends class eP{constructor(e){this._cd=e}get isTouched(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.touched)}get isUntouched(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.untouched)}get isPristine(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.pristine)}get isDirty(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.dirty)}get isValid(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.valid)}get isInvalid(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.invalid)}get isPending(){var e,t;return!(null===(e=this._cd)||void 0===e||null===(t=e.control)||void 0===t||!t.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(C(Ss,2))},i.\u0275dir=Ee({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&Vt("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[We]}),i})();const Rh="VALID",Ig="INVALID",fu="PENDING",Ph="DISABLED";function $w(i){return(kg(i)?i.validators:i)||null}function nP(i){return Array.isArray(i)?Vw(i):i||null}function qw(i,e){return(kg(e)?e.asyncValidators:i)||null}function iP(i){return Array.isArray(i)?Hw(i):i||null}function kg(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class oP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nP(this._rawValidators),this._composedAsyncValidatorFn=iP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rh}get invalid(){return this.status===Ig}get pending(){return this.status==fu}get disabled(){return this.status===Ph}get enabled(){return this.status!==Ph}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=iP(e)}addValidators(e){this.setValidators(K2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(K2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Q2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Q2(e,this._rawAsyncValidators))}hasValidator(e){return Tg(this._rawValidators,e)}hasAsyncValidator(e){return Tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ph,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rh,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rh||this.status===fu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ph:Rh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fu,this._hasOwnPendingAsyncValidator=!0;const t=U2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?Ph:this.errors?Ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fu)?fu:this._anyControlsHaveStatus(Ig)?Ig:Rh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Yw extends oP{constructor(e,t,n){super($w(t),qw(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function sP(i,e,t){i._forEachChild((n,r)=>{if(void 0===t[r])throw new ce(1002,"")})})(this,0,e),Object.keys(e).forEach(n=>{(function rP(i,e,t){const n=i.controls;if(!(e?Object.keys(n):n).length)throw new ce(1e3,"");if(!n[t])throw new ce(1001,"")})(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{const r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Fh(i,e){var t,n;Xw(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&(null===(t=(n=e.valueAccessor).setDisabledState)||void 0===t||t.call(n,!0)),function WJ(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&aP(i,e)})}(i,e),function qJ(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function $J(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&aP(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function jJ(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function Pg(i,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Lg(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Fg(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xw(i,e){const t=X2(i);null!==e.validator?i.setValidators(Y2(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=Z2(i);null!==e.asyncValidator?i.setAsyncValidators(Y2(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();Fg(e._rawValidators,r),Fg(e._rawAsyncValidators,r)}function Lg(i,e){let t=!1;if(null!==i){if(null!==e.validator){const r=X2(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=Z2(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}const n=()=>{};return Fg(e._rawValidators,n),Fg(e._rawAsyncValidators,n),t}function aP(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function lP(i,e){Xw(i,e)}function uP(i,e){i._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}const QJ={provide:Oi,useExisting:Rt(()=>Oh)},Lh=(()=>Promise.resolve())();let Oh=(()=>{class i extends Oi{constructor(t,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Pe,this.form=new Yw({},Vw(t),Hw(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Lh.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Fh(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Lh.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Lh.then(()=>{const n=this._findContainer(t.path),r=new Yw({});lP(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Lh.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Lh.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){var n;return this.submitted=!0,uP(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===(null==t||null===(n=t.target)||void 0===n?void 0:n.method)}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return i.\u0275fac=function(t){return new(t||i)(C(oi,10),C(ta,10))},i.\u0275dir=Ee({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&we("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([QJ]),We]}),i})();function dP(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function hP(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const pP=class extends oP{constructor(e=null,t,n){super($w(t),qw(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=hP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){hP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},tee={provide:Ss,useExisting:Rt(()=>Og)},gP=(()=>Promise.resolve())();let Og=(()=>{class i extends Ss{constructor(t,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new pP,this._registered=!1,this.update=new Pe,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function Kw(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Nw?t=s:function ZJ(i){return Object.getPrototypeOf(i.constructor)===al}(s)?n=s:r=s}),r||n||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Zw(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){gP.then(()=>{var n;this.control.setValue(t,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,r=0!==n&&function wv(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);gP.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function Rg(i,e){return[...e.path,i]}(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(C(Oi,9),C(oi,10),C(ta,10),C(Li,10),C(xn,8))},i.\u0275dir=Ee({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[At([tee]),We,yn]}),i})(),yP=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})();const lee={provide:Oi,useExisting:Rt(()=>Nh)};let Nh=(()=>{class i extends Oi{constructor(t,n){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Pe,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return Fh(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){Pg(t.control||null,t,!1),function KJ(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){var n;return this.submitted=!0,uP(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===(null==t||null===(n=t.target)||void 0===n?void 0:n.method)}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,r=this.form.get(t.path);n!==r&&(Pg(n||null,t),(i=>i instanceof pP)(r)&&(Fh(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);lP(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function YJ(i,e){return Lg(i,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xw(this.form,this),this._oldForm&&Lg(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(C(oi,10),C(ta,10))},i.\u0275dir=Ee({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&we("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([lee]),We,yn]}),i})(),Eee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[yP]}),i})(),Dee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Eee]}),i})();class Ng{constructor(e=!1,t,n=!0,r){this._multiple=e,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Je,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,n=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const Aee=["button"],Iee=["*"],LP=new ue("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),OP=new ue("MatButtonToggleGroup"),kee={provide:Li,useExisting:Rt(()=>VP),multi:!0};let NP=0;class BP{constructor(e,t){this.source=e,this.value=t}}let VP=(()=>{class i{constructor(t,n){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+NP++,this.valueChange=new Pe,this.change=new Pe,this.appearance=n&&n.appearance?n.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=wt(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(n=>n.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=wt(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=wt(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new Ng(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const n=new BP(t,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(t,n,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>null!=t.value&&n===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const n=this._buttonToggles.find(r=>null!=r.value&&r.value===t);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(t,n){n&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){var t;null===(t=this._buttonToggles)||void 0===t||t.forEach(n=>n._markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(C(xn),C(LP,8))},i.\u0275dir=Ee({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,n,r){if(1&t&&Xn(r,HP,5),2&t){let s;ot(s=at())&&(n._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,n){2&t&&(st("aria-disabled",n.disabled),Vt("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[At([kee,{provide:OP,useExisting:i}])]}),i})();const Ree=du(class{});let HP=(()=>{class i extends Ree{constructor(t,n,r,s,o,a){super(),this._changeDetectorRef=n,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Pe;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const n=wt(t);n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=wt(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+NP++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new BP(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return i.\u0275fac=function(t){return new(t||i)(C(OP,8),C(xn),C(mt),C(Dr),Is("tabindex"),C(LP,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(t,n){if(1&t&&rn(Aee,5),2&t){let r;ot(r=at())&&(n._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,n){1&t&&we("focus",function(){return n.focus()}),2&t&&(st("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),Vt("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[We],ngContentSelectors:Iee,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,n){if(1&t&&(er(),T(0,"button",0,1),we("click",function(){return n._onButtonClick()}),T(2,"span",2),bn(3),A()(),ve(4,"span",3)(5,"span",4)),2&t){const r=is(1);G("id",n.buttonId)("disabled",n.disabled||null),st("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.checked)("name",n._getButtonName())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),O(5),G("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)}},dependencies:[sl],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),i})(),Pee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Lt,Ah,Lt]}),i})();const Fee=["connectionContainer"],Lee=["inputContainer"],Oee=["label"];function Nee(i,e){1&i&&(Xu(0),T(1,"div",14),ve(2,"div",15)(3,"div",16)(4,"div",17),A(),T(5,"div",18),ve(6,"div",15)(7,"div",16)(8,"div",17),A(),Zu())}function Bee(i,e){if(1&i){const t=ti();T(0,"div",19),we("cdkObserveContent",function(){return vt(t),bt(de().updateOutlineGap())}),bn(1,1),A()}2&i&&G("cdkObserveContentDisabled","outline"!=de().appearance)}function Vee(i,e){if(1&i&&(Xu(0),bn(1,2),T(2,"span"),L(3),A(),Zu()),2&i){const t=de(2);O(3),en(t._control.placeholder)}}function Hee(i,e){1&i&&bn(0,3,["*ngSwitchCase","true"])}function zee(i,e){1&i&&(T(0,"span",23),L(1," *"),A())}function Uee(i,e){if(1&i){const t=ti();T(0,"label",20,21),we("cdkObserveContent",function(){return vt(t),bt(de().updateOutlineGap())}),be(2,Vee,4,1,"ng-container",12),be(3,Hee,1,0,"ng-content",12),be(4,zee,2,0,"span",22),A()}if(2&i){const t=de();Vt("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),G("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),st("for",t._control.id)("aria-owns",t._control.id),O(2),G("ngSwitchCase",!1),O(1),G("ngSwitchCase",!0),O(1),G("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function Gee(i,e){1&i&&(T(0,"div",24),bn(1,4),A())}function jee(i,e){if(1&i&&(T(0,"div",25),ve(1,"span",26),A()),2&i){const t=de();O(1),Vt("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Wee(i,e){1&i&&(T(0,"div"),bn(1,5),A()),2&i&&G("@transitionMessages",de()._subscriptAnimationState)}function $ee(i,e){if(1&i&&(T(0,"div",30),L(1),A()),2&i){const t=de(2);G("id",t._hintLabelId),O(1),en(t.hintLabel)}}function qee(i,e){if(1&i&&(T(0,"div",27),be(1,$ee,2,2,"div",28),bn(2,6),ve(3,"div",29),bn(4,7),A()),2&i){const t=de();G("@transitionMessages",t._subscriptAnimationState),O(1),G("ngIf",t.hintLabel)}}const Yee=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Xee=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Zee=new ue("MatError"),Kee={transitionMessages:Us("transitionMessages",[zi("enter",$t({opacity:1,transform:"translateY(0%)"})),bi("void => enter",[$t({opacity:0,transform:"translateY(-5px)"}),ki("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Bg=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ee({type:i}),i})();const Qee=new ue("MatHint");let rx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ee({type:i,selectors:[["mat-label"]]}),i})(),Jee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ee({type:i,selectors:[["mat-placeholder"]]}),i})();const ete=new ue("MatPrefix"),zP=new ue("MatSuffix");let tte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ee({type:i,selectors:[["","matSuffix",""]],features:[At([{provide:zP,useExisting:i}])]}),i})(),UP=0;const ite=uu(class{constructor(i){this._elementRef=i}},"primary"),rte=new ue("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Vg=new ue("MatFormField");let ste=(()=>{class i extends ite{constructor(t,n,r,s,o,a,l){super(t),this._changeDetectorRef=n,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Je,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+UP++,this._labelId="mat-form-field-label-"+UP++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){var n;const r=this._appearance;this._appearance=t||(null===(n=this._defaults)||void 0===n?void 0:n.appearance)||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=wt(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ur(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ln(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ln(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),kr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ur(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ur(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ln(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const n=this._control?this._control.ngControl:null;return n&&n[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,fw(this._label.nativeElement,"transitionend").pipe(si(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const u=n.querySelectorAll(`${r}, ${s}`);for(let d=0;d<u.length;d++)u[d].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=n.querySelectorAll(r),c=n.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const u=n.getBoundingClientRect();if(0===u.width&&0===u.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const d=this._getStartEnd(u),h=t.children,p=this._getStartEnd(h[0].getBoundingClientRect());let f=0;for(let m=0;m<h.length;m++)f+=h[m].offsetWidth;o=Math.abs(p-d)-5,a=f>0?.75*f+10:0}for(let u=0;u<l.length;u++)l[u].style.width=`${o}px`;for(let u=0;u<c.length;u++)c[u].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(xn),C(Tr,8),C(rte,8),C(ui),C(tt),C(tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,n,r){if(1&t&&(Xn(r,Bg,5),Xn(r,Bg,7),Xn(r,rx,5),Xn(r,rx,7),Xn(r,Jee,5),Xn(r,Zee,5),Xn(r,Qee,5),Xn(r,ete,5),Xn(r,zP,5)),2&t){let s;ot(s=at())&&(n._controlNonStatic=s.first),ot(s=at())&&(n._controlStatic=s.first),ot(s=at())&&(n._labelChildNonStatic=s.first),ot(s=at())&&(n._labelChildStatic=s.first),ot(s=at())&&(n._placeholderChild=s.first),ot(s=at())&&(n._errorChildren=s),ot(s=at())&&(n._hintChildren=s),ot(s=at())&&(n._prefixChildren=s),ot(s=at())&&(n._suffixChildren=s)}},viewQuery:function(t,n){if(1&t&&(rn(Fee,7),rn(Lee,5),rn(Oee,5)),2&t){let r;ot(r=at())&&(n._connectionContainerRef=r.first),ot(r=at())&&(n._inputContainerRef=r.first),ot(r=at())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,n){2&t&&Vt("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[At([{provide:Vg,useExisting:i}]),We],ngContentSelectors:Xee,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,n){1&t&&(er(Yee),T(0,"div",0)(1,"div",1,2),we("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),be(3,Nee,9,0,"ng-container",3),be(4,Bee,2,1,"div",4),T(5,"div",5,6),bn(7),T(8,"span",7),be(9,Uee,5,16,"label",8),A()(),be(10,Gee,2,0,"div",9),A(),be(11,jee,2,4,"div",10),T(12,"div",11),be(13,Wee,2,1,"div",12),be(14,qee,5,2,"div",13),A()()),2&t&&(O(3),G("ngIf","outline"==n.appearance),O(1),G("ngIf",n._prefixChildren.length),O(5),G("ngIf",n._hasFloatingLabel()),O(1),G("ngIf",n._suffixChildren.length),O(1),G("ngIf","outline"!=n.appearance),O(1),G("ngSwitch",n._getDisplayedMessages()),O(1),G("ngSwitchCase","error"),O(1),G("ngSwitchCase","hint"))},dependencies:[wr,uc,mf,lR],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Kee.transitionMessages]},changeDetection:0}),i})(),Hg=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[ls,Lt,aw,Lt]}),i})();const jP=iu({passive:!0});let ote=(()=>{class i{constructor(t,n){this._platform=t,this._ngZone=n,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return iR;const n=co(t),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new Je,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,jP),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,jP)}}),s}stopMonitoring(t){const n=co(t),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(t){return new(t||i)($(ui),$(tt))},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WP=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})();const $P=new ue("MAT_INPUT_VALUE_ACCESSOR"),ate=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let lte=0;const cte=XR(class{constructor(i,e,t,n){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=t,this.ngControl=n,this.stateChanges=new Je}});let ute=(()=>{class i extends cte{constructor(t,n,r,s,o,a,l,c,u,d){super(a,s,o,r),this._elementRef=t,this._platform=n,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+lte++,this.focused=!1,this.stateChanges=new Je,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(f=>tR().has(f)),this._iOSKeyupListener=f=>{const m=f.target;!m.value&&0===m.selectionStart&&0===m.selectionEnd&&(m.setSelectionRange(1,1),m.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,p=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===p,this._isTextarea="textarea"===p,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=wt(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,n,r,s;return null!==(t=null!==(n=this._required)&&void 0!==n?n:null===(r=this.ngControl)||void 0===r||null===(s=r.control)||void 0===s?void 0:s.hasValidator(Bw.required))&&void 0!==t&&t}set required(t){this._required=wt(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&tR().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=wt(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t;const n=this._formField,r=!n||"legacy"!==n.appearance||null!==(t=n._hasLabel)&&void 0!==t&&t.call(n)?this.placeholder:null;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){ate.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(ui),C(Ss,10),C(Oh,8),C(Nh,8),C(Dw),C($P,10),C(ote),C(tt),C(Vg,8))},i.\u0275dir=Ee({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,n){1&t&&we("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&t&&(Bs("disabled",n.disabled)("required",n.required),st("id",n.id)("data-placeholder",n.placeholder)("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required),Vt("mat-input-server",n._isServer)("mat-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[At([{provide:Bg,useExisting:i}]),We,yn]}),i})(),dte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[Dw],imports:[WP,Hg,Lt,WP,Hg]}),i})();const hte=["mat-calendar-body",""];function pte(i,e){if(1&i&&(T(0,"tr",2)(1,"td",3),L(2),A()()),2&i){const t=de();O(1),ma("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),st("colspan",t.numCols),O(1),Nt(" ",t.label," ")}}function fte(i,e){if(1&i&&(T(0,"td",3),L(1),A()),2&i){const t=de(2);ma("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),st("colspan",t._firstRowOffset),O(1),Nt(" ",t._firstRowOffset>=t.labelMinRequiredCells?t.label:""," ")}}function mte(i,e){if(1&i){const t=ti();T(0,"td",7)(1,"button",8),we("click",function(r){const o=vt(t).$implicit;return bt(de(2)._cellClicked(o,r))})("focus",function(r){const o=vt(t).$implicit;return bt(de(2)._emitActiveDateChange(o,r))}),T(2,"div",9),L(3),A(),ve(4,"div",10),A()()}if(2&i){const t=e.$implicit,n=e.index,r=de().index,s=de();ma("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),st("data-mat-row",r)("data-mat-col",n),O(1),Vt("mat-calendar-body-disabled",!t.enabled)("mat-calendar-body-active",s._isActiveCell(r,n))("mat-calendar-body-range-start",s._isRangeStart(t.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(t.compareValue))("mat-calendar-body-in-range",s._isInRange(t.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(t.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(t.compareValue,r,n))("mat-calendar-body-comparison-start",s._isComparisonStart(t.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(t.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(t.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(t.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(t.compareValue))("mat-calendar-body-in-preview",s._isInPreview(t.compareValue)),G("ngClass",t.cssClasses)("tabindex",s._isActiveCell(r,n)?0:-1),st("aria-label",t.ariaLabel)("aria-disabled",!t.enabled||null)("aria-pressed",s._isSelected(t.compareValue))("aria-current",s.todayValue===t.compareValue?"date":null),O(1),Vt("mat-calendar-body-selected",s._isSelected(t.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(t.compareValue))("mat-calendar-body-today",s.todayValue===t.compareValue),O(1),Nt(" ",t.displayValue," ")}}function gte(i,e){if(1&i&&(T(0,"tr",4),be(1,fte,2,6,"td",5),be(2,mte,5,47,"td",6),A()),2&i){const t=e.$implicit,n=e.index,r=de();O(1),G("ngIf",0===n&&r._firstRowOffset),O(1),G("ngForOf",t)}}function _te(i,e){if(1&i&&(T(0,"th",5)(1,"span",6),L(2),A(),T(3,"span",7),L(4),A()()),2&i){const t=e.$implicit;O(2),en(t.long),O(2),en(t.narrow)}}const yte=["*"];function vte(i,e){}function bte(i,e){if(1&i){const t=ti();T(0,"mat-month-view",5),we("activeDateChange",function(r){return vt(t),bt(de().activeDate=r)})("_userSelection",function(r){return vt(t),bt(de()._dateSelected(r))}),A()}if(2&i){const t=de();G("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)("comparisonStart",t.comparisonStart)("comparisonEnd",t.comparisonEnd)}}function wte(i,e){if(1&i){const t=ti();T(0,"mat-year-view",6),we("activeDateChange",function(r){return vt(t),bt(de().activeDate=r)})("monthSelected",function(r){return vt(t),bt(de()._monthSelectedInYearView(r))})("selectedChange",function(r){return vt(t),bt(de()._goToDateInView(r,"month"))}),A()}if(2&i){const t=de();G("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function xte(i,e){if(1&i){const t=ti();T(0,"mat-multi-year-view",7),we("activeDateChange",function(r){return vt(t),bt(de().activeDate=r)})("yearSelected",function(r){return vt(t),bt(de()._yearSelectedInMultiYearView(r))})("selectedChange",function(r){return vt(t),bt(de()._goToDateInView(r,"year"))}),A()}if(2&i){const t=de();G("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function Mte(i,e){}const Cte=["button"];function Ste(i,e){1&i&&(y_(),T(0,"svg",3),ve(1,"path",4),A())}const Ete=[[["","matDatepickerToggleIcon",""]]],Dte=["[matDatepickerToggleIcon]"];let Bh=(()=>{class i{constructor(){this.changes=new Je,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(t,n){return`${t} \u2013 ${n}`}formatYearRangeLabel(t,n){return`${t} to ${n}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class sx{constructor(e,t,n,r,s={},o=e,a){this.value=e,this.displayValue=t,this.ariaLabel=n,this.enabled=r,this.cssClasses=s,this.compareValue=o,this.rawValue=a}}let mu=(()=>{class i{constructor(t,n){this._elementRef=t,this._ngZone=n,this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new Pe,this.previewChange=new Pe,this.activeDateChange=new Pe,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&r.target&&this._getCellFromElement(r.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r}))},n.runOutsideAngular(()=>{const r=t.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0)})}ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}_cellClicked(t,n){t.enabled&&this.selectedValueChange.emit({value:t.value,event:n})}_emitActiveDateChange(t,n){t.enabled&&this.activeDateChange.emit({value:t.value,event:n})}_isSelected(t){return this.startValue===t||this.endValue===t}ngOnChanges(t){const n=t.numCols,{rows:r,numCols:s}=this;(t.rows||n)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(t.cellAspectRatio||n||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(n||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mouseenter",this._enterHandler,!0),t.removeEventListener("focus",this._enterHandler,!0),t.removeEventListener("mouseleave",this._leaveHandler,!0),t.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(t,n){let r=t*this.numCols+n;return t&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(t=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(si(1)).subscribe(()=>{setTimeout(()=>{const n=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");n&&(t||(this._skipNextFocus=!0),n.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(t){return ox(t,this.startValue,this.endValue)}_isRangeEnd(t){return ax(t,this.startValue,this.endValue)}_isInRange(t){return lx(t,this.startValue,this.endValue,this.isRange)}_isComparisonStart(t){return ox(t,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(t,n,r){if(!this._isComparisonStart(t)||this._isRangeStart(t)||!this._isInRange(t))return!1;let s=this.rows[n][r-1];if(!s){const o=this.rows[n-1];s=o&&o[o.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(t,n,r){if(!this._isComparisonEnd(t)||this._isRangeEnd(t)||!this._isInRange(t))return!1;let s=this.rows[n][r+1];if(!s){const o=this.rows[n+1];s=o&&o[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(t){return ax(t,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(t){return lx(t,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(t){return this.comparisonStart===this.comparisonEnd&&t===this.comparisonStart}_isPreviewStart(t){return ox(t,this.previewStart,this.previewEnd)}_isPreviewEnd(t){return ax(t,this.previewStart,this.previewEnd)}_isInPreview(t){return lx(t,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(t){let n;if(qP(t)?n=t:qP(t.parentNode)&&(n=t.parentNode),n){const r=n.getAttribute("data-mat-row"),s=n.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(tt))},i.\u0275cmp=Ct({type:i,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange"},exportAs:["matCalendarBody"],features:[yn],attrs:hte,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click","focus"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(t,n){1&t&&(be(0,pte,3,6,"tr",0),be(1,gte,3,2,"tr",1)),2&t&&(G("ngIf",n._firstRowOffset<n.labelMinRequiredCells),O(1),G("ngForOf",n.rows))},dependencies:[fd,md,wr],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}'],encapsulation:2,changeDetection:0}),i})();function qP(i){return"TD"===i.nodeName}function ox(i,e,t){return null!==t&&e!==t&&i<t&&i===e}function ax(i,e,t){return null!==e&&e!==t&&i>=e&&i===t}function lx(i,e,t,n){return n&&null!==e&&null!==t&&e!==t&&i>=e&&i<=t}class ji{constructor(e,t){this.start=e,this.end=t}}let na=(()=>{class i{constructor(t,n){this.selection=t,this._adapter=n,this._selectionChanged=new Je,this.selectionChanged=this._selectionChanged,this.selection=t}updateSelection(t,n){const r=this.selection;this.selection=t,this._selectionChanged.next({selection:t,source:n,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(t){return this._adapter.isDateInstance(t)&&this._adapter.isValid(t)}}return i.\u0275fac=function(t){Wl()},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),Tte=(()=>{class i extends na{constructor(t){super(null,t)}add(t){super.updateSelection(t,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const t=new i(this._adapter);return t.updateSelection(this.selection,this),t}}return i.\u0275fac=function(t){return new(t||i)($(Jn))},i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})();const YP={provide:na,deps:[[new Jr,new _o,na],Jn],useFactory:function Ite(i,e){return i||new Tte(e)}},zg=new ue("MAT_DATE_RANGE_SELECTION_STRATEGY");let XP=(()=>{class i{constructor(t,n,r,s,o){this._changeDetectorRef=t,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rangeStrategy=o,this._rerenderSubscription=gt.EMPTY,this.selectedChange=new Pe,this._userSelection=new Pe,this.activeDateChange=new Pe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){const n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(n,this._activeDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof ji?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ur(null)).subscribe(()=>this._init())}ngOnChanges(t){const n=t.comparisonStart||t.comparisonEnd;n&&!n.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(t){const n=t.value,r=this._getDateFromDayOfMonth(n);let s,o;this._selected instanceof ji?(s=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):s=o=this._getDateInCurrentMonth(this._selected),(s!==n||o!==n)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:t.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_updateActiveDate(t){const r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(t.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(t){const n=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&t.preventDefault());case 27:return void(null!=this._previewEnd&&!Fi(t)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:t}),t.preventDefault(),t.stopPropagation()));default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),t.preventDefault()}_handleCalendarBodyKeyup(t){(32===t.keyCode||13===t.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(t){this._matCalendarBody._focusActiveCell(t)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:t,value:n}){if(this._rangeStrategy){const s=this._rangeStrategy.createPreview(n?n.rawValue:null,this.selected,t);this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this._changeDetectorRef.detectChanges()}}_getDateFromDayOfMonth(t){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),t)}_initWeekdays(){const t=this._dateAdapter.getFirstDayOfWeek(),n=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((o,a)=>({long:o,narrow:n[a]}));this._weekdays=s.slice(t).concat(s.slice(0,t))}_createWeekCells(){const t=this._dateAdapter.getNumDaysInMonth(this.activeDate),n=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<t;r++,s++){7==s&&(this._weeks.push([]),s=0);const o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),a=this._shouldEnableDate(o),l=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),c=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new sx(r+1,n[r],l,a,c,this._getCellCompareValue(o),o))}}_shouldEnableDate(t){return!!t&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(t))}_getDateInCurrentMonth(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}_hasSameMonthAndYear(t,n){return!(!t||!n||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(n)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(n))}_getCellCompareValue(t){if(t){const n=this._dateAdapter.getYear(t),r=this._dateAdapter.getMonth(t),s=this._dateAdapter.getDate(t);return new Date(n,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(t){t instanceof ji?(this._rangeStart=this._getCellCompareValue(t.start),this._rangeEnd=this._getCellCompareValue(t.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(t),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(t){return!this.dateFilter||this.dateFilter(t)}}return i.\u0275fac=function(t){return new(t||i)(C(xn),C(rl,8),C(Jn,8),C(Tr,8),C(zg,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-month-view"]],viewQuery:function(t,n){if(1&t&&rn(mu,5),2&t){let r;ot(r=at())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[yn],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","activeDateChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(t,n){1&t&&(T(0,"table",0)(1,"thead",1)(2,"tr"),be(3,_te,5,2,"th",2),A(),T(4,"tr"),ve(5,"th",3),A()(),T(6,"tbody",4),we("selectedValueChange",function(s){return n._dateSelected(s)})("activeDateChange",function(s){return n._updateActiveDate(s)})("previewChange",function(s){return n._previewChanged(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),A()()),2&t&&(O(3),G("ngForOf",n._weekdays),O(3),G("label",n._monthLabel)("rows",n._weeks)("todayValue",n._todayDate)("startValue",n._rangeStart)("endValue",n._rangeEnd)("comparisonStart",n._comparisonRangeStart)("comparisonEnd",n._comparisonRangeEnd)("previewStart",n._previewStart)("previewEnd",n._previewEnd)("isRange",n._isRange)("labelMinRequiredCells",3)("activeCell",n._dateAdapter.getDate(n.activeDate)-1))},dependencies:[md,mu],encapsulation:2,changeDetection:0}),i})(),ZP=(()=>{class i{constructor(t,n,r){this._changeDetectorRef=t,this._dateAdapter=n,this._dir=r,this._rerenderSubscription=gt.EMPTY,this.selectedChange=new Pe,this.yearSelected=new Pe,this.activeDateChange=new Pe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let n=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),KP(this._dateAdapter,n,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof ji?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedYear(t)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ur(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const n=this._dateAdapter.getYear(this._activeDate)-Vh(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<24;r++)s.push(n+r),4==s.length&&(this._years.push(s.map(o=>this._createCellForYear(o))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(t){const n=t.value,r=this._dateAdapter.createDate(n,0,1),s=this._getDateFromYear(n);this.yearSelected.emit(r),this.selectedChange.emit(s)}_updateActiveDate(t){const r=this._activeDate;this.activeDate=this._getDateFromYear(t.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(t){const n=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Vh(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-Vh(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),t.preventDefault()}_handleCalendarBodyKeyup(t){(32===t.keyCode||13===t.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_getActiveCell(){return Vh(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(t){const n=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,n,1));return this._dateAdapter.createDate(t,n,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(t){const n=this._dateAdapter.createDate(t,0,1),r=this._dateAdapter.getYearName(n),s=this.dateClass?this.dateClass(n,"multi-year"):void 0;return new sx(t,r,r,this._shouldEnableYear(t),s)}_shouldEnableYear(t){if(null==t||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(r)==t;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(t){if(this._selectedYear=null,t instanceof ji){const n=t.start||t.end;n&&(this._selectedYear=this._dateAdapter.getYear(n))}else t&&(this._selectedYear=this._dateAdapter.getYear(t))}}return i.\u0275fac=function(t){return new(t||i)(C(xn),C(Jn,8),C(Tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-multi-year-view"]],viewQuery:function(t,n){if(1&t&&rn(mu,5),2&t){let r;ot(r=at())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(t,n){1&t&&(T(0,"table",0)(1,"thead",1)(2,"tr"),ve(3,"th",2),A()(),T(4,"tbody",3),we("selectedValueChange",function(s){return n._yearSelected(s)})("activeDateChange",function(s){return n._updateActiveDate(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),A()()),2&t&&(O(4),G("rows",n._years)("todayValue",n._todayYear)("startValue",n._selectedYear)("endValue",n._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",n._getActiveCell()))},dependencies:[mu],encapsulation:2,changeDetection:0}),i})();function KP(i,e,t,n,r){const s=i.getYear(e),o=i.getYear(t),a=QP(i,n,r);return Math.floor((s-a)/24)===Math.floor((o-a)/24)}function Vh(i,e,t,n){return function Fte(i,e){return(i%e+e)%e}(i.getYear(e)-QP(i,t,n),24)}function QP(i,e,t){let n=0;return t?n=i.getYear(t)-24+1:e&&(n=i.getYear(e)),n}let JP=(()=>{class i{constructor(t,n,r,s){this._changeDetectorRef=t,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=gt.EMPTY,this.selectedChange=new Pe,this.monthSelected=new Pe,this.activeDateChange=new Pe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let n=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(n)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof ji?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedMonth(t)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ur(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(t){const n=t.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1);this.monthSelected.emit(r);const s=this._getDateFromMonth(n);this.selectedChange.emit(s)}_updateActiveDate(t){const r=this._activeDate;this.activeDate=this._getDateFromMonth(t.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(t){const n=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),t.preventDefault()}_handleCalendarBodyKeyup(t){(32===t.keyCode||13===t.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let t=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(n=>n.map(r=>this._createCellForMonth(r,t[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}_getDateFromMonth(t){const n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),r=this._dateAdapter.getNumDaysInMonth(n);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(t,n){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(r,"year"):void 0;return new sx(t,n.toLocaleUpperCase(),s,this._shouldEnableMonth(t),o)}_shouldEnableMonth(t){const n=this._dateAdapter.getYear(this.activeDate);if(null==t||this._isYearAndMonthAfterMaxDate(n,t)||this._isYearAndMonthBeforeMinDate(n,t))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(n,t,1);this._dateAdapter.getMonth(s)==t;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(t,n){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return t>r||t===r&&n>s}return!1}_isYearAndMonthBeforeMinDate(t,n){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return t<r||t===r&&n<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(t){this._selectedMonth=t instanceof ji?this._getMonthInCurrentYear(t.start)||this._getMonthInCurrentYear(t.end):this._getMonthInCurrentYear(t)}}return i.\u0275fac=function(t){return new(t||i)(C(xn),C(rl,8),C(Jn,8),C(Tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-year-view"]],viewQuery:function(t,n){if(1&t&&rn(mu,5),2&t){let r;ot(r=at())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(t,n){1&t&&(T(0,"table",0)(1,"thead",1)(2,"tr"),ve(3,"th",2),A()(),T(4,"tbody",3),we("selectedValueChange",function(s){return n._monthSelected(s)})("activeDateChange",function(s){return n._updateActiveDate(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),A()()),2&t&&(O(4),G("label",n._yearLabel)("rows",n._months)("todayValue",n._todayMonth)("startValue",n._selectedMonth)("endValue",n._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",n._dateAdapter.getMonth(n.activeDate)))},dependencies:[mu],encapsulation:2,changeDetection:0}),i})(),Lte=0,Ote=(()=>{class i{constructor(t,n,r,s,o){this._intl=t,this.calendar=n,this._dateAdapter=r,this._dateFormats=s,this._buttonDescriptionId="mat-calendar-button-"+Lte++,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const n=this._dateAdapter.getYear(this.calendar.activeDate)-Vh(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=n+24-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(n,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return this._intl.formatYearRange(s,o)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(t,n){return"month"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(n)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(n):"year"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(n):KP(this._dateAdapter,t,n,this.calendar.minDate,this.calendar.maxDate)}}return i.\u0275fac=function(t){return new(t||i)(C(Bh),C(Rt(()=>dx)),C(Jn,8),C(rl,8),C(xn))},i.\u0275cmp=Ct({type:i,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:yte,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(t,n){1&t&&(er(),T(0,"div",0)(1,"div",1)(2,"button",2),we("click",function(){return n.currentPeriodClicked()}),T(3,"span"),L(4),A(),y_(),T(5,"svg",3),ve(6,"polygon",4),A()(),function rM(){!function PL(){et.lFrame.currentNamespace=null}()}(),ve(7,"div",5),bn(8),T(9,"button",6),we("click",function(){return n.previousClicked()}),A(),T(10,"button",7),we("click",function(){return n.nextClicked()}),A()()()),2&t&&(O(2),st("aria-label",n.periodButtonLabel)("aria-describedby",n._buttonDescriptionId),O(1),st("id",n._buttonDescriptionId),O(1),en(n.periodButtonText),O(1),Vt("mat-calendar-invert","month"!==n.calendar.currentView),O(4),G("disabled",!n.previousEnabled()),st("aria-label",n.prevButtonLabel),O(1),G("disabled",!n.nextEnabled()),st("aria-label",n.nextButtonLabel))},dependencies:[Ar],encapsulation:2,changeDetection:0}),i})(),dx=(()=>{class i{constructor(t,n,r,s){this._dateAdapter=n,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Pe,this.yearSelected=new Pe,this.monthSelected=new Pe,this.viewChanged=new Pe(!0),this._userSelection=new Pe,this.stateChanges=new Je,this._intlChanges=t.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get selected(){return this._selected}set selected(t){this._selected=t instanceof ji?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get activeDate(){return this._clampedActiveDate}set activeDate(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(t){const n=this._currentView!==t?t:null;this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),n&&this.viewChanged.emit(n)}ngAfterContentInit(){this._calendarHeaderPortal=new ou(this.headerComponent||Ote),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(t){const n=t.minDate&&!this._dateAdapter.sameDate(t.minDate.previousValue,t.minDate.currentValue)?t.minDate:void 0,r=t.maxDate&&!this._dateAdapter.sameDate(t.maxDate.previousValue,t.maxDate.currentValue)?t.maxDate:void 0,s=n||r||t.dateFilter;if(s&&!s.firstChange){const o=this._getCurrentViewComponent();o&&(this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(t){const n=t.value;(this.selected instanceof ji||n&&!this._dateAdapter.sameDate(n,this.selected))&&this.selectedChange.emit(n),this._userSelection.emit(t)}_yearSelectedInMultiYearView(t){this.yearSelected.emit(t)}_monthSelectedInYearView(t){this.monthSelected.emit(t)}_goToDateInView(t,n){this.activeDate=t,this.currentView=n}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return i.\u0275fac=function(t){return new(t||i)(C(Bh),C(Jn,8),C(rl,8),C(xn))},i.\u0275cmp=Ct({type:i,selectors:[["mat-calendar"]],viewQuery:function(t,n){if(1&t&&(rn(XP,5),rn(JP,5),rn(ZP,5)),2&t){let r;ot(r=at())&&(n.monthView=r.first),ot(r=at())&&(n.yearView=r.first),ot(r=at())&&(n.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[At([YP]),yn],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(t,n){1&t&&(be(0,vte,0,0,"ng-template",0),T(1,"div",1),be(2,bte,1,8,"mat-month-view",2),be(3,wte,1,6,"mat-year-view",3),be(4,xte,1,6,"mat-multi-year-view",4),A()),2&t&&(G("cdkPortalOutlet",n._calendarHeaderPortal),O(1),G("ngSwitch",n.currentView),O(1),G("ngSwitchCase","month"),O(1),G("ngSwitchCase","year"),O(1),G("ngSwitchCase","multi-year"))},dependencies:[uc,mf,_Z,au,XP,JP,ZP],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})();const eF={transformPanel:Us("transformPanel",[bi("void => enter-dropdown",ki("120ms cubic-bezier(0, 0, 0.2, 1)",Wv([$t({opacity:0,transform:"scale(1, 0.8)"}),$t({opacity:1,transform:"scale(1, 1)"})]))),bi("void => enter-dialog",ki("150ms cubic-bezier(0, 0, 0.2, 1)",Wv([$t({opacity:0,transform:"scale(0.7)"}),$t({transform:"none",opacity:1})]))),bi("* => void",ki("100ms linear",$t({opacity:0})))]),fadeInCalendar:Us("fadeInCalendar",[zi("void",$t({opacity:0})),zi("enter",$t({opacity:1})),bi("void => *",ki("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let Nte=0;const tF=new ue("mat-datepicker-scroll-strategy"),Vte={provide:tF,deps:[dr],useFactory:function Bte(i){return()=>i.scrollStrategies.reposition()}},Hte=uu(class{constructor(i){this._elementRef=i}});let zte=(()=>{class i extends Hte{constructor(t,n,r,s,o,a){super(t),this._changeDetectorRef=n,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=o,this._subscriptions=new gt,this._animationDone=new Je,this._actionsPortal=null,this._closeButtonText=a.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(t){const n=this._model.selection,r=t.value,s=n instanceof ji;if(s&&this._rangeSelectionStrategy){const o=this._rangeSelectionStrategy.selectionFinished(r,n,t.event);this._model.updateSelection(o,this)}else r&&(s||!this._dateAdapter.sameDate(r,n))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(t,n){this._model=t?this._globalModel.clone():this._globalModel,this._actionsPortal=t,n&&this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(xn),C(na),C(Jn),C(zg,8),C(Bh))},i.\u0275cmp=Ct({type:i,selectors:[["mat-datepicker-content"]],viewQuery:function(t,n){if(1&t&&rn(dx,5),2&t){let r;ot(r=at())&&(n._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(t,n){1&t&&Ku("@transformPanel.done",function(){return n._animationDone.next()}),2&t&&(Ju("@transformPanel",n._animationState),Vt("mat-datepicker-content-touch",n.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[We],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(t,n){if(1&t&&(T(0,"div",0)(1,"mat-calendar",1),we("yearSelected",function(s){return n.datepicker._selectYear(s)})("monthSelected",function(s){return n.datepicker._selectMonth(s)})("viewChanged",function(s){return n.datepicker._viewChanged(s)})("_userSelection",function(s){return n._handleUserSelection(s)}),A(),be(2,Mte,0,0,"ng-template",2),T(3,"button",3),we("focus",function(){return n._closeButtonFocused=!0})("blur",function(){return n._closeButtonFocused=!1})("click",function(){return n.datepicker.close()}),L(4),A()()),2&t){let r;Vt("mat-datepicker-content-container-with-custom-header",n.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",n._actionsPortal),st("aria-modal",!0)("aria-labelledby",null!==(r=n._dialogLabelId)&&void 0!==r?r:void 0),O(1),G("id",n.datepicker.id)("ngClass",n.datepicker.panelClass)("startAt",n.datepicker.startAt)("startView",n.datepicker.startView)("minDate",n.datepicker._getMinDate())("maxDate",n.datepicker._getMaxDate())("dateFilter",n.datepicker._getDateFilter())("headerComponent",n.datepicker.calendarHeaderComponent)("selected",n._getSelected())("dateClass",n.datepicker.dateClass)("comparisonStart",n.comparisonStart)("comparisonEnd",n.comparisonEnd)("@fadeInCalendar","enter"),O(1),G("cdkPortalOutlet",n._actionsPortal),O(1),Vt("cdk-visually-hidden",!n._closeButtonFocused),G("color",n.color||"primary"),O(1),en(n._closeButtonText)}},dependencies:[fd,Ar,lZ,au,dx],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[eF.transformPanel,eF.fadeInCalendar]},changeDetection:0}),i})(),nF=(()=>{class i{constructor(t,n,r,s,o,a,l){this._overlay=t,this._ngZone=n,this._viewContainerRef=r,this._dateAdapter=o,this._dir=a,this._model=l,this._inputStateChanges=gt.EMPTY,this._document=Rs(lt),this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new Pe,this.monthSelected=new Pe,this.viewChanged=new Pe(!0),this.openedStream=new Pe,this.closedStream=new Pe,this._opened=!1,this.id="mat-datepicker-"+Nte++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new Je,this._scrollStrategy=s}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(t){this._color=t}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=wt(t)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(t){const n=wt(t);n!==this._disabled&&(this._disabled=n,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(t){this._restoreFocus=wt(t)}get panelClass(){return this._panelClass}set panelClass(t){this._panelClass=function NX(i,e=/\s+/){const t=[];if(null!=i){const n=Array.isArray(i)?i:`${i}`.split(e);for(const r of n){const s=`${r}`.trim();s&&t.push(s)}}return t}(t)}get opened(){return this._opened}set opened(t){wt(t)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(t){const n=t.xPosition||t.yPosition;if(n&&!n.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof OR&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(t){this._model.add(t)}_selectYear(t){this.yearSelected.emit(t)}_selectMonth(t){this.monthSelected.emit(t)}_viewChanged(t){this.viewChanged.emit(t)}registerInput(t){return this._inputStateChanges.unsubscribe(),this.datepickerInput=t,this._inputStateChanges=t.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(t){var n;this._actionsPortal=t,null===(n=this._componentRef)||void 0===n||n.instance._assignActions(t,!0)}removeActions(t){var n;t===this._actionsPortal&&(this._actionsPortal=null,null===(n=this._componentRef)||void 0===n||n.instance._assignActions(null,!0))}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=yh(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;const t=this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus,n=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){const{instance:r,location:s}=this._componentRef;r._startExitAnimation(),r._animationDone.pipe(si(1)).subscribe(()=>{const o=this._document.activeElement;t&&(!o||o===this._document.activeElement||s.nativeElement.contains(o))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}t?setTimeout(n):n()}_applyPendingSelection(){var t,n;null===(t=this._componentRef)||void 0===t||null===(n=t.instance)||void 0===n||n._applyPendingSelection()}_forwardContentValues(t){t.datepicker=this,t.color=this.color,t._dialogLabelId=this.datepickerInput.getOverlayLabelId(),t._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();const t=this.touchUi,n=new ou(zte,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new mg({positionStrategy:t?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[t?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:t?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(t?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{const o=s.keyCode;(38===o||40===o||37===o||39===o||33===o||34===o)&&s.preventDefault()}),this._componentRef=r.attach(n),this._forwardContentValues(this._componentRef.instance),t||this._ngZone.onStable.pipe(si(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(t)}_setConnectedPositions(t){const n="end"===this.xPosition?"end":"start",r="start"===n?"end":"start",s="above"===this.yPosition?"bottom":"top",o="top"===s?"bottom":"top";return t.withPositions([{originX:n,originY:o,overlayX:n,overlayY:s},{originX:n,originY:s,overlayX:n,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:o}])}_getCloseStream(t){return kr(t.backdropClick(),t.detachments(),t.keydownEvents().pipe(Gi(n=>27===n.keyCode&&!Fi(n)||this.datepickerInput&&Fi(n,"altKey")&&38===n.keyCode)))}}return i.\u0275fac=function(t){return new(t||i)(C(dr),C(tt),C(Vi),C(tF),C(Jn,8),C(Tr,8),C(na))},i.\u0275dir=Ee({type:i,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[yn]}),i})(),Ute=(()=>{class i extends nF{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Pn(i)))(n||i)}}(),i.\u0275cmp=Ct({type:i,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[At([YP,{provide:nF,useExisting:i}]),We],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0}),i})();class Ug{constructor(e,t){this.target=e,this.targetElement=t,this.value=this.target.value}}let Gte=(()=>{class i{constructor(t,n,r){this._elementRef=t,this._dateAdapter=n,this._dateFormats=r,this.dateChange=new Pe,this.dateInput=new Pe,this.stateChanges=new Je,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=gt.EMPTY,this._localeSubscription=gt.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!o||this._matchesFilter(o)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),a=this._getMinDate();return!a||!o||this._dateAdapter.compareDate(a,o)<=0?null:{matDatepickerMin:{min:a,actual:o}}},this._maxValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),a=this._getMaxDate();return!a||!o||this._dateAdapter.compareDate(a,o)>=0?null:{matDatepickerMax:{max:a,actual:o}}},this._lastValueValid=!1,this._localeSubscription=n.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(t){this._assignValueProgrammatically(t)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(t){const n=wt(t),r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this.stateChanges.next(void 0)),n&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(t){this._model=t,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(n=>{if(this._shouldHandleChangeEvent(n)){const r=this._getValueFromModel(n.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new Ug(this,this._elementRef.nativeElement)),this.dateChange.emit(new Ug(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(t){(function jte(i,e){const t=Object.keys(i);for(let n of t){const{previousValue:r,currentValue:s}=i[n];if(!e.isDateInstance(r)||!e.isDateInstance(s))return!0;if(!e.sameDate(r,s))return!0}return!1})(t,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}writeValue(t){this._assignValueProgrammatically(t)}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),t.preventDefault())}_onInput(t){const n=this._lastValueValid;let r=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(t&&!this.value&&this._cvaOnChange(r),n!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new Ug(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Ug(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=null!=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_assignValue(t){this._model?(this._assignValueToModel(t),this._pendingValue=null):this._pendingValue=t}_isValidValue(t){return!t||this._dateAdapter.isValid(t)}_parentDisabled(){return!1}_assignValueProgrammatically(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=this._isValidValue(t),t=this._dateAdapter.getValidDateOrNull(t),this._assignValue(t),this._formatValue(t)}_matchesFilter(t){const n=this._getDateFilter();return!n||n(t)}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Jn,8),C(rl,8))},i.\u0275dir=Ee({type:i,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[yn]}),i})();const Wte={provide:Li,useExisting:Rt(()=>hx),multi:!0},$te={provide:oi,useExisting:Rt(()=>hx),multi:!0};let hx=(()=>{class i extends Gte{constructor(t,n,r,s){super(t,n,r),this._formField=s,this._closedSubscription=gt.EMPTY,this._validator=Bw.compose(super._getValidators())}set matDatepicker(t){t&&(this._datepicker=t,this._closedSubscription=t.closedStream.subscribe(()=>this._onTouched()),this._registerModel(t.registerInput(this)))}get min(){return this._min}set min(t){const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(n,this._min)||(this._min=n,this._validatorOnChange())}get max(){return this._max}set max(t){const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(n,this._max)||(this._max=n,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(t){const n=this._matchesFilter(this.value);this._dateFilter=t,this._matchesFilter(this.value)!==n&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(t){return t}_assignValueToModel(t){this._model&&this._model.updateSelection(t,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(t){return t.source!==this}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Jn,8),C(rl,8),C(Vg,8))},i.\u0275dir=Ee({type:i,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(t,n){1&t&&we("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)}),2&t&&(Bs("disabled",n.disabled),st("aria-haspopup",n._datepicker?"dialog":null)("aria-owns",(null==n._datepicker?null:n._datepicker.opened)&&n._datepicker.id||null)("min",n.min?n._dateAdapter.toIso8601(n.min):null)("max",n.max?n._dateAdapter.toIso8601(n.max):null)("data-mat-calendar",n._datepicker?n._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[At([Wte,$te,{provide:$P,useExisting:i}]),We]}),i})(),qte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ee({type:i,selectors:[["","matDatepickerToggleIcon",""]]}),i})(),Yte=(()=>{class i{constructor(t,n,r){this._intl=t,this._changeDetectorRef=n,this._stateChanges=gt.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=wt(t)}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.datepicker?this.datepicker.stateChanges:cr(),n=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:cr(),r=this.datepicker?kr(this.datepicker.openedStream,this.datepicker.closedStream):cr();this._stateChanges.unsubscribe(),this._stateChanges=kr(this._intl.changes,t,n,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(C(Bh),C(xn),Is("tabindex"))},i.\u0275cmp=Ct({type:i,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,n,r){if(1&t&&Xn(r,qte,5),2&t){let s;ot(s=at())&&(n._customIcon=s.first)}},viewQuery:function(t,n){if(1&t&&rn(Cte,5),2&t){let r;ot(r=at())&&(n._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(t,n){1&t&&we("click",function(s){return n._open(s)}),2&t&&(st("tabindex",null)("data-mat-calendar",n.datepicker?n.datepicker.id:null),Vt("mat-datepicker-toggle-active",n.datepicker&&n.datepicker.opened)("mat-accent",n.datepicker&&"accent"===n.datepicker.color)("mat-warn",n.datepicker&&"warn"===n.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[yn],ngContentSelectors:Dte,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,n){1&t&&(er(Ete),T(0,"button",0,1),be(2,Ste,2,0,"svg",2),bn(3),A()),2&t&&(G("disabled",n.disabled)("disableRipple",n.disableRipple),st("aria-haspopup",n.datepicker?"dialog":null)("aria-label",n.ariaLabel||n._intl.openCalendarLabel)("tabindex",n.disabled?-1:n.tabIndex),O(2),G("ngIf",!n._customIcon))},dependencies:[wr,Ar],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),Xte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[Bh,Vte],imports:[ls,kw,cu,pw,nl,Lt,Eh]}),i})();function px(i,e){return"function"==typeof e?t=>t.pipe(px((n,r)=>vu(i(n,r)).pipe(Wn((s,o)=>e(n,s,r,o))))):t=>t.lift(new Zte(i))}class Zte{constructor(e){this.project=e}call(e,t){return t.subscribe(new Kte(e,this.project))}}class Kte extends yl{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new qh(this,t,n),o=this.destination;o.add(s),this.innerSubscription=_l(this,e,void 0,void 0,s),this.innerSubscription!==s&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,s){this.destination.next(t)}}const Qte=["trigger"],Jte=["panel"];function ene(i,e){if(1&i&&(T(0,"span",8),L(1),A()),2&i){const t=de();O(1),en(t.placeholder)}}function tne(i,e){if(1&i&&(T(0,"span",12),L(1),A()),2&i){const t=de(2);O(1),en(t.triggerValue)}}function nne(i,e){1&i&&bn(0,0,["*ngSwitchCase","true"])}function ine(i,e){1&i&&(T(0,"span",9),be(1,tne,2,1,"span",10),be(2,nne,1,0,"ng-content",11),A()),2&i&&(G("ngSwitch",!!de().customTrigger),O(2),G("ngSwitchCase",!0))}function rne(i,e){if(1&i){const t=ti();T(0,"div",13)(1,"div",14,15),we("@transformPanel.done",function(r){return vt(t),bt(de()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return vt(t),bt(de()._handleKeydown(r))}),bn(3,1),A()()}if(2&i){const t=de();G("@transformPanelWrap",void 0),O(1),_E("mat-select-panel ",t._getPanelTheme(),""),ma("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),G("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),st("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const sne=[[["mat-select-trigger"]],"*"],one=["mat-select-trigger","*"],iF={transformPanelWrap:Us("transformPanelWrap",[bi("* => void",bd("@transformPanel",[vd()],{optional:!0}))]),transformPanel:Us("transformPanel",[zi("void",$t({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),zi("showing",$t({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),zi("showing-multiple",$t({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),bi("void => *",ki("120ms cubic-bezier(0, 0, 0.2, 1)")),bi("* => void",ki("100ms 25ms linear",$t({opacity:0})))])};let rF=0;const oF=new ue("mat-select-scroll-strategy"),une=new ue("MAT_SELECT_CONFIG"),dne={provide:oF,deps:[dr],useFactory:function cne(i){return()=>i.scrollStrategies.reposition()}};class hne{constructor(e,t){this.source=e,this.value=t}}const pne=du(Sw(_g(XR(class{constructor(i,e,t,n,r){this._elementRef=i,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new Je}})))),fne=new ue("MatSelectTrigger");let mne=(()=>{class i extends pne{constructor(t,n,r,s,o,a,l,c,u,d,h,p,f,m){var y,g,_;super(o,s,l,c,d),this._viewportRuler=t,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=u,this._liveAnnouncer=f,this._defaultOptions=m,this._panelOpen=!1,this._compareWith=(v,b)=>v===b,this._uid="mat-select-"+rF++,this._triggerAriaLabelledBy=null,this._destroy=new Je,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+rF++,this._panelDoneAnimatingStream=new Je,this._overlayPanelClass=(null===(y=this._defaultOptions)||void 0===y?void 0:y.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(g=null===(_=this._defaultOptions)||void 0===_?void 0:_.disableOptionCentering)&&void 0!==g&&g,this.ariaLabel="",this.optionSelectionChanges=bw(()=>{const v=this.options;return v?v.changes.pipe(ur(v),px(()=>kr(...v.map(b=>b.onSelectionChange)))):this._ngZone.onStable.pipe(si(1),px(()=>this.optionSelectionChanges))}),this.openedChange=new Pe,this._openedStream=this.openedChange.pipe(Gi(v=>v),Wn(()=>{})),this._closedStream=this.openedChange.pipe(Gi(v=>!v),Wn(()=>{})),this.selectionChange=new Pe,this.valueChange=new Pe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=m?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=m.typeaheadDebounceInterval),this._scrollStrategyFactory=p,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,n,r,s;return null!==(t=null!==(n=this._required)&&void 0!==n?n:null===(r=this.ngControl)||void 0===r||null===(s=r.control)||void 0===s?void 0:s.hasValidator(Bw.required))&&void 0!==t&&t}set required(t){this._required=wt(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=wt(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=wt(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Cs(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Ng(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(oR(),ln(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(ln(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(ur(null),ln(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,n;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(n=this._selectionModel)||void 0===n?void 0:n.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const n=t.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!Fi(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const n=this._keyManager,r=t.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||Fi(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(t),this._multiple&&s&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(si(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new XX(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(ln(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(ln(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=kr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(ln(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),kr(...this.options.map(n=>n._stateChanges)).pipe(ln(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,n){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const n=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const n=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let r=(n?n+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(t){return new(t||i)(C(mw),C(xn),C(tt),C(Dw),C(mt),C(Tr,8),C(Oh,8),C(Nh,8),C(Vg,8),C(Ss,10),Is("tabindex"),C(oF),C(mZ),C(une,8))},i.\u0275dir=Ee({type:i,viewQuery:function(t,n){if(1&t&&(rn(Qte,5),rn(Jte,5),rn(UR,5)),2&t){let r;ot(r=at())&&(n.trigger=r.first),ot(r=at())&&(n.panel=r.first),ot(r=at())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[We,yn]}),i})(),gne=(()=>{class i extends mne{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,n,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-n+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(ln(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(si(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const n=o2(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===n?0:function RK(i,e,t,n){return i<t?i:i+e>t+n?Math.max(0,i-n+e):t}((t+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new hne(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(t.left+o-(r?s:0)),l=t.right+o-n.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,n,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):n-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(t){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*n,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,n){const r=Math.round(t-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,n,r){const s=Math.round(t-n);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*t,256),o=n*t-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=o2(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),n=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Pn(i)))(n||i)}}(),i.\u0275cmp=Ct({type:i,selectors:[["mat-select"]],contentQueries:function(t,n,r){if(1&t&&(Xn(r,fne,5),Xn(r,s2,5),Xn(r,r2,5)),2&t){let s;ot(s=at())&&(n.customTrigger=s.first),ot(s=at())&&(n.options=s),ot(s=at())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,n){1&t&&we("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&t&&(st("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),Vt("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[At([{provide:Bg,useExisting:i},{provide:n2,useExisting:i}]),We],ngContentSelectors:one,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,n){if(1&t&&(er(sne),T(0,"div",0,1),we("click",function(){return n.toggle()}),T(3,"div",2),be(4,ene,2,1,"span",3),be(5,ine,3,2,"span",4),A(),T(6,"div",5),ve(7,"div",6),A()(),be(8,rne,4,14,"ng-template",7),we("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&t){const r=is(1);st("aria-owns",n.panelOpen?n.id+"-panel":null),O(3),G("ngSwitch",n.empty),st("id",n._valueId),O(1),G("ngSwitchCase",!0),O(1),G("ngSwitchCase",!1),O(3),G("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},dependencies:[fd,uc,mf,L1,UR,zR],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[iF.transformPanelWrap,iF.transformPanel]},changeDetection:0}),i})(),_ne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[dne],imports:[ls,cu,a2,Lt,Eh,Hg,a2,Lt]}),i})();const yne=["input"],vne=function(i){return{enterDuration:i}},bne=["*"],wne=new ue("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let xne=0;const Mne={provide:Li,useExisting:Rt(()=>fx),multi:!0};class Cne{constructor(e,t){this.source=e,this.checked=t}}const Sne=Sw(uu(du(_g(class{constructor(i){this._elementRef=i}}))));let Ene=(()=>{class i extends Sne{constructor(t,n,r,s,o,a,l){super(t),this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=o,this._onChange=c=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Pe,this.toggleChange=new Pe,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${l}${++xne}`}get required(){return this._required}set required(t){this._required=wt(t)}get checked(){return this._checked}set checked(t){this._checked=wt(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return i.\u0275fac=function(t){Wl()},i.\u0275dir=Ee({type:i,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[We]}),i})(),fx=(()=>{class i extends Ene{constructor(t,n,r,s,o,a){super(t,n,r,s,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new Cne(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,n){n?this._focusMonitor.focusVia(this._inputElement,n,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Dr),C(xn),Is("tabindex"),C(wne),C(tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(t,n){if(1&t&&rn(yne,5),2&t){let r;ot(r=at())&&(n._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,n){2&t&&(Bs("id",n.id),st("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Vt("mat-checked",n.checked)("mat-disabled",n.disabled)("mat-slide-toggle-label-before","before"==n.labelPosition)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[At([Mne]),We],ngContentSelectors:bne,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,n){if(1&t&&(er(),T(0,"label",0,1)(2,"span",2)(3,"input",3,4),we("change",function(s){return n._onChangeEvent(s)})("click",function(s){return n._onInputClick(s)}),A(),T(5,"span",5),ve(6,"span",6),T(7,"span",7),ve(8,"span",8),A()()(),T(9,"span",9,10),we("cdkObserveContent",function(){return n._onLabelTextChange()}),T(11,"span",11),L(12,"\xa0"),A(),bn(13),A()()),2&t){const r=is(1),s=is(10);st("for",n.inputId),O(2),Vt("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),O(1),G("id",n.inputId)("required",n.required)("tabIndex",n.tabIndex)("checked",n.checked)("disabled",n.disabled),st("name",n.name)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby),O(4),G("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function cD(i,e,t,n){return uD(ne(),Ei(),i,e,t,n)}(18,vne,n._noopAnimations?0:150))}},dependencies:[sl,lR],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),i})(),aF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({}),i})(),Ane=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[aF,Ah,Lt,aw,aF,Lt]}),i})();const Ine=["sliderWrapper"],Ir=iu({passive:!1}),Lne={provide:Li,useExisting:Rt(()=>mx),multi:!0};class One{}const Nne=Sw(uu(_g(class{constructor(i){this._elementRef=i}}),"accent"));let mx=(()=>{class i extends Nne{constructor(t,n,r,s,o,a,l,c){super(t),this._focusMonitor=n,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Pe,this.input=new Pe,this.valueChange=new Pe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=gt.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!zh(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=zh(u)?function Bne(i,e){for(let t=0;t<i.touches.length;t++){const n=i.touches[t].target;if(e===n||e.contains(n))return i.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const d=cF(u,this._touchId);if(d){const h=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(d),this._valueOnSlideStart=h,u.cancelable&&u.preventDefault(),h!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const d=cF(u,this._touchId);if(d){u.cancelable&&u.preventDefault();const h=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(d),h!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!zh(u)||"number"!=typeof this._touchId||gx(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,Ir),u.addEventListener("touchstart",this._pointerDown,Ir)})}get invert(){return this._invert}set invert(t){this._invert=wt(t)}get max(){return this._max}set max(t){this._max=Cs(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Cs(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Cs(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=wt(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Cs(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let n=Cs(t,0);this._roundToDecimal&&n!==this.min&&n!==this.max&&(n=parseFloat(n.toFixed(this._roundToDecimal))),this._value=n,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=wt(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const n=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${n})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,Ir),t.removeEventListener("touchstart",this._pointerDown,Ir),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||Fi(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const n=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}n!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const n=this._document,r=zh(t),o=r?"touchend":"mouseup";n.addEventListener(r?"touchmove":"mousemove",this._pointerMove,Ir),n.addEventListener(o,this._pointerUp,Ir),r&&n.addEventListener("touchcancel",this._pointerUp,Ir);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,Ir),t.removeEventListener("mouseup",this._pointerUp,Ir),t.removeEventListener("touchmove",this._pointerMove,Ir),t.removeEventListener("touchend",this._pointerUp,Ir),t.removeEventListener("touchcancel",this._pointerUp,Ir);const n=this._getWindow();typeof n<"u"&&n&&n.removeEventListener("blur",this._windowBlur)}_increment(t){const n=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(n+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let n=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(n*this.step/(this.max-this.min)))*this.step/n}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=lF(t)?t:0}_createChangeEvent(t=this.value){let n=new One;return n.source=this,n.value=t,n}_calculatePercentage(t){const n=((t||0)-this.min)/(this.max-this.min);return lF(n)?n:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,n=0,r=1){return Math.max(n,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return i.\u0275fac=function(t){return new(t||i)(C(mt),C(Dr),C(xn),C(Tr,8),Is("tabindex"),C(tt),C(lt),C(tr,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-slider"]],viewQuery:function(t,n){if(1&t&&rn(Ine,5),2&t){let r;ot(r=at())&&(n._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,n){1&t&&we("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)})("keyup",function(){return n._onKeyup()})("mouseenter",function(){return n._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(Bs("tabIndex",n.tabIndex),st("aria-disabled",n.disabled)("aria-valuemax",n.max)("aria-valuemin",n.min)("aria-valuenow",n.value)("aria-valuetext",n.valueText??n.displayValue)("aria-orientation",n.vertical?"vertical":"horizontal"),Vt("mat-slider-disabled",n.disabled)("mat-slider-has-ticks",n.tickInterval)("mat-slider-horizontal",!n.vertical)("mat-slider-axis-inverted",n._shouldInvertAxis())("mat-slider-invert-mouse-coords",n._shouldInvertMouseCoords())("mat-slider-sliding",n._isSliding)("mat-slider-thumb-label-showing",n.thumbLabel)("mat-slider-vertical",n.vertical)("mat-slider-min-value",n._isMinValue())("mat-slider-hide-last-tick",n.disabled||n._isMinValue()&&n._getThumbGap()&&n._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[At([Lne]),We],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,n){1&t&&(T(0,"div",0,1)(2,"div",2),ve(3,"div",3)(4,"div",4),A(),T(5,"div",5),ve(6,"div",6),A(),T(7,"div",7),ve(8,"div",8)(9,"div",9),T(10,"div",10)(11,"span",11),L(12),A()()()()),2&t&&(O(3),G("ngStyle",n._getTrackBackgroundStyles()),O(1),G("ngStyle",n._getTrackFillStyles()),O(1),G("ngStyle",n._getTicksContainerStyles()),O(1),G("ngStyle",n._getTicksStyles()),O(1),G("ngStyle",n._getThumbContainerStyles()),O(5),en(n.displayValue))},dependencies:[N1],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),i})();function lF(i){return!isNaN(i)&&isFinite(i)}function zh(i){return"t"===i.type[0]}function cF(i,e){let t;return t=zh(i)?"number"==typeof e?gx(i.touches,e)||gx(i.changedTouches,e):i.touches[0]||i.changedTouches[0]:i,t?{x:t.clientX,y:t.clientY}:void 0}function gx(i,e){for(let t=0;t<i.length;t++)if(i[t].identifier===e)return i[t]}let Vne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[ls,Lt,Lt]}),i})(),uF=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-tooltip"]],inputs:{text:"text"},decls:4,vars:1,consts:[["mat-icon-button","","matTooltipPosition","right",3,"matTooltip","click"],["tooltip","matTooltip"]],template:function(t,n){if(1&t){const r=ti();T(0,"button",0,1),we("click",function(){return vt(r),bt(is(1).show())}),T(2,"mat-icon"),L(3,"help"),A()()}2&t&&G("matTooltip",n.text)},dependencies:[Ar,Jo,Fw],styles:["[_nghost-%COMP%]{display:inline-flex;margin-left:5px;vertical-align:middle}button[_ngcontent-%COMP%]{background-color:transparent;padding:0;border:none;color:#fff;cursor:help}button[_ngcontent-%COMP%]:before{margin:0}"],changeDetection:0}),i})(),Hne=(()=>{class i{constructor(){this.valueChange=new Pe,this.sliderValue=0,this.sliderMin=0,this.sliderMax=100}ngOnChanges(){const t=He.getReversedScale(this.min,this.max,this.value);this.sliderValue=He.getReversedCurve(this.sliderMin,this.sliderMax,t)}onSlide(t){const n=He.getCurvedScale(this.sliderMin,this.sliderMax,t),r=He.getScaledValue(this.min,this.max,n);this.valueChange.emit(r)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-curved-slider"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange"},features:[yn],decls:1,vars:4,consts:[["color","primary",3,"value","min","max","step","input"]],template:function(t,n){1&t&&(T(0,"mat-slider",0),we("input",function(s){return n.onSlide(s.value)}),A()),2&t&&G("value",n.sliderValue)("min",n.sliderMin)("max",n.sliderMax)("step",1)},dependencies:[mx],changeDetection:0}),i})();const zne=["date"],Une=["hours"],Gne=["minutes"],jne=["seconds"];function Wne(i,e){if(1&i){const t=ti();T(0,"button",45),we("click",function(){const s=vt(t).$implicit;return bt(de().goToDistance(s))}),L(1),Fn(2,"number"),A()}if(2&i){const t=e.$implicit;O(1),Nt(" ",yi(2,1,t,"1.0-2")," AU ")}}function $ne(i,e){if(1&i&&(T(0,"mat-option",46),L(1),A()),2&i){const t=e.$implicit;G("value",t),O(1),Nt(" ",t," ")}}function qne(i,e){if(1&i&&(T(0,"mat-option",46),L(1),A()),2&i){const t=e.$implicit;G("value",t),O(1),Nt(" ",t," ")}}function Yne(i,e){if(1&i&&(T(0,"mat-option",46),L(1),A()),2&i){const t=e.$implicit;G("value",t),O(1),Nt(" ",t," ")}}function Xne(i,e){if(1&i&&(T(0,"mat-option",46),L(1),A()),2&i){const t=e.$implicit;G("value",t.name),O(1),Nt(" ",t.name," ")}}function Zne(i,e){1&i&&(T(0,"mat-option"),L(1,"No tour available yet"),A())}function Kne(i,e){if(1&i&&(T(0,"mat-button-toggle",51),L(1),A()),2&i){const t=e.$implicit;G("value",t),O(1),Nt(" ",t.data.name," ")}}function Qne(i,e){if(1&i){const t=ti();T(0,"mat-button-toggle-group",48,49),we("ngModelChange",function(r){return vt(t),bt(de(2).goToAster(r))}),be(2,Kne,2,2,"mat-button-toggle",50),A()}if(2&i){const t=de().$implicit;G("ngModel",de().engine.state.aster)("vertical",!0),O(2),G("ngForOf",t.value)}}function Jne(i,e){1&i&&(T(0,"p"),L(1,"No asters available."),A())}function eie(i,e){if(1&i&&(T(0,"section")(1,"mat-label"),L(2),A(),be(3,Qne,3,3,"mat-button-toggle-group",47),be(4,Jne,2,0,"p",35),A()),2&i){const t=e.$implicit;O(2),Nt("",t.key," list"),O(1),G("ngIf",t.value.length),O(1),G("ngIf",!t.value.length)}}let tie=(()=>{class i{constructor(t,n,r){this.engine=t,this.bottomSheetRef=n,this.matDialog=r,this.listMap=new Map([["star",[]],["planet",[]],["dwarf",[]],["moon",[]],["asteroid",[]]]),this.minDate=new Date(1800,0,1),this.hourOptions=JT(0,23),this.minuteAndSecondOptions=JT(0,59),this.distanceOptions=[],this.au=ke}ngOnInit(){this.engine.state.asterMap.forEach(r=>{const s=this.listMap.get(r.data.type);s&&s.push(r)});const t=this.engine.control.state.maxDistance/ke;for(let r=0,s=Co(t,t>1?0:2);r<4;r++)this.distanceOptions.unshift(s),s/=2,s=Co(s,s>1?0:2);this.tours=TJ.get(this.engine.state.aster.data.group),this.engine.state.isLightMode&&(this.tours=this.tours.filter(r=>!r.noLightMode))}ngAfterViewInit(){this.updateDateFields(),this.changeInterval=window.setInterval(()=>this.updateDateFields(),1e3)}ngOnDestroy(){clearInterval(this.changeInterval)}showHelp(){this.matDialog.open(bJ,{width:"700px"})}goToDistance(t){const n=t*ke;this.engine.control.zoom(n,n<this.engine.state.cameraDistance)}restoreOrientation(){this.engine.state.camera.up.set(0,1,0)}goToAster(t){this.engine.control.moveToAster(t.data.name)}close(){this.bottomSheetRef.dismiss()}preserveOrder(){return 1}playTour(t){const n=this.tours.find(r=>r.name===t);this.bottomSheetRef.dismiss(n)}updateDateFields(){this.date.nativeElement.value=He.getDateString(this.engine.state.date),document.getElementsByClassName("hours-select").length||(this.hours.value=this.engine.state.date.getHours()),document.getElementsByClassName("minutes-select").length||(this.minutes.value=this.engine.state.date.getMinutes()),document.getElementsByClassName("seconds-select").length||(this.seconds.value=this.engine.state.date.getSeconds())}}return i.\u0275fac=function(t){return new(t||i)(C(Iw),C(yg),C(pu))},i.\u0275cmp=Ct({type:i,selectors:[["app-menu"]],viewQuery:function(t,n){if(1&t&&(rn(zne,5),rn(Une,5),rn(Gne,5),rn(jne,5)),2&t){let r;ot(r=at())&&(n.date=r.first),ot(r=at())&&(n.hours=r.first),ot(r=at())&&(n.minutes=r.first),ot(r=at())&&(n.seconds=r.first)}},decls:111,vars:36,consts:[[1,"title"],["mat-raised-button","","color","primary",3,"click"],[1,"text"],["mat-raised-button","","color","warn",3,"click"],[1,"scrollable"],[1,"grid"],[1,"spacer"],["text","Change the time speed (1 = real time)."],[3,"value","min","max","valueChange"],["text","Jump to a distance from the selected aster in astronomical unit."],[1,"button-bar"],["mat-raised-button","","class","distance-button","color","primary",3,"click",4,"ngFor","ngForOf"],["text","Increase the size of all the asters."],["color","primary",3,"value","min","max","step","input"],["text","Change the calendar date."],[1,"date"],["matInput","","readonly","",3,"matDatepicker","min","click","dateChange"],["date",""],["matSuffix","",3,"for"],["touchUi","true",3,"startAt"],["picker",""],[1,"time"],["panelClass","hours-select",3,"selectionChange"],["hours",""],[3,"value",4,"ngFor","ngForOf"],["panelClass","minutes-select",3,"selectionChange"],["minutes",""],["panelClass","seconds-select",3,"selectionChange"],["seconds",""],["text","Extra controls to handle the spacecraft."],["mat-raised-button","","color","accent",3,"click"],[1,"icon-loop"],["text","Start an automatic tour of the system."],["placeholder","Select a tour"],["tourSelect",""],[4,"ngIf"],["mat-raised-button","","color","primary","matSuffix","",3,"disabled","click"],[1,"flex"],["color","primary",3,"ngModel","ngModelChange"],["text","Enable or disabled the aster rotation on its own axis."],["text","Enable or disabled the visibility of the aster rotation axis (white line)."],["text","Enable or disabled the visibility of the stars glare."],["text","Anchor the camera to the center of mass (only for binary systems)."],["text","Enable or disabled the visibility of the center of mass (red sphere) (only for binary systems)."],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"distance-button",3,"click"],[3,"value"],[3,"ngModel","vertical","ngModelChange",4,"ngIf"],[3,"ngModel","vertical","ngModelChange"],["group","matButtonToggleGroup"],["class","primary",3,"value",4,"ngFor","ngForOf"],[1,"primary",3,"value"]],template:function(t,n){if(1&t){const r=ti();T(0,"div",0)(1,"button",1),we("click",function(){return n.showHelp()}),T(2,"span",2),L(3,"What I'm seeing?"),A(),T(4,"mat-icon"),L(5,"error_outline"),A()(),T(6,"span"),L(7,"Mission Control"),A(),T(8,"button",3),we("click",function(){return n.close()}),T(9,"span",2),L(10,"Close panel"),A(),T(11,"mat-icon"),L(12,"close"),A()()(),T(13,"div",4)(14,"div",5)(15,"section")(16,"mat-label",6)(17,"span"),L(18," Speed "),ve(19,"app-tooltip",7),A(),T(20,"small"),L(21),Fn(22,"number"),A()(),T(23,"app-curved-slider",8),we("valueChange",function(o){return n.engine.state.speed=o}),A()(),T(24,"section")(25,"mat-label",6)(26,"span"),L(27," Distance "),ve(28,"app-tooltip",9),A(),T(29,"small"),L(30),Fn(31,"number"),A()(),T(32,"div",10),be(33,Wne,3,4,"button",11),A()(),T(34,"section")(35,"mat-label",6)(36,"span"),L(37," Asters Scale "),ve(38,"app-tooltip",12),A(),T(39,"small"),L(40),A()(),T(41,"mat-slider",13),we("input",function(o){return n.engine.state.scale=o.value}),A()()(),T(42,"div",5)(43,"section")(44,"mat-label"),L(45," Date "),ve(46,"app-tooltip",14),A(),T(47,"div",6)(48,"mat-form-field",15)(49,"input",16,17),we("click",function(){return vt(r),bt(is(53).open())})("dateChange",function(o){return n.engine.state.date=o.value}),A(),ve(51,"mat-datepicker-toggle",18)(52,"mat-datepicker",19,20),A(),T(54,"mat-form-field",21)(55,"mat-select",22,23),we("selectionChange",function(o){return n.engine.state.date.setHours(o.value)}),be(57,$ne,2,2,"mat-option",24),A()(),T(58,"mat-form-field",21)(59,"mat-select",25,26),we("selectionChange",function(o){return n.engine.state.date.setMinutes(o.value)}),be(61,qne,2,2,"mat-option",24),A()(),T(62,"mat-form-field",21)(63,"mat-select",27,28),we("selectionChange",function(o){return n.engine.state.date.setSeconds(o.value)}),be(65,Yne,2,2,"mat-option",24),A()()()(),T(66,"section")(67,"mat-label"),L(68," Controls "),ve(69,"app-tooltip",29),A(),T(70,"div",10)(71,"button",30),we("click",function(){return n.restoreOrientation()}),L(72," Restore Orientation "),ve(73,"i",31),A()()(),T(74,"section")(75,"mat-label"),L(76," Tours "),ve(77,"app-tooltip",32),A(),T(78,"mat-form-field")(79,"mat-select",33,34),be(81,Xne,2,2,"mat-option",24),be(82,Zne,2,0,"mat-option",35),A(),T(83,"button",36),we("click",function(){vt(r);const o=is(80);return bt(n.playTour(o.value))}),T(84,"mat-icon"),L(85,"play_arrow"),A()()()()(),T(86,"div",5)(87,"section",37)(88,"mat-slide-toggle",38),we("ngModelChange",function(o){return n.engine.state.rotation=o}),L(89," Rotation on its own axis "),A(),ve(90,"app-tooltip",39),A(),T(91,"section",37)(92,"mat-slide-toggle",38),we("ngModelChange",function(o){return n.engine.state.showAxes=o}),L(93," Visibility of the aster axis "),A(),ve(94,"app-tooltip",40),A(),T(95,"section",37)(96,"mat-slide-toggle",38),we("ngModelChange",function(o){return n.engine.state.showGlare=o}),L(97," Visibility of the stars glare "),A(),ve(98,"app-tooltip",41),A()(),T(99,"div",5)(100,"section",37)(101,"mat-slide-toggle",38),we("ngModelChange",function(o){return n.engine.state.anchorMassCenter=o}),L(102," Anchor to the mass center "),A(),ve(103,"app-tooltip",42),A(),T(104,"section",37)(105,"mat-slide-toggle",38),we("ngModelChange",function(o){return n.engine.state.showMassCenter=o}),L(106," Visibility of the mass center "),A(),ve(107,"app-tooltip",43),A()(),T(108,"div",5),be(109,eie,5,3,"section",44),Fn(110,"keyvalue"),A()()}if(2&t){const r=is(53),s=is(80);O(21),en(yi(22,27,n.engine.state.speed,"1.0-0")),O(2),G("value",n.engine.state.speed)("min",n.engine.state.minSpeed)("max",n.engine.state.maxSpeed),O(7),Nt(" ",yi(31,30,n.engine.state.cameraDistance/n.au,"1.0-2")," AU "),O(3),G("ngForOf",n.distanceOptions),O(7),en(n.engine.state.scale),O(1),G("value",n.engine.state.scale)("min",1)("max",500)("step",1),O(8),G("matDatepicker",r)("min",n.minDate),O(2),G("for",r),O(1),G("startAt",n.engine.state.date),O(5),G("ngForOf",n.hourOptions),O(4),G("ngForOf",n.minuteAndSecondOptions),O(4),G("ngForOf",n.minuteAndSecondOptions),O(16),G("ngForOf",n.tours),O(1),G("ngIf",!n.tours.length),O(1),G("disabled",!s.value),O(5),G("ngModel",n.engine.state.rotation),O(4),G("ngModel",n.engine.state.showAxes),O(4),G("ngModel",n.engine.state.showGlare),O(5),G("ngModel",n.engine.state.anchorMassCenter),O(4),G("ngModel",n.engine.state.showMassCenter),O(4),G("ngForOf",yi(110,33,n.listMap,n.preserveOrder))}},dependencies:[md,wr,Uw,Og,Ar,VP,HP,Ute,hx,Yte,Jo,ste,rx,tte,ute,gne,s2,fx,mx,uF,Hne,gf,V1],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.title[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:20px;justify-content:space-between;margin-top:5px;min-height:50px}.title[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{margin-bottom:10px;width:23%}.scrollable[_ngcontent-%COMP%]{flex-grow:1;overflow:auto;padding-right:15px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-gap:15px 25px;min-height:50px;padding:10px 0}@media all and (min-width: 550px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media all and (min-width: 850px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.grid[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{overflow:hidden}.spacer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.date[_ngcontent-%COMP%]{width:41%}.time[_ngcontent-%COMP%]{width:16%}.mat-button-toggle-group[_ngcontent-%COMP%]{margin:10px 0;max-height:180px;overflow:auto}.flex[_ngcontent-%COMP%]{align-items:center;display:flex}mat-label[_ngcontent-%COMP%]{text-transform:capitalize;-webkit-user-select:none;-moz-user-select:none;user-select:none}.mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:5px}.button-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 0}.distance-button[_ngcontent-%COMP%]{min-width:0;min-width:initial;padding:0;width:23%}@media all and (max-width: 500px){.title[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),i})();function nie(i,e){1&i&&(T(0,"button",6)(1,"mat-icon"),L(2,"close"),A()())}function iie(i,e){if(1&i){const t=ti();T(0,"div",7),we("click",function(){const s=vt(t).$implicit;return bt(de().onSelect(s))}),ve(1,"img",8),T(2,"h5")(3,"span"),L(4),A(),T(5,"small"),L(6),A()()()}if(2&i){const t=e.$implicit,n=de();O(1),G("src","assets/systems/"+t+"/cover.jpg",Ol),O(3),en(t.split("-").join(" ")),O(2),Nt("Size: ",n.isLightMode?n.sizeMap.get(t).light:n.sizeMap.get(t).full," MB")}}let rie=(()=>{class i{constructor(t){this.dialogRef=t,this.systems=Array.from(fh.keys()),this.isLightMode=!1,this.sizeMap=new Map([["solar-system",{full:50,light:7}],["hat-p-54-system",{full:1,light:1}],["algol-system",{full:1,light:1}],["fomalhaut-system",{full:1,light:1}],["errai-system",{full:2,light:2}],["trappist-1-system",{full:5,light:5}],["hr-8799-system",{full:2,light:2}]])}onSelect(t){this.dialogRef.close({name:t,isLightMode:this.isLightMode})}}return i.\u0275fac=function(t){return new(t||i)(C(Sg))},i.\u0275cmp=Ct({type:i,selectors:[["app-system-select"]],decls:8,vars:3,consts:[["mat-dialog-title",""],["color","primary",3,"ngModel","ngModelChange"],["text","This mode save bandwidth loading the major bodies only"],["type","button","mat-icon-button","","mat-dialog-close","","tabindex","-1",4,"ngIf"],[1,"content"],["class","system",3,"click",4,"ngFor","ngForOf"],["type","button","mat-icon-button","","mat-dialog-close","","tabindex","-1"],[1,"system",3,"click"],[3,"src"]],template:function(t,n){1&t&&(T(0,"div",0)(1,"section")(2,"mat-slide-toggle",1),we("ngModelChange",function(s){return n.isLightMode=s}),L(3," Light Mode "),A(),ve(4,"app-tooltip",2),A(),be(5,nie,3,0,"button",3),A(),T(6,"div",4),be(7,iie,7,3,"div",5),A()),2&t&&(O(2),G("ngModel",n.isLightMode),O(3),G("ngIf",!n.dialogRef.disableClose),O(2),G("ngForOf",n.systems))},dependencies:[md,wr,Uw,Og,Ar,Lw,Ow,Jo,fx,uF],styles:[".mat-dialog-title[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:16px;justify-content:space-between;margin:15px}.mat-dialog-title[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{align-items:center;display:flex}.content[_ngcontent-%COMP%]{height:calc(100vh - 80px);overflow:auto;display:flex;justify-content:space-between;flex-wrap:wrap}.system[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;position:relative;overflow:hidden;width:100%}.system[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex-wrap:wrap;justify-content:center;align-items:center;position:absolute;top:0;left:0;color:#fff;margin:0;width:100%;height:100%;text-transform:capitalize;font-size:26px;font-weight:400}.system[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{background-color:#00000080;padding:5px;margin-left:20%}.system[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:16px;color:#eee}"],changeDetection:0}),i})();let oie=(()=>{class i{constructor(){this.version="8.2.1"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-loader"]],inputs:{status:"status"},decls:12,vars:2,consts:[[1,"loader"],[1,"title-box"],[1,"title"],[1,"version"],[1,"spinner-box"],[1,"status"],[1,"spinner"],[1,"dot1"],[1,"dot2"]],template:function(t,n){1&t&&(T(0,"div",0)(1,"div",1)(2,"div",2),L(3,"Collapsar"),A(),T(4,"div",3),L(5),A()(),T(6,"div",4)(7,"div",5),L(8),A(),T(9,"div",6),ve(10,"div",7)(11,"div",8),A()()()),2&t&&(O(5),en(n.version),O(3),Nt("",n.status," %"))},styles:[".loader[_ngcontent-%COMP%]{background-color:#000;width:100%;height:100%;position:fixed;top:0;left:0;display:flex;flex-flow:column nowrap;align-items:center;justify-content:center;z-index:100}.title-box[_ngcontent-%COMP%]{position:relative}.title[_ngcontent-%COMP%]{margin-bottom:15px;color:#fff;font-size:50px}.version[_ngcontent-%COMP%]{color:#ddd;position:absolute;right:-40px;top:0;font-size:14px}.spinner-box[_ngcontent-%COMP%]{margin-top:30px;position:relative;width:500px}.status[_ngcontent-%COMP%]{color:#ddd;width:100%;text-align:center;font-size:20px;font-weight:700;color:#888}.spinner[_ngcontent-%COMP%]{margin:22px auto;width:70px;height:70px;position:relative;text-align:center;animation:sk-rotate 2s infinite linear}.dot1[_ngcontent-%COMP%], .dot2[_ngcontent-%COMP%]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:#eee;border-radius:100%;animation:sk-bounce 2s infinite ease-in-out}.dot2[_ngcontent-%COMP%]{top:auto;bottom:0;animation-delay:-1s}@keyframes sk-rotate{to{transform:rotate(360deg)}}@keyframes sk-bounce{0%,to{transform:scale(.2)}50%{transform:scale(1)}}"],changeDetection:0}),i})(),aie=(()=>{class i{constructor(t){this.photo=t}}return i.\u0275fac=function(t){return new(t||i)(C(D2))},i.\u0275cmp=Ct({type:i,selectors:[["app-photo"]],decls:6,vars:1,consts:[["mat-dialog-title",""],["type","button","mat-icon-button","","mat-dialog-close","","tabindex","-1"],[1,"photo",3,"src"]],template:function(t,n){1&t&&(T(0,"h2",0),L(1," Image "),T(2,"button",1)(3,"mat-icon"),L(4,"close"),A()()(),ve(5,"img",2)),2&t&&(O(5),G("src",n.photo,Ol))},dependencies:[Ar,Lw,Ow,Jo],styles:[".photo[_ngcontent-%COMP%]{display:block;width:100%}"]}),i})();function lie(i,e){if(1&i){const t=ti();T(0,"img",7),we("click",function(){vt(t);const r=de();return bt(r.showPhoto(r.tour.steps[r.tourStep].photo))}),A()}if(2&i){const t=de();G("src",t.tour.steps[t.tourStep].photo,Ol)}}function cie(i,e){if(1&i){const t=ti();T(0,"button",8),we("click",function(){return vt(t),bt(de().nextStep())}),L(1," Next "),T(2,"mat-icon"),L(3,"navigate_next"),A()()}}let uie=(()=>{class i{constructor(t){this.matDialog=t,this.endTour=new Pe,this.tourStep=-1}ngOnInit(){this.nextStep()}nextStep(){this.tourStep++,this.tour.steps[this.tourStep].action(this.engine)}showPhoto(t){this.matDialog.open(aie,{width:"95vw",maxWidth:"95vw",data:t})}}return i.\u0275fac=function(t){return new(t||i)(C(pu))},i.\u0275cmp=Ct({type:i,selectors:[["app-tour"]],inputs:{engine:"engine",tour:"tour"},outputs:{endTour:"endTour"},decls:10,vars:3,consts:[[1,"tour-dialog"],[1,"tour-body"],["class","tour-photo",3,"src","click",4,"ngIf"],[1,"tour-message",3,"innerHTML"],[1,"tour-options"],["mat-stroked-button","","color","warn",3,"click"],["mat-stroked-button","","color","accent",3,"click",4,"ngIf"],[1,"tour-photo",3,"src","click"],["mat-stroked-button","","color","accent",3,"click"]],template:function(t,n){1&t&&(T(0,"div",0)(1,"div",1),be(2,lie,1,1,"img",2),ve(3,"span",3),A(),T(4,"div",4)(5,"button",5),we("click",function(){return n.endTour.emit()}),L(6," Exit tour "),T(7,"mat-icon"),L(8,"stop_circle"),A()(),be(9,cie,4,0,"button",6),A()()),2&t&&(O(2),G("ngIf",n.tour.steps[n.tourStep].photo),O(1),G("innerHTML",n.tour.steps[n.tourStep].message.trim(),jM),O(6),G("ngIf",n.tourStep<n.tour.steps.length-1))},dependencies:[wr,Ar,Jo],styles:[".tour-dialog[_ngcontent-%COMP%]{background-color:#0006;border-radius:5px;bottom:10px;box-sizing:border-box;color:#fff;padding:20px;position:absolute;right:10px;width:calc(100% - 20px)}.tour-body[_ngcontent-%COMP%]{max-height:calc(100vh - 110px);overflow:auto}.tour-photo[_ngcontent-%COMP%]{cursor:pointer;display:block;width:100%}.tour-message[_ngcontent-%COMP%]{font-size:18px;font-weight:300;line-height:26px;white-space:pre-line}.tour-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:25px}@media all and (min-width: 500px) and (max-width: 820px){.tour-photo[_ngcontent-%COMP%]{float:right;margin-bottom:12px;margin-left:12px;width:50%}}@media all and (min-width: 821px){.tour-dialog[_ngcontent-%COMP%]{bottom:8%;right:8%;width:450px}}"]}),i})();function die(i,e){if(1&i){const t=ti();T(0,"div",5),ve(1,"i",6),T(2,"h3"),L(3,"Houston, we have a problem."),A(),T(4,"p"),L(5,"A network error has occurred while loading resources. Please try again."),A(),T(6,"button",7),we("click",function(){return vt(t),bt(de().showSystemSelect())}),L(7," Try again "),A()()}}function hie(i,e){if(1&i){const t=ti();T(0,"app-tour",8),we("endTour",function(){return vt(t),bt(de().endTour())}),A()}if(2&i){const t=de();G("tour",t.tour)("engine",t.engine)}}function pie(i,e){if(1&i){const t=ti();T(0,"nav")(1,"button",9),we("touchstart",function(){return vt(t),bt(de().startZoom(1))})("touchend",function(){return vt(t),bt(de().endZoom())})("touchcancel",function(){return vt(t),bt(de().endZoom())})("mousedown",function(){return vt(t),bt(de().startZoom(1))})("mouseup",function(){return vt(t),bt(de().endZoom())})("mouseleave",function(){return vt(t),bt(de().endZoom())}),T(2,"mat-icon"),L(3,"arrow_downward"),A()(),T(4,"button",10),we("touchstart",function(){return vt(t),bt(de().startZoom(-1))})("touchend",function(){return vt(t),bt(de().endZoom())})("touchcancel",function(){return vt(t),bt(de().endZoom())})("mousedown",function(){return vt(t),bt(de().startZoom(-1))})("mouseup",function(){return vt(t),bt(de().endZoom())})("mouseleave",function(){return vt(t),bt(de().endZoom())}),T(5,"mat-icon"),L(6,"arrow_upward"),A()(),T(7,"button",11),we("click",function(){return vt(t),bt(de().showMenu())}),ve(8,"img",12),A(),T(9,"button",13),we("click",function(){return vt(t),bt(de().showDatasheet())}),T(10,"mat-icon"),L(11,"sort"),A()(),T(12,"button",14),we("click",function(){return vt(t),bt(de().showSystemSelect())}),T(13,"mat-icon"),L(14,"home"),A()()()}}function fie(i,e){1&i&&ve(0,"app-loader",15),2&i&&G("status",de().progress)}let mie=(()=>{class i{constructor(t,n,r){this.ngZone=t,this.bottomSheet=n,this.matDialog=r,this.progress=0,this.isLoading=!1,this.isError=!1,this.tour=null}ngOnInit(){this.showSystemSelect(),this.ngZone.runOutsideAngular(()=>this.engine=new iX(document.getElementById("host")))}startZoom(t){let r=.01*this.engine.state.aster.data.physic.radius*t;const s=this.engine.control.getDistance(),o=2*this.engine.control.state.minDistance,a=this.engine.control.state.maxDistance;-1===t&&s<o||(this.zoomInterval=window.setInterval(()=>{r*=1.15;let l=s+r;if(-1===t&&l<o&&(l=o),l>a)return this.endZoom();this.engine.control.zoom(l,-1===t)},1e3/60))}endZoom(){window.clearInterval(this.zoomInterval)}showMenu(){this.bottomSheet.open(tie,{data:this.engine,hasBackdrop:!1}).afterDismissed().subscribe(t=>{t&&(this.engine.resetState(),this.tour=t)})}endTour(){this.tour=null,this.engine.resetState()}showDatasheet(){this.bottomSheet.open(lJ,{data:this.engine,hasBackdrop:!1})}showSystemSelect(){this.matDialog.open(rie,{width:"98vw",maxWidth:"98vw",panelClass:"no-padding",disableClose:!this.engine}).afterClosed().subscribe(t=>{t&&this.onSystemChange(t)})}onSystemChange(t){var n=this;return Ri(function*(){n.isLoading=!0,n.progress=0,n.engine.state.isLightMode=t.isLightMode;let r=fh.get(t.name);return t.isLightMode&&(r=r.filter(s=>["star","planet"].includes(s.type))),n.engine.createSystem(r,s=>n.progress=s).then(()=>{n.isError=!1;const s=Array.from(n.engine.state.asterMap.values());n.engine.state.aster=s.find(o=>"star"===o.data.type),n.engine.resetState(),n.engine.control.play()}).catch(()=>n.isError=!0).then(()=>{n.isLoading=!1})})()}}return i.\u0275fac=function(t){return new(t||i)(C(tt),C(BK),C(pu))},i.\u0275cmp=Ct({type:i,selectors:[["app-root"]],decls:5,vars:4,consts:[["id","host"],["id","init-error",4,"ngIf"],[3,"tour","engine","endTour",4,"ngIf"],[4,"ngIf"],[3,"status",4,"ngIf"],["id","init-error"],[1,"icon-frown"],["mat-raised-button","","color","primary",3,"click"],[3,"tour","engine","endTour"],["mat-icon-button","","matTooltip","Hold to accelerate backward",3,"touchstart","touchend","touchcancel","mousedown","mouseup","mouseleave"],["mat-icon-button","","matTooltip","Hold to accelerate forward",3,"touchstart","touchend","touchcancel","mousedown","mouseup","mouseleave"],["mat-icon-button","",1,"btn-menu",3,"click"],["src","assets/icons/icon-72x72.png"],["mat-icon-button","","matTooltip","View the aster details",3,"click"],["mat-icon-button","","matTooltip","Change the system",3,"click"],[3,"status"]],template:function(t,n){1&t&&(ve(0,"div",0),be(1,die,8,0,"div",1),be(2,hie,1,2,"app-tour",2),be(3,pie,15,0,"nav",3),be(4,fie,1,1,"app-loader",4)),2&t&&(O(1),G("ngIf",n.isError),O(1),G("ngIf",n.tour),O(1),G("ngIf",!n.tour&&!n.isError),O(1),G("ngIf",n.isLoading))},dependencies:[wr,Ar,Jo,Fw,oie,uie],styles:["#host[_ngcontent-%COMP%]{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}#init-error[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;display:flex;flex-flow:column;align-items:center;justify-content:center;text-align:center;color:#fff;padding:25px;box-sizing:border-box}#init-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 auto;color:#cc0;font-size:90px}#init-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:5px 0}nav[_ngcontent-%COMP%]{align-items:center;bottom:20px;color:#fff;display:flex;justify-content:space-between;left:50%;margin-left:-130px;position:absolute;width:260px}.btn-menu[_ngcontent-%COMP%]{height:72px;width:72px}"]}),i})(),gie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[Lt,Lt]}),i})(),Iie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[KR,Ah,Lt,Aw,ls,KR,Lt,Aw,gie]}),i})(),Pie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[cu,nl,ls,kw,Lt,Lt]}),i})(),Lie=(()=>{class i extends ZR{parse(t){if("number"==typeof t)return new Date(t);if("string"==typeof t&&t.includes("/")){const n=t.split("/").map(r=>Number(r));return new Date(n[2],n[1]-1,n[0])}return t?new Date(Date.parse(t)):null}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Pn(i)))(n||i)}}(),i.\u0275prov=Se({token:i,factory:i.\u0275fac}),i})(),hF=(()=>{class i{constructor(t){this.dateAdapter=t,this.dateAdapter.setLocale("it-IT"),this.dateAdapter.getFirstDayOfWeek=()=>1}}return i.\u0275fac=function(t){return new(t||i)($(Jn))},i.\u0275mod=dt({type:i}),i.\u0275inj=it({providers:[{provide:Jn,useClass:Lie}],imports:[l2,kw,Pee,wK,Xte,vJ,bQ,dte,Hg,Iie,_ne,Ane,Vne,Pie,kQ]}),i})(),Oie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i}),i.\u0275inj=it({imports:[ls,Dee,hF,hF]}),i})(),Nie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=dt({type:i,bootstrap:[mie]}),i.\u0275inj=it({imports:[aT,S6,Oie]}),i})();(function $H(){o1=!1})(),gz().bootstrapModule(Nie).catch(i=>console.error(i))}},uo=>{uo(uo.s=276)}]);